import{d as t,r as e,t as n,c as i,o as r,F as s,a as o,n as a,u as c,b as l,e as u,f as h,g as d,h as f,i as p,w as g,j as m,s as y,k as v,l as b,m as w,p as _,T as E,q as k,v as C,x,y as T,z as S,A as I,B as D,C as A,D as L,E as O,G as N,H as M,I as R}from"./vendor-DoUeycAh.js";function P({columns:t,columnWidth:e,emit:n,gap:i,items:r,maxColumns:s,minColumns:o,nextTick:a,onBeforeUnmount:c,onMounted:l,rtl:u,scrollContainer:h,ssrColumns:d,vue:f,wall:p,watch:g}){function m(t,e,n,i){const r=y(n);return i+e+r<=t?m(t,e,n+1,i+e+r):n}function y(t){const n=Array.isArray(e.value)?e.value:[e.value];return n[t%n.length]}function v(){const t=function(t){const e=null==o?void 0:o.value;return e&&t<e?e:t}(function(t){const e=null==s?void 0:s.value;return e&&t>e?e:t}(m(p.value.getBoundingClientRect().width,i.value,0,-i.value)));return t>0?t:1}if(d.value>0){const e=V(d.value);r.value.forEach(((t,n)=>e[n%d.value].push(n))),t.value=e}let b=0;async function w(e,n){if(e>=r.value.length||(await a(),b!==n))return;const i=[...p.value.children];u.value&&i.reverse();const s=i.reduce(((t,e)=>e.getBoundingClientRect().height<t.getBoundingClientRect().height?e:t));t.value[+s.dataset.index].push(e),await w(e+1,n)}async function _(e=!1){const i=v();if(t.value.length===i&&!e)return void n(2===f?"redraw-skip":"redrawSkip");t.value=V(i);const r=null==h?void 0:h.value,s=r?r.scrollTop:window.scrollY;await w(0,++b),r?r.scrollBy({top:s-r.scrollTop}):window.scrollTo({top:s}),n("redraw")}const E=typeof ResizeObserver>"u"?void 0:new ResizeObserver(function(t,e){let n;return(...i)=>{void 0!==n&&clearTimeout(n),n=setTimeout((()=>t(...i)),e)}}((()=>_())));return l((()=>{_(),null==E||E.observe(p.value)})),c((()=>null==E?void 0:E.unobserve(p.value))),g([r,u],(()=>_(!0))),g([e,i,o,s],(()=>_())),{getColumnWidthTarget:y}}function V(t){return Array.from({length:t}).map((()=>[]))}!function(){const t=document.createElement("link").relList;if(!(t&&t.supports&&t.supports("modulepreload"))){for(const t of document.querySelectorAll('link[rel="modulepreload"]'))e(t);new MutationObserver((t=>{for(const n of t)if("childList"===n.type)for(const t of n.addedNodes)"LINK"===t.tagName&&"modulepreload"===t.rel&&e(t)})).observe(document,{childList:!0,subtree:!0})}function e(t){if(t.ep)return;t.ep=!0;const e=function(t){const e={};return t.integrity&&(e.integrity=t.integrity),t.referrerPolicy&&(e.referrerPolicy=t.referrerPolicy),"use-credentials"===t.crossOrigin?e.credentials="include":"anonymous"===t.crossOrigin?e.credentials="omit":e.credentials="same-origin",e}(t);fetch(t.href,e)}}();const F=["data-index"],B=t({__name:"masonry-wall",props:{columnWidth:{default:400},items:{},gap:{default:0},rtl:{type:Boolean,default:!1},ssrColumns:{default:0},scrollContainer:{default:null},minColumns:{default:1},maxColumns:{},keyMapper:{}},emits:["redraw","redrawSkip"],setup(t,{emit:m}){const y=t,v=m,b=e([]),w=e(),{getColumnWidthTarget:_}=P({columns:b,emit:v,nextTick:d,onBeforeUnmount:f,onMounted:p,vue:3,wall:w,watch:g,...n(y)});return(t,e)=>(r(),i("div",{ref_key:"wall",ref:w,class:"masonry-wall",style:a({display:"flex",gap:`${t.gap}px`})},[(r(!0),i(s,null,o(b.value,((e,n)=>(r(),i("div",{key:n,class:"masonry-column","data-index":n,style:a({display:"flex","flex-basis":`${c(_)(n)}px`,"flex-direction":"column","flex-grow":1,gap:`${t.gap}px`,height:["-webkit-max-content","-moz-max-content","max-content"],"min-width":0})},[(r(!0),i(s,null,o(e,((e,s)=>{var o;return r(),i("div",{key:(null==(o=t.keyMapper)?void 0:o.call(t,t.items[e],n,s,e))??e,class:"masonry-item"},[l(t.$slots,"default",{item:t.items[e],column:n,row:s,index:e},(()=>[u(h(t.items[e]),1)]))])})),128))],12,F)))),128))],4))}}),j=(()=>{const t=B;return t.install=e=>{e.component("MasonryWall",t)},t})();
/*!
 * vuex v4.0.2
 * (c) 2021 Evan You
 * @license MIT
 */function U(t,e){Object.keys(t).forEach((function(n){return e(t[n],n)}))}function q(t){return null!==t&&"object"==typeof t}function H(t,e,n){return e.indexOf(t)<0&&(n&&n.prepend?e.unshift(t):e.push(t)),function(){var n=e.indexOf(t);n>-1&&e.splice(n,1)}}function z(t,e){t._actions=Object.create(null),t._mutations=Object.create(null),t._wrappedGetters=Object.create(null),t._modulesNamespaceMap=Object.create(null);var n=t.state;K(t,n,[],t._modules.root,!0),$(t,n,e)}function $(t,e,n){var i=t._state;t.getters={},t._makeLocalGettersCache=Object.create(null);var r=t._wrappedGetters,s={};U(r,(function(e,n){s[n]=function(t,e){return function(){return t(e)}}(e,t),Object.defineProperty(t.getters,n,{get:function(){return s[n]()},enumerable:!0})})),t._state=m({data:e}),t.strict&&function(t){g((function(){return t._state.data}),(function(){}),{deep:!0,flush:"sync"})}(t),i&&n&&t._withCommit((function(){i.data=null}))}function K(t,e,n,i,r){var s=!n.length,o=t._modules.getNamespace(n);if(i.namespaced&&(t._modulesNamespaceMap[o],t._modulesNamespaceMap[o]=i),!s&&!r){var a=W(e,n.slice(0,-1)),c=n[n.length-1];t._withCommit((function(){a[c]=i.state}))}var l=i.context=function(t,e,n){var i=""===e,r={dispatch:i?t.dispatch:function(n,i,r){var s=Q(n,i,r),o=s.payload,a=s.options,c=s.type;return a&&a.root||(c=e+c),t.dispatch(c,o)},commit:i?t.commit:function(n,i,r){var s=Q(n,i,r),o=s.payload,a=s.options,c=s.type;a&&a.root||(c=e+c),t.commit(c,o,a)}};return Object.defineProperties(r,{getters:{get:i?function(){return t.getters}:function(){return G(t,e)}},state:{get:function(){return W(t.state,n)}}}),r}(t,o,n);i.forEachMutation((function(e,n){!function(t,e,n,i){var r=t._mutations[e]||(t._mutations[e]=[]);r.push((function(e){n.call(t,i.state,e)}))}(t,o+n,e,l)})),i.forEachAction((function(e,n){var i=e.root?n:o+n,r=e.handler||e;!function(t,e,n,i){var r=t._actions[e]||(t._actions[e]=[]);r.push((function(e){var r,s=n.call(t,{dispatch:i.dispatch,commit:i.commit,getters:i.getters,state:i.state,rootGetters:t.getters,rootState:t.state},e);return(r=s)&&"function"==typeof r.then||(s=Promise.resolve(s)),t._devtoolHook?s.catch((function(e){throw t._devtoolHook.emit("vuex:error",e),e})):s}))}(t,i,r,l)})),i.forEachGetter((function(e,n){!function(t,e,n,i){if(t._wrappedGetters[e])return;t._wrappedGetters[e]=function(t){return n(i.state,i.getters,t.state,t.getters)}}(t,o+n,e,l)})),i.forEachChild((function(i,s){K(t,e,n.concat(s),i,r)}))}function G(t,e){if(!t._makeLocalGettersCache[e]){var n={},i=e.length;Object.keys(t.getters).forEach((function(r){if(r.slice(0,i)===e){var s=r.slice(i);Object.defineProperty(n,s,{get:function(){return t.getters[r]},enumerable:!0})}})),t._makeLocalGettersCache[e]=n}return t._makeLocalGettersCache[e]}function W(t,e){return e.reduce((function(t,e){return t[e]}),t)}function Q(t,e,n){return q(t)&&t.type&&(n=e,e=t,t=t.type),{type:t,payload:e,options:n}}var Y="vuex:mutations",X="vuex:actions",J="vuex",Z=0;function tt(t,e){y({id:"org.vuejs.vuex",app:t,label:"Vuex",homepage:"https://next.vuex.vuejs.org/",logo:"https://vuejs.org/images/icons/favicon-96x96.png",packageName:"vuex",componentStateTypes:["vuex bindings"]},(function(n){n.addTimelineLayer({id:Y,label:"Vuex Mutations",color:et}),n.addTimelineLayer({id:X,label:"Vuex Actions",color:et}),n.addInspector({id:J,label:"Vuex",icon:"storage",treeFilterPlaceholder:"Filter stores..."}),n.on.getInspectorTree((function(n){if(n.app===t&&n.inspectorId===J)if(n.filter){var i=[];st(i,e._modules.root,n.filter,""),n.rootNodes=i}else n.rootNodes=[rt(e._modules.root,"")]})),n.on.getInspectorState((function(n){if(n.app===t&&n.inspectorId===J){var i=n.nodeId;G(e,i),n.state=function(t,e,n){e="root"===n?e:e[n];var i=Object.keys(e),r={state:Object.keys(t.state).map((function(e){return{key:e,editable:!0,value:t.state[e]}}))};if(i.length){var s=function(t){var e={};return Object.keys(t).forEach((function(n){var i=n.split("/");if(i.length>1){var r=e,s=i.pop();i.forEach((function(t){r[t]||(r[t]={_custom:{value:{},display:t,tooltip:"Module",abstract:!0}}),r=r[t]._custom.value})),r[s]=ot((function(){return t[n]}))}else e[n]=ot((function(){return t[n]}))})),e}(e);r.getters=Object.keys(s).map((function(t){return{key:t.endsWith("/")?it(t):t,editable:!1,value:ot((function(){return s[t]}))}}))}return r}((r=e._modules,(o=(s=i).split("/").filter((function(t){return t}))).reduce((function(t,e,n){var i=t[e];if(!i)throw new Error('Missing module "'+e+'" for path "'+s+'".');return n===o.length-1?i:i._children}),"root"===s?r:r.root._children)),"root"===i?e.getters:e._makeLocalGettersCache,i)}var r,s,o})),n.on.editInspectorState((function(n){if(n.app===t&&n.inspectorId===J){var i=n.nodeId,r=n.path;"root"!==i&&(r=i.split("/").filter(Boolean).concat(r)),e._withCommit((function(){n.set(e._state.data,r,n.state.value)}))}})),e.subscribe((function(t,e){var i={};t.payload&&(i.payload=t.payload),i.state=e,n.notifyComponentUpdate(),n.sendInspectorTree(J),n.sendInspectorState(J),n.addTimelineEvent({layerId:Y,event:{time:Date.now(),title:t.type,data:i}})})),e.subscribeAction({before:function(t,e){var i={};t.payload&&(i.payload=t.payload),t._id=Z++,t._time=Date.now(),i.state=e,n.addTimelineEvent({layerId:X,event:{time:t._time,title:t.type,groupId:t._id,subtitle:"start",data:i}})},after:function(t,e){var i={},r=Date.now()-t._time;i.duration={_custom:{type:"duration",display:r+"ms",tooltip:"Action duration",value:r}},t.payload&&(i.payload=t.payload),i.state=e,n.addTimelineEvent({layerId:X,event:{time:Date.now(),title:t.type,groupId:t._id,subtitle:"end",data:i}})}})}))}var et=8702998,nt={label:"namespaced",textColor:16777215,backgroundColor:6710886};function it(t){return t&&"root"!==t?t.split("/").slice(-2,-1)[0]:"Root"}function rt(t,e){return{id:e||"root",label:it(e),tags:t.namespaced?[nt]:[],children:Object.keys(t._children).map((function(n){return rt(t._children[n],e+n+"/")}))}}function st(t,e,n,i){i.includes(n)&&t.push({id:i||"root",label:i.endsWith("/")?i.slice(0,i.length-1):i||"Root",tags:e.namespaced?[nt]:[]}),Object.keys(e._children).forEach((function(r){st(t,e._children[r],n,i+r+"/")}))}function ot(t){try{return t()}catch(e){return e}}var at=function(t,e){this.runtime=e,this._children=Object.create(null),this._rawModule=t;var n=t.state;this.state=("function"==typeof n?n():n)||{}},ct={namespaced:{configurable:!0}};ct.namespaced.get=function(){return!!this._rawModule.namespaced},at.prototype.addChild=function(t,e){this._children[t]=e},at.prototype.removeChild=function(t){delete this._children[t]},at.prototype.getChild=function(t){return this._children[t]},at.prototype.hasChild=function(t){return t in this._children},at.prototype.update=function(t){this._rawModule.namespaced=t.namespaced,t.actions&&(this._rawModule.actions=t.actions),t.mutations&&(this._rawModule.mutations=t.mutations),t.getters&&(this._rawModule.getters=t.getters)},at.prototype.forEachChild=function(t){U(this._children,t)},at.prototype.forEachGetter=function(t){this._rawModule.getters&&U(this._rawModule.getters,t)},at.prototype.forEachAction=function(t){this._rawModule.actions&&U(this._rawModule.actions,t)},at.prototype.forEachMutation=function(t){this._rawModule.mutations&&U(this._rawModule.mutations,t)},Object.defineProperties(at.prototype,ct);var lt=function(t){this.register([],t,!1)};function ut(t,e,n){if(e.update(n),n.modules)for(var i in n.modules){if(!e.getChild(i))return;ut(t.concat(i),e.getChild(i),n.modules[i])}}lt.prototype.get=function(t){return t.reduce((function(t,e){return t.getChild(e)}),this.root)},lt.prototype.getNamespace=function(t){var e=this.root;return t.reduce((function(t,n){return t+((e=e.getChild(n)).namespaced?n+"/":"")}),"")},lt.prototype.update=function(t){ut([],this.root,t)},lt.prototype.register=function(t,e,n){var i=this;void 0===n&&(n=!0);var r=new at(e,n);0===t.length?this.root=r:this.get(t.slice(0,-1)).addChild(t[t.length-1],r);e.modules&&U(e.modules,(function(e,r){i.register(t.concat(r),e,n)}))},lt.prototype.unregister=function(t){var e=this.get(t.slice(0,-1)),n=t[t.length-1],i=e.getChild(n);i&&i.runtime&&e.removeChild(n)},lt.prototype.isRegistered=function(t){var e=this.get(t.slice(0,-1)),n=t[t.length-1];return!!e&&e.hasChild(n)};var ht=function(t){var e=this;void 0===t&&(t={});var n=t.plugins;void 0===n&&(n=[]);var i=t.strict;void 0===i&&(i=!1);var r=t.devtools;this._committing=!1,this._actions=Object.create(null),this._actionSubscribers=[],this._mutations=Object.create(null),this._wrappedGetters=Object.create(null),this._modules=new lt(t),this._modulesNamespaceMap=Object.create(null),this._subscribers=[],this._makeLocalGettersCache=Object.create(null),this._devtools=r;var s=this,o=this.dispatch,a=this.commit;this.dispatch=function(t,e){return o.call(s,t,e)},this.commit=function(t,e,n){return a.call(s,t,e,n)},this.strict=i;var c=this._modules.root.state;K(this,c,[],this._modules.root),$(this,c),n.forEach((function(t){return t(e)}))},dt={state:{configurable:!0}};ht.prototype.install=function(t,e){t.provide(e||"store",this),t.config.globalProperties.$store=this,void 0!==this._devtools&&this._devtools&&tt(t,this)},dt.state.get=function(){return this._state.data},dt.state.set=function(t){},ht.prototype.commit=function(t,e,n){var i=this,r=Q(t,e,n),s=r.type,o=r.payload,a={type:s,payload:o},c=this._mutations[s];c&&(this._withCommit((function(){c.forEach((function(t){t(o)}))})),this._subscribers.slice().forEach((function(t){return t(a,i.state)})))},ht.prototype.dispatch=function(t,e){var n=this,i=Q(t,e),r=i.type,s=i.payload,o={type:r,payload:s},a=this._actions[r];if(a){try{this._actionSubscribers.slice().filter((function(t){return t.before})).forEach((function(t){return t.before(o,n.state)}))}catch(l){}var c=a.length>1?Promise.all(a.map((function(t){return t(s)}))):a[0](s);return new Promise((function(t,e){c.then((function(e){try{n._actionSubscribers.filter((function(t){return t.after})).forEach((function(t){return t.after(o,n.state)}))}catch(l){}t(e)}),(function(t){try{n._actionSubscribers.filter((function(t){return t.error})).forEach((function(e){return e.error(o,n.state,t)}))}catch(l){}e(t)}))}))}},ht.prototype.subscribe=function(t,e){return H(t,this._subscribers,e)},ht.prototype.subscribeAction=function(t,e){return H("function"==typeof t?{before:t}:t,this._actionSubscribers,e)},ht.prototype.watch=function(t,e,n){var i=this;return g((function(){return t(i.state,i.getters)}),e,Object.assign({},n))},ht.prototype.replaceState=function(t){var e=this;this._withCommit((function(){e._state.data=t}))},ht.prototype.registerModule=function(t,e,n){void 0===n&&(n={}),"string"==typeof t&&(t=[t]),this._modules.register(t,e),K(this,this.state,t,this._modules.get(t),n.preserveState),$(this,this.state)},ht.prototype.unregisterModule=function(t){var e=this;"string"==typeof t&&(t=[t]),this._modules.unregister(t),this._withCommit((function(){delete W(e.state,t.slice(0,-1))[t[t.length-1]]})),z(this)},ht.prototype.hasModule=function(t){return"string"==typeof t&&(t=[t]),this._modules.isRegistered(t)},ht.prototype.hotUpdate=function(t){this._modules.update(t),z(this,!0)},ht.prototype._withCommit=function(t){var e=this._committing;this._committing=!0,t(),this._committing=e},Object.defineProperties(ht.prototype,dt);var ft=yt((function(t,e){var n={};return mt(e).forEach((function(e){var i=e.key,r=e.val;n[i]=function(){var e=this.$store.state,n=this.$store.getters;if(t){var i=vt(this.$store,"mapState",t);if(!i)return;e=i.context.state,n=i.context.getters}return"function"==typeof r?r.call(this,e,n):e[r]},n[i].vuex=!0})),n})),pt=yt((function(t,e){var n={};return mt(e).forEach((function(e){var i=e.key,r=e.val;r=t+r,n[i]=function(){if(!t||vt(this.$store,"mapGetters",t))return this.$store.getters[r]},n[i].vuex=!0})),n})),gt=yt((function(t,e){var n={};return mt(e).forEach((function(e){var i=e.key,r=e.val;n[i]=function(){for(var e=[],n=arguments.length;n--;)e[n]=arguments[n];var i=this.$store.dispatch;if(t){var s=vt(this.$store,"mapActions",t);if(!s)return;i=s.context.dispatch}return"function"==typeof r?r.apply(this,[i].concat(e)):i.apply(this.$store,[r].concat(e))}})),n}));function mt(t){return function(t){return Array.isArray(t)||q(t)}(t)?Array.isArray(t)?t.map((function(t){return{key:t,val:t}})):Object.keys(t).map((function(e){return{key:e,val:t[e]}})):[]}function yt(t){return function(e,n){return"string"!=typeof e?(n=e,e=""):"/"!==e.charAt(e.length-1)&&(e+="/"),t(e,n)}}function vt(t,e,n){return t._modulesNamespaceMap[n]}var bt=function(){function t(t,e){void 0===e&&(e=[]),this._eventType=t,this._eventFunctions=e}return t.prototype.init=function(){var t=this;this._eventFunctions.forEach((function(e){"undefined"!=typeof window&&window.addEventListener(t._eventType,e)}))},t}(),wt=new(function(){function t(){this._instances={Accordion:{},Carousel:{},Collapse:{},Dial:{},Dismiss:{},Drawer:{},Dropdown:{},Modal:{},Popover:{},Tabs:{},Tooltip:{},InputCounter:{},CopyClipboard:{},Datepicker:{}}}return t.prototype.addInstance=function(t,e,n,i){if(void 0===i&&(i=!1),!this._instances[t])return!1;this._instances[t][n]&&!i||(i&&this._instances[t][n]&&this._instances[t][n].destroyAndRemoveInstance(),this._instances[t][n||this._generateRandomId()]=e)},t.prototype.getAllInstances=function(){return this._instances},t.prototype.getInstances=function(t){return!!this._instances[t]&&this._instances[t]},t.prototype.getInstance=function(t,e){if(this._componentAndInstanceCheck(t,e)&&this._instances[t][e])return this._instances[t][e]},t.prototype.destroyAndRemoveInstance=function(t,e){this._componentAndInstanceCheck(t,e)&&(this.destroyInstanceObject(t,e),this.removeInstance(t,e))},t.prototype.removeInstance=function(t,e){this._componentAndInstanceCheck(t,e)&&delete this._instances[t][e]},t.prototype.destroyInstanceObject=function(t,e){this._componentAndInstanceCheck(t,e)&&this._instances[t][e].destroy()},t.prototype.instanceExists=function(t,e){return!!this._instances[t]&&!!this._instances[t][e]},t.prototype._generateRandomId=function(){return Math.random().toString(36).substr(2,9)},t.prototype._componentAndInstanceCheck=function(t,e){return!!this._instances[t]&&!!this._instances[t][e]},t}());"undefined"!=typeof window&&(window.FlowbiteInstances=wt);var _t=function(){return _t=Object.assign||function(t){for(var e,n=1,i=arguments.length;n<i;n++)for(var r in e=arguments[n])Object.prototype.hasOwnProperty.call(e,r)&&(t[r]=e[r]);return t},_t.apply(this,arguments)},Et={alwaysOpen:!1,activeClasses:"bg-gray-100 dark:bg-gray-800 text-gray-900 dark:text-white",inactiveClasses:"text-gray-500 dark:text-gray-400",onOpen:function(){},onClose:function(){},onToggle:function(){}},kt={id:null,override:!0},Ct=function(){function t(t,e,n,i){void 0===t&&(t=null),void 0===e&&(e=[]),void 0===n&&(n=Et),void 0===i&&(i=kt),this._instanceId=i.id?i.id:t.id,this._accordionEl=t,this._items=e,this._options=_t(_t({},Et),n),this._initialized=!1,this.init(),wt.addInstance("Accordion",this,this._instanceId,i.override)}return t.prototype.init=function(){var t=this;this._items.length&&!this._initialized&&(this._items.forEach((function(e){e.active&&t.open(e.id);var n=function(){t.toggle(e.id)};e.triggerEl.addEventListener("click",n),e.clickHandler=n})),this._initialized=!0)},t.prototype.destroy=function(){this._items.length&&this._initialized&&(this._items.forEach((function(t){t.triggerEl.removeEventListener("click",t.clickHandler),delete t.clickHandler})),this._initialized=!1)},t.prototype.removeInstance=function(){wt.removeInstance("Accordion",this._instanceId)},t.prototype.destroyAndRemoveInstance=function(){this.destroy(),this.removeInstance()},t.prototype.getItem=function(t){return this._items.filter((function(e){return e.id===t}))[0]},t.prototype.open=function(t){var e,n,i=this,r=this.getItem(t);this._options.alwaysOpen||this._items.map((function(t){var e,n;t!==r&&((e=t.triggerEl.classList).remove.apply(e,i._options.activeClasses.split(" ")),(n=t.triggerEl.classList).add.apply(n,i._options.inactiveClasses.split(" ")),t.targetEl.classList.add("hidden"),t.triggerEl.setAttribute("aria-expanded","false"),t.active=!1,t.iconEl&&t.iconEl.classList.add("rotate-180"))})),(e=r.triggerEl.classList).add.apply(e,this._options.activeClasses.split(" ")),(n=r.triggerEl.classList).remove.apply(n,this._options.inactiveClasses.split(" ")),r.triggerEl.setAttribute("aria-expanded","true"),r.targetEl.classList.remove("hidden"),r.active=!0,r.iconEl&&r.iconEl.classList.remove("rotate-180"),this._options.onOpen(this,r)},t.prototype.toggle=function(t){var e=this.getItem(t);e.active?this.close(t):this.open(t),this._options.onToggle(this,e)},t.prototype.close=function(t){var e,n,i=this.getItem(t);(e=i.triggerEl.classList).remove.apply(e,this._options.activeClasses.split(" ")),(n=i.triggerEl.classList).add.apply(n,this._options.inactiveClasses.split(" ")),i.targetEl.classList.add("hidden"),i.triggerEl.setAttribute("aria-expanded","false"),i.active=!1,i.iconEl&&i.iconEl.classList.add("rotate-180"),this._options.onClose(this,i)},t.prototype.updateOnOpen=function(t){this._options.onOpen=t},t.prototype.updateOnClose=function(t){this._options.onClose=t},t.prototype.updateOnToggle=function(t){this._options.onToggle=t},t}();function xt(){document.querySelectorAll("[data-accordion]").forEach((function(t){var e=t.getAttribute("data-accordion"),n=t.getAttribute("data-active-classes"),i=t.getAttribute("data-inactive-classes"),r=[];t.querySelectorAll("[data-accordion-target]").forEach((function(e){if(e.closest("[data-accordion]")===t){var n={id:e.getAttribute("data-accordion-target"),triggerEl:e,targetEl:document.querySelector(e.getAttribute("data-accordion-target")),iconEl:e.querySelector("[data-accordion-icon]"),active:"true"===e.getAttribute("aria-expanded")};r.push(n)}})),new Ct(t,r,{alwaysOpen:"open"===e,activeClasses:n||Et.activeClasses,inactiveClasses:i||Et.inactiveClasses})}))}"undefined"!=typeof window&&(window.Accordion=Ct,window.initAccordions=xt);var Tt=function(){return Tt=Object.assign||function(t){for(var e,n=1,i=arguments.length;n<i;n++)for(var r in e=arguments[n])Object.prototype.hasOwnProperty.call(e,r)&&(t[r]=e[r]);return t},Tt.apply(this,arguments)},St={onCollapse:function(){},onExpand:function(){},onToggle:function(){}},It={id:null,override:!0},Dt=function(){function t(t,e,n,i){void 0===t&&(t=null),void 0===e&&(e=null),void 0===n&&(n=St),void 0===i&&(i=It),this._instanceId=i.id?i.id:t.id,this._targetEl=t,this._triggerEl=e,this._options=Tt(Tt({},St),n),this._visible=!1,this._initialized=!1,this.init(),wt.addInstance("Collapse",this,this._instanceId,i.override)}return t.prototype.init=function(){var t=this;this._triggerEl&&this._targetEl&&!this._initialized&&(this._triggerEl.hasAttribute("aria-expanded")?this._visible="true"===this._triggerEl.getAttribute("aria-expanded"):this._visible=!this._targetEl.classList.contains("hidden"),this._clickHandler=function(){t.toggle()},this._triggerEl.addEventListener("click",this._clickHandler),this._initialized=!0)},t.prototype.destroy=function(){this._triggerEl&&this._initialized&&(this._triggerEl.removeEventListener("click",this._clickHandler),this._initialized=!1)},t.prototype.removeInstance=function(){wt.removeInstance("Collapse",this._instanceId)},t.prototype.destroyAndRemoveInstance=function(){this.destroy(),this.removeInstance()},t.prototype.collapse=function(){this._targetEl.classList.add("hidden"),this._triggerEl&&this._triggerEl.setAttribute("aria-expanded","false"),this._visible=!1,this._options.onCollapse(this)},t.prototype.expand=function(){this._targetEl.classList.remove("hidden"),this._triggerEl&&this._triggerEl.setAttribute("aria-expanded","true"),this._visible=!0,this._options.onExpand(this)},t.prototype.toggle=function(){this._visible?this.collapse():this.expand(),this._options.onToggle(this)},t.prototype.updateOnCollapse=function(t){this._options.onCollapse=t},t.prototype.updateOnExpand=function(t){this._options.onExpand=t},t.prototype.updateOnToggle=function(t){this._options.onToggle=t},t}();function At(){document.querySelectorAll("[data-collapse-toggle]").forEach((function(t){var e=t.getAttribute("data-collapse-toggle"),n=document.getElementById(e);n&&(wt.instanceExists("Collapse",n.getAttribute("id"))?new Dt(n,t,{},{id:n.getAttribute("id")+"_"+wt._generateRandomId()}):new Dt(n,t))}))}"undefined"!=typeof window&&(window.Collapse=Dt,window.initCollapses=At);var Lt=function(){return Lt=Object.assign||function(t){for(var e,n=1,i=arguments.length;n<i;n++)for(var r in e=arguments[n])Object.prototype.hasOwnProperty.call(e,r)&&(t[r]=e[r]);return t},Lt.apply(this,arguments)},Ot={defaultPosition:0,indicators:{items:[],activeClasses:"bg-white dark:bg-gray-800",inactiveClasses:"bg-white/50 dark:bg-gray-800/50 hover:bg-white dark:hover:bg-gray-800"},interval:3e3,onNext:function(){},onPrev:function(){},onChange:function(){}},Nt={id:null,override:!0},Mt=function(){function t(t,e,n,i){void 0===t&&(t=null),void 0===e&&(e=[]),void 0===n&&(n=Ot),void 0===i&&(i=Nt),this._instanceId=i.id?i.id:t.id,this._carouselEl=t,this._items=e,this._options=Lt(Lt(Lt({},Ot),n),{indicators:Lt(Lt({},Ot.indicators),n.indicators)}),this._activeItem=this.getItem(this._options.defaultPosition),this._indicators=this._options.indicators.items,this._intervalDuration=this._options.interval,this._intervalInstance=null,this._initialized=!1,this.init(),wt.addInstance("Carousel",this,this._instanceId,i.override)}return t.prototype.init=function(){var t=this;this._items.length&&!this._initialized&&(this._items.map((function(t){t.el.classList.add("absolute","inset-0","transition-transform","transform")})),this.getActiveItem()?this.slideTo(this.getActiveItem().position):this.slideTo(0),this._indicators.map((function(e,n){e.el.addEventListener("click",(function(){t.slideTo(n)}))})),this._initialized=!0)},t.prototype.destroy=function(){this._initialized&&(this._initialized=!1)},t.prototype.removeInstance=function(){wt.removeInstance("Carousel",this._instanceId)},t.prototype.destroyAndRemoveInstance=function(){this.destroy(),this.removeInstance()},t.prototype.getItem=function(t){return this._items[t]},t.prototype.slideTo=function(t){var e=this._items[t],n={left:0===e.position?this._items[this._items.length-1]:this._items[e.position-1],middle:e,right:e.position===this._items.length-1?this._items[0]:this._items[e.position+1]};this._rotate(n),this._setActiveItem(e),this._intervalInstance&&(this.pause(),this.cycle()),this._options.onChange(this)},t.prototype.next=function(){var t=this.getActiveItem(),e=null;e=t.position===this._items.length-1?this._items[0]:this._items[t.position+1],this.slideTo(e.position),this._options.onNext(this)},t.prototype.prev=function(){var t=this.getActiveItem(),e=null;e=0===t.position?this._items[this._items.length-1]:this._items[t.position-1],this.slideTo(e.position),this._options.onPrev(this)},t.prototype._rotate=function(t){if(this._items.map((function(t){t.el.classList.add("hidden")})),1===this._items.length)return t.middle.el.classList.remove("-translate-x-full","translate-x-full","translate-x-0","hidden","z-10"),void t.middle.el.classList.add("translate-x-0","z-20");t.left.el.classList.remove("-translate-x-full","translate-x-full","translate-x-0","hidden","z-20"),t.left.el.classList.add("-translate-x-full","z-10"),t.middle.el.classList.remove("-translate-x-full","translate-x-full","translate-x-0","hidden","z-10"),t.middle.el.classList.add("translate-x-0","z-30"),t.right.el.classList.remove("-translate-x-full","translate-x-full","translate-x-0","hidden","z-30"),t.right.el.classList.add("translate-x-full","z-20")},t.prototype.cycle=function(){var t=this;"undefined"!=typeof window&&(this._intervalInstance=window.setInterval((function(){t.next()}),this._intervalDuration))},t.prototype.pause=function(){clearInterval(this._intervalInstance)},t.prototype.getActiveItem=function(){return this._activeItem},t.prototype._setActiveItem=function(t){var e,n,i=this;this._activeItem=t;var r=t.position;this._indicators.length&&(this._indicators.map((function(t){var e,n;t.el.setAttribute("aria-current","false"),(e=t.el.classList).remove.apply(e,i._options.indicators.activeClasses.split(" ")),(n=t.el.classList).add.apply(n,i._options.indicators.inactiveClasses.split(" "))})),(e=this._indicators[r].el.classList).add.apply(e,this._options.indicators.activeClasses.split(" ")),(n=this._indicators[r].el.classList).remove.apply(n,this._options.indicators.inactiveClasses.split(" ")),this._indicators[r].el.setAttribute("aria-current","true"))},t.prototype.updateOnNext=function(t){this._options.onNext=t},t.prototype.updateOnPrev=function(t){this._options.onPrev=t},t.prototype.updateOnChange=function(t){this._options.onChange=t},t}();function Rt(){document.querySelectorAll("[data-carousel]").forEach((function(t){var e=t.getAttribute("data-carousel-interval"),n="slide"===t.getAttribute("data-carousel"),i=[],r=0;t.querySelectorAll("[data-carousel-item]").length&&Array.from(t.querySelectorAll("[data-carousel-item]")).map((function(t,e){i.push({position:e,el:t}),"active"===t.getAttribute("data-carousel-item")&&(r=e)}));var s=[];t.querySelectorAll("[data-carousel-slide-to]").length&&Array.from(t.querySelectorAll("[data-carousel-slide-to]")).map((function(t){s.push({position:parseInt(t.getAttribute("data-carousel-slide-to")),el:t})}));var o=new Mt(t,i,{defaultPosition:r,indicators:{items:s},interval:e||Ot.interval});n&&o.cycle();var a=t.querySelector("[data-carousel-next]"),c=t.querySelector("[data-carousel-prev]");a&&a.addEventListener("click",(function(){o.next()})),c&&c.addEventListener("click",(function(){o.prev()}))}))}"undefined"!=typeof window&&(window.Carousel=Mt,window.initCarousels=Rt);var Pt=function(){return Pt=Object.assign||function(t){for(var e,n=1,i=arguments.length;n<i;n++)for(var r in e=arguments[n])Object.prototype.hasOwnProperty.call(e,r)&&(t[r]=e[r]);return t},Pt.apply(this,arguments)},Vt={transition:"transition-opacity",duration:300,timing:"ease-out",onHide:function(){}},Ft={id:null,override:!0},Bt=function(){function t(t,e,n,i){void 0===t&&(t=null),void 0===e&&(e=null),void 0===n&&(n=Vt),void 0===i&&(i=Ft),this._instanceId=i.id?i.id:t.id,this._targetEl=t,this._triggerEl=e,this._options=Pt(Pt({},Vt),n),this._initialized=!1,this.init(),wt.addInstance("Dismiss",this,this._instanceId,i.override)}return t.prototype.init=function(){var t=this;this._triggerEl&&this._targetEl&&!this._initialized&&(this._clickHandler=function(){t.hide()},this._triggerEl.addEventListener("click",this._clickHandler),this._initialized=!0)},t.prototype.destroy=function(){this._triggerEl&&this._initialized&&(this._triggerEl.removeEventListener("click",this._clickHandler),this._initialized=!1)},t.prototype.removeInstance=function(){wt.removeInstance("Dismiss",this._instanceId)},t.prototype.destroyAndRemoveInstance=function(){this.destroy(),this.removeInstance()},t.prototype.hide=function(){var t=this;this._targetEl.classList.add(this._options.transition,"duration-".concat(this._options.duration),this._options.timing,"opacity-0"),setTimeout((function(){t._targetEl.classList.add("hidden")}),this._options.duration),this._options.onHide(this,this._targetEl)},t.prototype.updateOnHide=function(t){this._options.onHide=t},t}();function jt(){document.querySelectorAll("[data-dismiss-target]").forEach((function(t){var e=t.getAttribute("data-dismiss-target"),n=document.querySelector(e);n&&new Bt(n,t)}))}"undefined"!=typeof window&&(window.Dismiss=Bt,window.initDismisses=jt);var Ut="top",qt="bottom",Ht="right",zt="left",$t="auto",Kt=[Ut,qt,Ht,zt],Gt="start",Wt="end",Qt="viewport",Yt="popper",Xt=Kt.reduce((function(t,e){return t.concat([e+"-"+Gt,e+"-"+Wt])}),[]),Jt=[].concat(Kt,[$t]).reduce((function(t,e){return t.concat([e,e+"-"+Gt,e+"-"+Wt])}),[]),Zt=["beforeRead","read","afterRead","beforeMain","main","afterMain","beforeWrite","write","afterWrite"];function te(t){return t?(t.nodeName||"").toLowerCase():null}function ee(t){if(null==t)return window;if("[object Window]"!==t.toString()){var e=t.ownerDocument;return e&&e.defaultView||window}return t}function ne(t){return t instanceof ee(t).Element||t instanceof Element}function ie(t){return t instanceof ee(t).HTMLElement||t instanceof HTMLElement}function re(t){return"undefined"!=typeof ShadowRoot&&(t instanceof ee(t).ShadowRoot||t instanceof ShadowRoot)}const se={name:"applyStyles",enabled:!0,phase:"write",fn:function(t){var e=t.state;Object.keys(e.elements).forEach((function(t){var n=e.styles[t]||{},i=e.attributes[t]||{},r=e.elements[t];ie(r)&&te(r)&&(Object.assign(r.style,n),Object.keys(i).forEach((function(t){var e=i[t];!1===e?r.removeAttribute(t):r.setAttribute(t,!0===e?"":e)})))}))},effect:function(t){var e=t.state,n={popper:{position:e.options.strategy,left:"0",top:"0",margin:"0"},arrow:{position:"absolute"},reference:{}};return Object.assign(e.elements.popper.style,n.popper),e.styles=n,e.elements.arrow&&Object.assign(e.elements.arrow.style,n.arrow),function(){Object.keys(e.elements).forEach((function(t){var i=e.elements[t],r=e.attributes[t]||{},s=Object.keys(e.styles.hasOwnProperty(t)?e.styles[t]:n[t]).reduce((function(t,e){return t[e]="",t}),{});ie(i)&&te(i)&&(Object.assign(i.style,s),Object.keys(r).forEach((function(t){i.removeAttribute(t)})))}))}},requires:["computeStyles"]};function oe(t){return t.split("-")[0]}var ae=Math.max,ce=Math.min,le=Math.round;function ue(){var t=navigator.userAgentData;return null!=t&&t.brands&&Array.isArray(t.brands)?t.brands.map((function(t){return t.brand+"/"+t.version})).join(" "):navigator.userAgent}function he(){return!/^((?!chrome|android).)*safari/i.test(ue())}function de(t,e,n){void 0===e&&(e=!1),void 0===n&&(n=!1);var i=t.getBoundingClientRect(),r=1,s=1;e&&ie(t)&&(r=t.offsetWidth>0&&le(i.width)/t.offsetWidth||1,s=t.offsetHeight>0&&le(i.height)/t.offsetHeight||1);var o=(ne(t)?ee(t):window).visualViewport,a=!he()&&n,c=(i.left+(a&&o?o.offsetLeft:0))/r,l=(i.top+(a&&o?o.offsetTop:0))/s,u=i.width/r,h=i.height/s;return{width:u,height:h,top:l,right:c+u,bottom:l+h,left:c,x:c,y:l}}function fe(t){var e=de(t),n=t.offsetWidth,i=t.offsetHeight;return Math.abs(e.width-n)<=1&&(n=e.width),Math.abs(e.height-i)<=1&&(i=e.height),{x:t.offsetLeft,y:t.offsetTop,width:n,height:i}}function pe(t,e){var n=e.getRootNode&&e.getRootNode();if(t.contains(e))return!0;if(n&&re(n)){var i=e;do{if(i&&t.isSameNode(i))return!0;i=i.parentNode||i.host}while(i)}return!1}function ge(t){return ee(t).getComputedStyle(t)}function me(t){return["table","td","th"].indexOf(te(t))>=0}function ye(t){return((ne(t)?t.ownerDocument:t.document)||window.document).documentElement}function ve(t){return"html"===te(t)?t:t.assignedSlot||t.parentNode||(re(t)?t.host:null)||ye(t)}function be(t){return ie(t)&&"fixed"!==ge(t).position?t.offsetParent:null}function we(t){for(var e=ee(t),n=be(t);n&&me(n)&&"static"===ge(n).position;)n=be(n);return n&&("html"===te(n)||"body"===te(n)&&"static"===ge(n).position)?e:n||function(t){var e=/firefox/i.test(ue());if(/Trident/i.test(ue())&&ie(t)&&"fixed"===ge(t).position)return null;var n=ve(t);for(re(n)&&(n=n.host);ie(n)&&["html","body"].indexOf(te(n))<0;){var i=ge(n);if("none"!==i.transform||"none"!==i.perspective||"paint"===i.contain||-1!==["transform","perspective"].indexOf(i.willChange)||e&&"filter"===i.willChange||e&&i.filter&&"none"!==i.filter)return n;n=n.parentNode}return null}(t)||e}function _e(t){return["top","bottom"].indexOf(t)>=0?"x":"y"}function Ee(t,e,n){return ae(t,ce(e,n))}function ke(t){return Object.assign({},{top:0,right:0,bottom:0,left:0},t)}function Ce(t,e){return e.reduce((function(e,n){return e[n]=t,e}),{})}const xe={name:"arrow",enabled:!0,phase:"main",fn:function(t){var e,n=t.state,i=t.name,r=t.options,s=n.elements.arrow,o=n.modifiersData.popperOffsets,a=oe(n.placement),c=_e(a),l=[zt,Ht].indexOf(a)>=0?"height":"width";if(s&&o){var u=function(t,e){return ke("number"!=typeof(t="function"==typeof t?t(Object.assign({},e.rects,{placement:e.placement})):t)?t:Ce(t,Kt))}(r.padding,n),h=fe(s),d="y"===c?Ut:zt,f="y"===c?qt:Ht,p=n.rects.reference[l]+n.rects.reference[c]-o[c]-n.rects.popper[l],g=o[c]-n.rects.reference[c],m=we(s),y=m?"y"===c?m.clientHeight||0:m.clientWidth||0:0,v=p/2-g/2,b=u[d],w=y-h[l]-u[f],_=y/2-h[l]/2+v,E=Ee(b,_,w),k=c;n.modifiersData[i]=((e={})[k]=E,e.centerOffset=E-_,e)}},effect:function(t){var e=t.state,n=t.options.element,i=void 0===n?"[data-popper-arrow]":n;null!=i&&("string"!=typeof i||(i=e.elements.popper.querySelector(i)))&&pe(e.elements.popper,i)&&(e.elements.arrow=i)},requires:["popperOffsets"],requiresIfExists:["preventOverflow"]};function Te(t){return t.split("-")[1]}var Se={top:"auto",right:"auto",bottom:"auto",left:"auto"};function Ie(t){var e,n=t.popper,i=t.popperRect,r=t.placement,s=t.variation,o=t.offsets,a=t.position,c=t.gpuAcceleration,l=t.adaptive,u=t.roundOffsets,h=t.isFixed,d=o.x,f=void 0===d?0:d,p=o.y,g=void 0===p?0:p,m="function"==typeof u?u({x:f,y:g}):{x:f,y:g};f=m.x,g=m.y;var y=o.hasOwnProperty("x"),v=o.hasOwnProperty("y"),b=zt,w=Ut,_=window;if(l){var E=we(n),k="clientHeight",C="clientWidth";if(E===ee(n)&&"static"!==ge(E=ye(n)).position&&"absolute"===a&&(k="scrollHeight",C="scrollWidth"),r===Ut||(r===zt||r===Ht)&&s===Wt)w=qt,g-=(h&&E===_&&_.visualViewport?_.visualViewport.height:E[k])-i.height,g*=c?1:-1;if(r===zt||(r===Ut||r===qt)&&s===Wt)b=Ht,f-=(h&&E===_&&_.visualViewport?_.visualViewport.width:E[C])-i.width,f*=c?1:-1}var x,T=Object.assign({position:a},l&&Se),S=!0===u?function(t,e){var n=t.x,i=t.y,r=e.devicePixelRatio||1;return{x:le(n*r)/r||0,y:le(i*r)/r||0}}({x:f,y:g},ee(n)):{x:f,y:g};return f=S.x,g=S.y,c?Object.assign({},T,((x={})[w]=v?"0":"",x[b]=y?"0":"",x.transform=(_.devicePixelRatio||1)<=1?"translate("+f+"px, "+g+"px)":"translate3d("+f+"px, "+g+"px, 0)",x)):Object.assign({},T,((e={})[w]=v?g+"px":"",e[b]=y?f+"px":"",e.transform="",e))}const De={name:"computeStyles",enabled:!0,phase:"beforeWrite",fn:function(t){var e=t.state,n=t.options,i=n.gpuAcceleration,r=void 0===i||i,s=n.adaptive,o=void 0===s||s,a=n.roundOffsets,c=void 0===a||a,l={placement:oe(e.placement),variation:Te(e.placement),popper:e.elements.popper,popperRect:e.rects.popper,gpuAcceleration:r,isFixed:"fixed"===e.options.strategy};null!=e.modifiersData.popperOffsets&&(e.styles.popper=Object.assign({},e.styles.popper,Ie(Object.assign({},l,{offsets:e.modifiersData.popperOffsets,position:e.options.strategy,adaptive:o,roundOffsets:c})))),null!=e.modifiersData.arrow&&(e.styles.arrow=Object.assign({},e.styles.arrow,Ie(Object.assign({},l,{offsets:e.modifiersData.arrow,position:"absolute",adaptive:!1,roundOffsets:c})))),e.attributes.popper=Object.assign({},e.attributes.popper,{"data-popper-placement":e.placement})},data:{}};var Ae={passive:!0};const Le={name:"eventListeners",enabled:!0,phase:"write",fn:function(){},effect:function(t){var e=t.state,n=t.instance,i=t.options,r=i.scroll,s=void 0===r||r,o=i.resize,a=void 0===o||o,c=ee(e.elements.popper),l=[].concat(e.scrollParents.reference,e.scrollParents.popper);return s&&l.forEach((function(t){t.addEventListener("scroll",n.update,Ae)})),a&&c.addEventListener("resize",n.update,Ae),function(){s&&l.forEach((function(t){t.removeEventListener("scroll",n.update,Ae)})),a&&c.removeEventListener("resize",n.update,Ae)}},data:{}};var Oe={left:"right",right:"left",bottom:"top",top:"bottom"};function Ne(t){return t.replace(/left|right|bottom|top/g,(function(t){return Oe[t]}))}var Me={start:"end",end:"start"};function Re(t){return t.replace(/start|end/g,(function(t){return Me[t]}))}function Pe(t){var e=ee(t);return{scrollLeft:e.pageXOffset,scrollTop:e.pageYOffset}}function Ve(t){return de(ye(t)).left+Pe(t).scrollLeft}function Fe(t){var e=ge(t),n=e.overflow,i=e.overflowX,r=e.overflowY;return/auto|scroll|overlay|hidden/.test(n+r+i)}function Be(t){return["html","body","#document"].indexOf(te(t))>=0?t.ownerDocument.body:ie(t)&&Fe(t)?t:Be(ve(t))}function je(t,e){var n;void 0===e&&(e=[]);var i=Be(t),r=i===(null==(n=t.ownerDocument)?void 0:n.body),s=ee(i),o=r?[s].concat(s.visualViewport||[],Fe(i)?i:[]):i,a=e.concat(o);return r?a:a.concat(je(ve(o)))}function Ue(t){return Object.assign({},t,{left:t.x,top:t.y,right:t.x+t.width,bottom:t.y+t.height})}function qe(t,e,n){return e===Qt?Ue(function(t,e){var n=ee(t),i=ye(t),r=n.visualViewport,s=i.clientWidth,o=i.clientHeight,a=0,c=0;if(r){s=r.width,o=r.height;var l=he();(l||!l&&"fixed"===e)&&(a=r.offsetLeft,c=r.offsetTop)}return{width:s,height:o,x:a+Ve(t),y:c}}(t,n)):ne(e)?function(t,e){var n=de(t,!1,"fixed"===e);return n.top=n.top+t.clientTop,n.left=n.left+t.clientLeft,n.bottom=n.top+t.clientHeight,n.right=n.left+t.clientWidth,n.width=t.clientWidth,n.height=t.clientHeight,n.x=n.left,n.y=n.top,n}(e,n):Ue(function(t){var e,n=ye(t),i=Pe(t),r=null==(e=t.ownerDocument)?void 0:e.body,s=ae(n.scrollWidth,n.clientWidth,r?r.scrollWidth:0,r?r.clientWidth:0),o=ae(n.scrollHeight,n.clientHeight,r?r.scrollHeight:0,r?r.clientHeight:0),a=-i.scrollLeft+Ve(t),c=-i.scrollTop;return"rtl"===ge(r||n).direction&&(a+=ae(n.clientWidth,r?r.clientWidth:0)-s),{width:s,height:o,x:a,y:c}}(ye(t)))}function He(t,e,n,i){var r="clippingParents"===e?function(t){var e=je(ve(t)),n=["absolute","fixed"].indexOf(ge(t).position)>=0&&ie(t)?we(t):t;return ne(n)?e.filter((function(t){return ne(t)&&pe(t,n)&&"body"!==te(t)})):[]}(t):[].concat(e),s=[].concat(r,[n]),o=s[0],a=s.reduce((function(e,n){var r=qe(t,n,i);return e.top=ae(r.top,e.top),e.right=ce(r.right,e.right),e.bottom=ce(r.bottom,e.bottom),e.left=ae(r.left,e.left),e}),qe(t,o,i));return a.width=a.right-a.left,a.height=a.bottom-a.top,a.x=a.left,a.y=a.top,a}function ze(t){var e,n=t.reference,i=t.element,r=t.placement,s=r?oe(r):null,o=r?Te(r):null,a=n.x+n.width/2-i.width/2,c=n.y+n.height/2-i.height/2;switch(s){case Ut:e={x:a,y:n.y-i.height};break;case qt:e={x:a,y:n.y+n.height};break;case Ht:e={x:n.x+n.width,y:c};break;case zt:e={x:n.x-i.width,y:c};break;default:e={x:n.x,y:n.y}}var l=s?_e(s):null;if(null!=l){var u="y"===l?"height":"width";switch(o){case Gt:e[l]=e[l]-(n[u]/2-i[u]/2);break;case Wt:e[l]=e[l]+(n[u]/2-i[u]/2)}}return e}function $e(t,e){void 0===e&&(e={});var n=e,i=n.placement,r=void 0===i?t.placement:i,s=n.strategy,o=void 0===s?t.strategy:s,a=n.boundary,c=void 0===a?"clippingParents":a,l=n.rootBoundary,u=void 0===l?Qt:l,h=n.elementContext,d=void 0===h?Yt:h,f=n.altBoundary,p=void 0!==f&&f,g=n.padding,m=void 0===g?0:g,y=ke("number"!=typeof m?m:Ce(m,Kt)),v=d===Yt?"reference":Yt,b=t.rects.popper,w=t.elements[p?v:d],_=He(ne(w)?w:w.contextElement||ye(t.elements.popper),c,u,o),E=de(t.elements.reference),k=ze({reference:E,element:b,placement:r}),C=Ue(Object.assign({},b,k)),x=d===Yt?C:E,T={top:_.top-x.top+y.top,bottom:x.bottom-_.bottom+y.bottom,left:_.left-x.left+y.left,right:x.right-_.right+y.right},S=t.modifiersData.offset;if(d===Yt&&S){var I=S[r];Object.keys(T).forEach((function(t){var e=[Ht,qt].indexOf(t)>=0?1:-1,n=[Ut,qt].indexOf(t)>=0?"y":"x";T[t]+=I[n]*e}))}return T}const Ke={name:"flip",enabled:!0,phase:"main",fn:function(t){var e=t.state,n=t.options,i=t.name;if(!e.modifiersData[i]._skip){for(var r=n.mainAxis,s=void 0===r||r,o=n.altAxis,a=void 0===o||o,c=n.fallbackPlacements,l=n.padding,u=n.boundary,h=n.rootBoundary,d=n.altBoundary,f=n.flipVariations,p=void 0===f||f,g=n.allowedAutoPlacements,m=e.options.placement,y=oe(m),v=c||(y===m||!p?[Ne(m)]:function(t){if(oe(t)===$t)return[];var e=Ne(t);return[Re(t),e,Re(e)]}(m)),b=[m].concat(v).reduce((function(t,n){return t.concat(oe(n)===$t?function(t,e){void 0===e&&(e={});var n=e,i=n.placement,r=n.boundary,s=n.rootBoundary,o=n.padding,a=n.flipVariations,c=n.allowedAutoPlacements,l=void 0===c?Jt:c,u=Te(i),h=u?a?Xt:Xt.filter((function(t){return Te(t)===u})):Kt,d=h.filter((function(t){return l.indexOf(t)>=0}));0===d.length&&(d=h);var f=d.reduce((function(e,n){return e[n]=$e(t,{placement:n,boundary:r,rootBoundary:s,padding:o})[oe(n)],e}),{});return Object.keys(f).sort((function(t,e){return f[t]-f[e]}))}(e,{placement:n,boundary:u,rootBoundary:h,padding:l,flipVariations:p,allowedAutoPlacements:g}):n)}),[]),w=e.rects.reference,_=e.rects.popper,E=new Map,k=!0,C=b[0],x=0;x<b.length;x++){var T=b[x],S=oe(T),I=Te(T)===Gt,D=[Ut,qt].indexOf(S)>=0,A=D?"width":"height",L=$e(e,{placement:T,boundary:u,rootBoundary:h,altBoundary:d,padding:l}),O=D?I?Ht:zt:I?qt:Ut;w[A]>_[A]&&(O=Ne(O));var N=Ne(O),M=[];if(s&&M.push(L[S]<=0),a&&M.push(L[O]<=0,L[N]<=0),M.every((function(t){return t}))){C=T,k=!1;break}E.set(T,M)}if(k)for(var R=function(t){var e=b.find((function(e){var n=E.get(e);if(n)return n.slice(0,t).every((function(t){return t}))}));if(e)return C=e,"break"},P=p?3:1;P>0;P--){if("break"===R(P))break}e.placement!==C&&(e.modifiersData[i]._skip=!0,e.placement=C,e.reset=!0)}},requiresIfExists:["offset"],data:{_skip:!1}};function Ge(t,e,n){return void 0===n&&(n={x:0,y:0}),{top:t.top-e.height-n.y,right:t.right-e.width+n.x,bottom:t.bottom-e.height+n.y,left:t.left-e.width-n.x}}function We(t){return[Ut,Ht,qt,zt].some((function(e){return t[e]>=0}))}const Qe={name:"offset",enabled:!0,phase:"main",requires:["popperOffsets"],fn:function(t){var e=t.state,n=t.options,i=t.name,r=n.offset,s=void 0===r?[0,0]:r,o=Jt.reduce((function(t,n){return t[n]=function(t,e,n){var i=oe(t),r=[zt,Ut].indexOf(i)>=0?-1:1,s="function"==typeof n?n(Object.assign({},e,{placement:t})):n,o=s[0],a=s[1];return o=o||0,a=(a||0)*r,[zt,Ht].indexOf(i)>=0?{x:a,y:o}:{x:o,y:a}}(n,e.rects,s),t}),{}),a=o[e.placement],c=a.x,l=a.y;null!=e.modifiersData.popperOffsets&&(e.modifiersData.popperOffsets.x+=c,e.modifiersData.popperOffsets.y+=l),e.modifiersData[i]=o}};const Ye={name:"preventOverflow",enabled:!0,phase:"main",fn:function(t){var e=t.state,n=t.options,i=t.name,r=n.mainAxis,s=void 0===r||r,o=n.altAxis,a=void 0!==o&&o,c=n.boundary,l=n.rootBoundary,u=n.altBoundary,h=n.padding,d=n.tether,f=void 0===d||d,p=n.tetherOffset,g=void 0===p?0:p,m=$e(e,{boundary:c,rootBoundary:l,padding:h,altBoundary:u}),y=oe(e.placement),v=Te(e.placement),b=!v,w=_e(y),_="x"===w?"y":"x",E=e.modifiersData.popperOffsets,k=e.rects.reference,C=e.rects.popper,x="function"==typeof g?g(Object.assign({},e.rects,{placement:e.placement})):g,T="number"==typeof x?{mainAxis:x,altAxis:x}:Object.assign({mainAxis:0,altAxis:0},x),S=e.modifiersData.offset?e.modifiersData.offset[e.placement]:null,I={x:0,y:0};if(E){if(s){var D,A="y"===w?Ut:zt,L="y"===w?qt:Ht,O="y"===w?"height":"width",N=E[w],M=N+m[A],R=N-m[L],P=f?-C[O]/2:0,V=v===Gt?k[O]:C[O],F=v===Gt?-C[O]:-k[O],B=e.elements.arrow,j=f&&B?fe(B):{width:0,height:0},U=e.modifiersData["arrow#persistent"]?e.modifiersData["arrow#persistent"].padding:{top:0,right:0,bottom:0,left:0},q=U[A],H=U[L],z=Ee(0,k[O],j[O]),$=b?k[O]/2-P-z-q-T.mainAxis:V-z-q-T.mainAxis,K=b?-k[O]/2+P+z+H+T.mainAxis:F+z+H+T.mainAxis,G=e.elements.arrow&&we(e.elements.arrow),W=G?"y"===w?G.clientTop||0:G.clientLeft||0:0,Q=null!=(D=null==S?void 0:S[w])?D:0,Y=N+K-Q,X=Ee(f?ce(M,N+$-Q-W):M,N,f?ae(R,Y):R);E[w]=X,I[w]=X-N}if(a){var J,Z="x"===w?Ut:zt,tt="x"===w?qt:Ht,et=E[_],nt="y"===_?"height":"width",it=et+m[Z],rt=et-m[tt],st=-1!==[Ut,zt].indexOf(y),ot=null!=(J=null==S?void 0:S[_])?J:0,at=st?it:et-k[nt]-C[nt]-ot+T.altAxis,ct=st?et+k[nt]+C[nt]-ot-T.altAxis:rt,lt=f&&st?(ht=Ee(at,et,ut=ct))>ut?ut:ht:Ee(f?at:it,et,f?ct:rt);E[_]=lt,I[_]=lt-et}var ut,ht;e.modifiersData[i]=I}},requiresIfExists:["offset"]};function Xe(t,e,n){void 0===n&&(n=!1);var i,r,s=ie(e),o=ie(e)&&function(t){var e=t.getBoundingClientRect(),n=le(e.width)/t.offsetWidth||1,i=le(e.height)/t.offsetHeight||1;return 1!==n||1!==i}(e),a=ye(e),c=de(t,o,n),l={scrollLeft:0,scrollTop:0},u={x:0,y:0};return(s||!s&&!n)&&(("body"!==te(e)||Fe(a))&&(l=(i=e)!==ee(i)&&ie(i)?{scrollLeft:(r=i).scrollLeft,scrollTop:r.scrollTop}:Pe(i)),ie(e)?((u=de(e,!0)).x+=e.clientLeft,u.y+=e.clientTop):a&&(u.x=Ve(a))),{x:c.left+l.scrollLeft-u.x,y:c.top+l.scrollTop-u.y,width:c.width,height:c.height}}function Je(t){var e=new Map,n=new Set,i=[];function r(t){n.add(t.name),[].concat(t.requires||[],t.requiresIfExists||[]).forEach((function(t){if(!n.has(t)){var i=e.get(t);i&&r(i)}})),i.push(t)}return t.forEach((function(t){e.set(t.name,t)})),t.forEach((function(t){n.has(t.name)||r(t)})),i}var Ze={placement:"bottom",modifiers:[],strategy:"absolute"};function tn(){for(var t=arguments.length,e=new Array(t),n=0;n<t;n++)e[n]=arguments[n];return!e.some((function(t){return!(t&&"function"==typeof t.getBoundingClientRect)}))}function en(t){void 0===t&&(t={});var e=t,n=e.defaultModifiers,i=void 0===n?[]:n,r=e.defaultOptions,s=void 0===r?Ze:r;return function(t,e,n){void 0===n&&(n=s);var r,o,a={placement:"bottom",orderedModifiers:[],options:Object.assign({},Ze,s),modifiersData:{},elements:{reference:t,popper:e},attributes:{},styles:{}},c=[],l=!1,u={state:a,setOptions:function(n){var r="function"==typeof n?n(a.options):n;h(),a.options=Object.assign({},s,a.options,r),a.scrollParents={reference:ne(t)?je(t):t.contextElement?je(t.contextElement):[],popper:je(e)};var o,l,d=function(t){var e=Je(t);return Zt.reduce((function(t,n){return t.concat(e.filter((function(t){return t.phase===n})))}),[])}((o=[].concat(i,a.options.modifiers),l=o.reduce((function(t,e){var n=t[e.name];return t[e.name]=n?Object.assign({},n,e,{options:Object.assign({},n.options,e.options),data:Object.assign({},n.data,e.data)}):e,t}),{}),Object.keys(l).map((function(t){return l[t]}))));return a.orderedModifiers=d.filter((function(t){return t.enabled})),a.orderedModifiers.forEach((function(t){var e=t.name,n=t.options,i=void 0===n?{}:n,r=t.effect;if("function"==typeof r){var s=r({state:a,name:e,instance:u,options:i}),o=function(){};c.push(s||o)}})),u.update()},forceUpdate:function(){if(!l){var t=a.elements,e=t.reference,n=t.popper;if(tn(e,n)){a.rects={reference:Xe(e,we(n),"fixed"===a.options.strategy),popper:fe(n)},a.reset=!1,a.placement=a.options.placement,a.orderedModifiers.forEach((function(t){return a.modifiersData[t.name]=Object.assign({},t.data)}));for(var i=0;i<a.orderedModifiers.length;i++)if(!0!==a.reset){var r=a.orderedModifiers[i],s=r.fn,o=r.options,c=void 0===o?{}:o,h=r.name;"function"==typeof s&&(a=s({state:a,options:c,name:h,instance:u})||a)}else a.reset=!1,i=-1}}},update:(r=function(){return new Promise((function(t){u.forceUpdate(),t(a)}))},function(){return o||(o=new Promise((function(t){Promise.resolve().then((function(){o=void 0,t(r())}))}))),o}),destroy:function(){h(),l=!0}};if(!tn(t,e))return u;function h(){c.forEach((function(t){return t()})),c=[]}return u.setOptions(n).then((function(t){!l&&n.onFirstUpdate&&n.onFirstUpdate(t)})),u}}var nn=en({defaultModifiers:[Le,{name:"popperOffsets",enabled:!0,phase:"read",fn:function(t){var e=t.state,n=t.name;e.modifiersData[n]=ze({reference:e.rects.reference,element:e.rects.popper,placement:e.placement})},data:{}},De,se,Qe,Ke,Ye,xe,{name:"hide",enabled:!0,phase:"main",requiresIfExists:["preventOverflow"],fn:function(t){var e=t.state,n=t.name,i=e.rects.reference,r=e.rects.popper,s=e.modifiersData.preventOverflow,o=$e(e,{elementContext:"reference"}),a=$e(e,{altBoundary:!0}),c=Ge(o,i),l=Ge(a,r,s),u=We(c),h=We(l);e.modifiersData[n]={referenceClippingOffsets:c,popperEscapeOffsets:l,isReferenceHidden:u,hasPopperEscaped:h},e.attributes.popper=Object.assign({},e.attributes.popper,{"data-popper-reference-hidden":u,"data-popper-escaped":h})}}]}),rn=function(){return rn=Object.assign||function(t){for(var e,n=1,i=arguments.length;n<i;n++)for(var r in e=arguments[n])Object.prototype.hasOwnProperty.call(e,r)&&(t[r]=e[r]);return t},rn.apply(this,arguments)},sn=function(t,e,n){if(n||2===arguments.length)for(var i,r=0,s=e.length;r<s;r++)!i&&r in e||(i||(i=Array.prototype.slice.call(e,0,r)),i[r]=e[r]);return t.concat(i||Array.prototype.slice.call(e))},on={placement:"bottom",triggerType:"click",offsetSkidding:0,offsetDistance:10,delay:300,ignoreClickOutsideClass:!1,onShow:function(){},onHide:function(){},onToggle:function(){}},an={id:null,override:!0},cn=function(){function t(t,e,n,i){void 0===t&&(t=null),void 0===e&&(e=null),void 0===n&&(n=on),void 0===i&&(i=an),this._instanceId=i.id?i.id:t.id,this._targetEl=t,this._triggerEl=e,this._options=rn(rn({},on),n),this._popperInstance=null,this._visible=!1,this._initialized=!1,this.init(),wt.addInstance("Dropdown",this,this._instanceId,i.override)}return t.prototype.init=function(){this._triggerEl&&this._targetEl&&!this._initialized&&(this._popperInstance=this._createPopperInstance(),this._setupEventListeners(),this._initialized=!0)},t.prototype.destroy=function(){var t=this,e=this._getTriggerEvents();"click"===this._options.triggerType&&e.showEvents.forEach((function(e){t._triggerEl.removeEventListener(e,t._clickHandler)})),"hover"===this._options.triggerType&&(e.showEvents.forEach((function(e){t._triggerEl.removeEventListener(e,t._hoverShowTriggerElHandler),t._targetEl.removeEventListener(e,t._hoverShowTargetElHandler)})),e.hideEvents.forEach((function(e){t._triggerEl.removeEventListener(e,t._hoverHideHandler),t._targetEl.removeEventListener(e,t._hoverHideHandler)}))),this._popperInstance.destroy(),this._initialized=!1},t.prototype.removeInstance=function(){wt.removeInstance("Dropdown",this._instanceId)},t.prototype.destroyAndRemoveInstance=function(){this.destroy(),this.removeInstance()},t.prototype._setupEventListeners=function(){var t=this,e=this._getTriggerEvents();this._clickHandler=function(){t.toggle()},"click"===this._options.triggerType&&e.showEvents.forEach((function(e){t._triggerEl.addEventListener(e,t._clickHandler)})),this._hoverShowTriggerElHandler=function(e){"click"===e.type?t.toggle():setTimeout((function(){t.show()}),t._options.delay)},this._hoverShowTargetElHandler=function(){t.show()},this._hoverHideHandler=function(){setTimeout((function(){t._targetEl.matches(":hover")||t.hide()}),t._options.delay)},"hover"===this._options.triggerType&&(e.showEvents.forEach((function(e){t._triggerEl.addEventListener(e,t._hoverShowTriggerElHandler),t._targetEl.addEventListener(e,t._hoverShowTargetElHandler)})),e.hideEvents.forEach((function(e){t._triggerEl.addEventListener(e,t._hoverHideHandler),t._targetEl.addEventListener(e,t._hoverHideHandler)})))},t.prototype._createPopperInstance=function(){return nn(this._triggerEl,this._targetEl,{placement:this._options.placement,modifiers:[{name:"offset",options:{offset:[this._options.offsetSkidding,this._options.offsetDistance]}}]})},t.prototype._setupClickOutsideListener=function(){var t=this;this._clickOutsideEventListener=function(e){t._handleClickOutside(e,t._targetEl)},document.body.addEventListener("click",this._clickOutsideEventListener,!0)},t.prototype._removeClickOutsideListener=function(){document.body.removeEventListener("click",this._clickOutsideEventListener,!0)},t.prototype._handleClickOutside=function(t,e){var n=t.target,i=this._options.ignoreClickOutsideClass,r=!1;i&&document.querySelectorAll(".".concat(i)).forEach((function(t){t.contains(n)&&(r=!0)}));n===e||e.contains(n)||this._triggerEl.contains(n)||r||!this.isVisible()||this.hide()},t.prototype._getTriggerEvents=function(){switch(this._options.triggerType){case"hover":return{showEvents:["mouseenter","click"],hideEvents:["mouseleave"]};case"click":default:return{showEvents:["click"],hideEvents:[]};case"none":return{showEvents:[],hideEvents:[]}}},t.prototype.toggle=function(){this.isVisible()?this.hide():this.show(),this._options.onToggle(this)},t.prototype.isVisible=function(){return this._visible},t.prototype.show=function(){this._targetEl.classList.remove("hidden"),this._targetEl.classList.add("block"),this._targetEl.removeAttribute("aria-hidden"),this._popperInstance.setOptions((function(t){return rn(rn({},t),{modifiers:sn(sn([],t.modifiers,!0),[{name:"eventListeners",enabled:!0}],!1)})})),this._setupClickOutsideListener(),this._popperInstance.update(),this._visible=!0,this._options.onShow(this)},t.prototype.hide=function(){this._targetEl.classList.remove("block"),this._targetEl.classList.add("hidden"),this._targetEl.setAttribute("aria-hidden","true"),this._popperInstance.setOptions((function(t){return rn(rn({},t),{modifiers:sn(sn([],t.modifiers,!0),[{name:"eventListeners",enabled:!1}],!1)})})),this._visible=!1,this._removeClickOutsideListener(),this._options.onHide(this)},t.prototype.updateOnShow=function(t){this._options.onShow=t},t.prototype.updateOnHide=function(t){this._options.onHide=t},t.prototype.updateOnToggle=function(t){this._options.onToggle=t},t}();function ln(){document.querySelectorAll("[data-dropdown-toggle]").forEach((function(t){var e=t.getAttribute("data-dropdown-toggle"),n=document.getElementById(e);if(n){var i=t.getAttribute("data-dropdown-placement"),r=t.getAttribute("data-dropdown-offset-skidding"),s=t.getAttribute("data-dropdown-offset-distance"),o=t.getAttribute("data-dropdown-trigger"),a=t.getAttribute("data-dropdown-delay"),c=t.getAttribute("data-dropdown-ignore-click-outside-class");new cn(n,t,{placement:i||on.placement,triggerType:o||on.triggerType,offsetSkidding:r?parseInt(r):on.offsetSkidding,offsetDistance:s?parseInt(s):on.offsetDistance,delay:a?parseInt(a):on.delay,ignoreClickOutsideClass:c||on.ignoreClickOutsideClass})}}))}"undefined"!=typeof window&&(window.Dropdown=cn,window.initDropdowns=ln);var un=function(){return un=Object.assign||function(t){for(var e,n=1,i=arguments.length;n<i;n++)for(var r in e=arguments[n])Object.prototype.hasOwnProperty.call(e,r)&&(t[r]=e[r]);return t},un.apply(this,arguments)},hn={placement:"center",backdropClasses:"bg-gray-900/50 dark:bg-gray-900/80 fixed inset-0 z-40",backdrop:"dynamic",closable:!0,onHide:function(){},onShow:function(){},onToggle:function(){}},dn={id:null,override:!0},fn=function(){function t(t,e,n){void 0===t&&(t=null),void 0===e&&(e=hn),void 0===n&&(n=dn),this._eventListenerInstances=[],this._instanceId=n.id?n.id:t.id,this._targetEl=t,this._options=un(un({},hn),e),this._isHidden=!0,this._backdropEl=null,this._initialized=!1,this.init(),wt.addInstance("Modal",this,this._instanceId,n.override)}return t.prototype.init=function(){var t=this;this._targetEl&&!this._initialized&&(this._getPlacementClasses().map((function(e){t._targetEl.classList.add(e)})),this._initialized=!0)},t.prototype.destroy=function(){this._initialized&&(this.removeAllEventListenerInstances(),this._destroyBackdropEl(),this._initialized=!1)},t.prototype.removeInstance=function(){wt.removeInstance("Modal",this._instanceId)},t.prototype.destroyAndRemoveInstance=function(){this.destroy(),this.removeInstance()},t.prototype._createBackdrop=function(){var t;if(this._isHidden){var e=document.createElement("div");(t=e.classList).add.apply(t,this._options.backdropClasses.split(" ")),document.querySelector("body").append(e),this._backdropEl=e}},t.prototype._destroyBackdropEl=function(){!this._isHidden&&this._backdropEl&&(this._backdropEl.remove(),this._backdropEl=null)},t.prototype._setupModalCloseEventListeners=function(){var t=this;"dynamic"===this._options.backdrop&&(this._clickOutsideEventListener=function(e){t._handleOutsideClick(e.target)},this._targetEl.addEventListener("click",this._clickOutsideEventListener,!0)),this._keydownEventListener=function(e){"Escape"===e.key&&t.hide()},document.body.addEventListener("keydown",this._keydownEventListener,!0)},t.prototype._removeModalCloseEventListeners=function(){"dynamic"===this._options.backdrop&&this._targetEl.removeEventListener("click",this._clickOutsideEventListener,!0),document.body.removeEventListener("keydown",this._keydownEventListener,!0)},t.prototype._handleOutsideClick=function(t){(t===this._targetEl||t===this._backdropEl&&this.isVisible())&&this.hide()},t.prototype._getPlacementClasses=function(){switch(this._options.placement){case"top-left":return["justify-start","items-start"];case"top-center":return["justify-center","items-start"];case"top-right":return["justify-end","items-start"];case"center-left":return["justify-start","items-center"];case"center":default:return["justify-center","items-center"];case"center-right":return["justify-end","items-center"];case"bottom-left":return["justify-start","items-end"];case"bottom-center":return["justify-center","items-end"];case"bottom-right":return["justify-end","items-end"]}},t.prototype.toggle=function(){this._isHidden?this.show():this.hide(),this._options.onToggle(this)},t.prototype.show=function(){this.isHidden&&(this._targetEl.classList.add("flex"),this._targetEl.classList.remove("hidden"),this._targetEl.setAttribute("aria-modal","true"),this._targetEl.setAttribute("role","dialog"),this._targetEl.removeAttribute("aria-hidden"),this._createBackdrop(),this._isHidden=!1,this._options.closable&&this._setupModalCloseEventListeners(),document.body.classList.add("overflow-hidden"),this._options.onShow(this))},t.prototype.hide=function(){this.isVisible&&(this._targetEl.classList.add("hidden"),this._targetEl.classList.remove("flex"),this._targetEl.setAttribute("aria-hidden","true"),this._targetEl.removeAttribute("aria-modal"),this._targetEl.removeAttribute("role"),this._destroyBackdropEl(),this._isHidden=!0,document.body.classList.remove("overflow-hidden"),this._options.closable&&this._removeModalCloseEventListeners(),this._options.onHide(this))},t.prototype.isVisible=function(){return!this._isHidden},t.prototype.isHidden=function(){return this._isHidden},t.prototype.addEventListenerInstance=function(t,e,n){this._eventListenerInstances.push({element:t,type:e,handler:n})},t.prototype.removeAllEventListenerInstances=function(){this._eventListenerInstances.map((function(t){t.element.removeEventListener(t.type,t.handler)})),this._eventListenerInstances=[]},t.prototype.getAllEventListenerInstances=function(){return this._eventListenerInstances},t.prototype.updateOnShow=function(t){this._options.onShow=t},t.prototype.updateOnHide=function(t){this._options.onHide=t},t.prototype.updateOnToggle=function(t){this._options.onToggle=t},t}();function pn(){document.querySelectorAll("[data-modal-target]").forEach((function(t){var e=t.getAttribute("data-modal-target"),n=document.getElementById(e);if(n){var i=n.getAttribute("data-modal-placement"),r=n.getAttribute("data-modal-backdrop");new fn(n,{placement:i||hn.placement,backdrop:r||hn.backdrop})}})),document.querySelectorAll("[data-modal-toggle]").forEach((function(t){var e=t.getAttribute("data-modal-toggle");if(document.getElementById(e)){var n=wt.getInstance("Modal",e);if(n){var i=function(){n.toggle()};t.addEventListener("click",i),n.addEventListenerInstance(t,"click",i)}}})),document.querySelectorAll("[data-modal-show]").forEach((function(t){var e=t.getAttribute("data-modal-show");if(document.getElementById(e)){var n=wt.getInstance("Modal",e);if(n){var i=function(){n.show()};t.addEventListener("click",i),n.addEventListenerInstance(t,"click",i)}}})),document.querySelectorAll("[data-modal-hide]").forEach((function(t){var e=t.getAttribute("data-modal-hide");if(document.getElementById(e)){var n=wt.getInstance("Modal",e);if(n){var i=function(){n.hide()};t.addEventListener("click",i),n.addEventListenerInstance(t,"click",i)}}}))}"undefined"!=typeof window&&(window.Modal=fn,window.initModals=pn);var gn=function(){return gn=Object.assign||function(t){for(var e,n=1,i=arguments.length;n<i;n++)for(var r in e=arguments[n])Object.prototype.hasOwnProperty.call(e,r)&&(t[r]=e[r]);return t},gn.apply(this,arguments)},mn={placement:"left",bodyScrolling:!1,backdrop:!0,edge:!1,edgeOffset:"bottom-[60px]",backdropClasses:"bg-gray-900/50 dark:bg-gray-900/80 fixed inset-0 z-30",onShow:function(){},onHide:function(){},onToggle:function(){}},yn={id:null,override:!0},vn=function(){function t(t,e,n){void 0===t&&(t=null),void 0===e&&(e=mn),void 0===n&&(n=yn),this._eventListenerInstances=[],this._instanceId=n.id?n.id:t.id,this._targetEl=t,this._options=gn(gn({},mn),e),this._visible=!1,this._initialized=!1,this.init(),wt.addInstance("Drawer",this,this._instanceId,n.override)}return t.prototype.init=function(){var t=this;this._targetEl&&!this._initialized&&(this._targetEl.setAttribute("aria-hidden","true"),this._targetEl.classList.add("transition-transform"),this._getPlacementClasses(this._options.placement).base.map((function(e){t._targetEl.classList.add(e)})),this._handleEscapeKey=function(e){"Escape"===e.key&&t.isVisible()&&t.hide()},document.addEventListener("keydown",this._handleEscapeKey),this._initialized=!0)},t.prototype.destroy=function(){this._initialized&&(this.removeAllEventListenerInstances(),this._destroyBackdropEl(),document.removeEventListener("keydown",this._handleEscapeKey),this._initialized=!1)},t.prototype.removeInstance=function(){wt.removeInstance("Drawer",this._instanceId)},t.prototype.destroyAndRemoveInstance=function(){this.destroy(),this.removeInstance()},t.prototype.hide=function(){var t=this;this._options.edge?(this._getPlacementClasses(this._options.placement+"-edge").active.map((function(e){t._targetEl.classList.remove(e)})),this._getPlacementClasses(this._options.placement+"-edge").inactive.map((function(e){t._targetEl.classList.add(e)}))):(this._getPlacementClasses(this._options.placement).active.map((function(e){t._targetEl.classList.remove(e)})),this._getPlacementClasses(this._options.placement).inactive.map((function(e){t._targetEl.classList.add(e)}))),this._targetEl.setAttribute("aria-hidden","true"),this._targetEl.removeAttribute("aria-modal"),this._targetEl.removeAttribute("role"),this._options.bodyScrolling||document.body.classList.remove("overflow-hidden"),this._options.backdrop&&this._destroyBackdropEl(),this._visible=!1,this._options.onHide(this)},t.prototype.show=function(){var t=this;this._options.edge?(this._getPlacementClasses(this._options.placement+"-edge").active.map((function(e){t._targetEl.classList.add(e)})),this._getPlacementClasses(this._options.placement+"-edge").inactive.map((function(e){t._targetEl.classList.remove(e)}))):(this._getPlacementClasses(this._options.placement).active.map((function(e){t._targetEl.classList.add(e)})),this._getPlacementClasses(this._options.placement).inactive.map((function(e){t._targetEl.classList.remove(e)}))),this._targetEl.setAttribute("aria-modal","true"),this._targetEl.setAttribute("role","dialog"),this._targetEl.removeAttribute("aria-hidden"),this._options.bodyScrolling||document.body.classList.add("overflow-hidden"),this._options.backdrop&&this._createBackdrop(),this._visible=!0,this._options.onShow(this)},t.prototype.toggle=function(){this.isVisible()?this.hide():this.show()},t.prototype._createBackdrop=function(){var t,e=this;if(!this._visible){var n=document.createElement("div");n.setAttribute("drawer-backdrop",""),(t=n.classList).add.apply(t,this._options.backdropClasses.split(" ")),document.querySelector("body").append(n),n.addEventListener("click",(function(){e.hide()}))}},t.prototype._destroyBackdropEl=function(){this._visible&&null!==document.querySelector("[drawer-backdrop]")&&document.querySelector("[drawer-backdrop]").remove()},t.prototype._getPlacementClasses=function(t){switch(t){case"top":return{base:["top-0","left-0","right-0"],active:["transform-none"],inactive:["-translate-y-full"]};case"right":return{base:["right-0","top-0"],active:["transform-none"],inactive:["translate-x-full"]};case"bottom":return{base:["bottom-0","left-0","right-0"],active:["transform-none"],inactive:["translate-y-full"]};case"left":default:return{base:["left-0","top-0"],active:["transform-none"],inactive:["-translate-x-full"]};case"bottom-edge":return{base:["left-0","top-0"],active:["transform-none"],inactive:["translate-y-full",this._options.edgeOffset]}}},t.prototype.isHidden=function(){return!this._visible},t.prototype.isVisible=function(){return this._visible},t.prototype.addEventListenerInstance=function(t,e,n){this._eventListenerInstances.push({element:t,type:e,handler:n})},t.prototype.removeAllEventListenerInstances=function(){this._eventListenerInstances.map((function(t){t.element.removeEventListener(t.type,t.handler)})),this._eventListenerInstances=[]},t.prototype.getAllEventListenerInstances=function(){return this._eventListenerInstances},t.prototype.updateOnShow=function(t){this._options.onShow=t},t.prototype.updateOnHide=function(t){this._options.onHide=t},t.prototype.updateOnToggle=function(t){this._options.onToggle=t},t}();function bn(){document.querySelectorAll("[data-drawer-target]").forEach((function(t){var e=t.getAttribute("data-drawer-target"),n=document.getElementById(e);if(n){var i=t.getAttribute("data-drawer-placement"),r=t.getAttribute("data-drawer-body-scrolling"),s=t.getAttribute("data-drawer-backdrop"),o=t.getAttribute("data-drawer-edge"),a=t.getAttribute("data-drawer-edge-offset");new vn(n,{placement:i||mn.placement,bodyScrolling:r?"true"===r:mn.bodyScrolling,backdrop:s?"true"===s:mn.backdrop,edge:o?"true"===o:mn.edge,edgeOffset:a||mn.edgeOffset})}})),document.querySelectorAll("[data-drawer-toggle]").forEach((function(t){var e=t.getAttribute("data-drawer-toggle");if(document.getElementById(e)){var n=wt.getInstance("Drawer",e);if(n){var i=function(){n.toggle()};t.addEventListener("click",i),n.addEventListenerInstance(t,"click",i)}}})),document.querySelectorAll("[data-drawer-dismiss], [data-drawer-hide]").forEach((function(t){var e=t.getAttribute("data-drawer-dismiss")?t.getAttribute("data-drawer-dismiss"):t.getAttribute("data-drawer-hide");if(document.getElementById(e)){var n=wt.getInstance("Drawer",e);if(n){var i=function(){n.hide()};t.addEventListener("click",i),n.addEventListenerInstance(t,"click",i)}}})),document.querySelectorAll("[data-drawer-show]").forEach((function(t){var e=t.getAttribute("data-drawer-show");if(document.getElementById(e)){var n=wt.getInstance("Drawer",e);if(n){var i=function(){n.show()};t.addEventListener("click",i),n.addEventListenerInstance(t,"click",i)}}}))}"undefined"!=typeof window&&(window.Drawer=vn,window.initDrawers=bn);var wn=function(){return wn=Object.assign||function(t){for(var e,n=1,i=arguments.length;n<i;n++)for(var r in e=arguments[n])Object.prototype.hasOwnProperty.call(e,r)&&(t[r]=e[r]);return t},wn.apply(this,arguments)},_n={defaultTabId:null,activeClasses:"text-blue-600 hover:text-blue-600 dark:text-blue-500 dark:hover:text-blue-500 border-blue-600 dark:border-blue-500",inactiveClasses:"dark:border-transparent text-gray-500 hover:text-gray-600 dark:text-gray-400 border-gray-100 hover:border-gray-300 dark:border-gray-700 dark:hover:text-gray-300",onShow:function(){}},En={id:null,override:!0},kn=function(){function t(t,e,n,i){void 0===t&&(t=null),void 0===e&&(e=[]),void 0===n&&(n=_n),void 0===i&&(i=En),this._instanceId=i.id?i.id:t.id,this._tabsEl=t,this._items=e,this._activeTab=n?this.getTab(n.defaultTabId):null,this._options=wn(wn({},_n),n),this._initialized=!1,this.init(),wt.addInstance("Tabs",this,this._instanceId,i.override)}return t.prototype.init=function(){var t=this;this._items.length&&!this._initialized&&(this._activeTab||this.setActiveTab(this._items[0]),this.show(this._activeTab.id,!0),this._items.map((function(e){e.triggerEl.addEventListener("click",(function(n){n.preventDefault(),t.show(e.id)}))})))},t.prototype.destroy=function(){this._initialized&&(this._initialized=!1)},t.prototype.removeInstance=function(){this.destroy(),wt.removeInstance("Tabs",this._instanceId)},t.prototype.destroyAndRemoveInstance=function(){this.destroy(),this.removeInstance()},t.prototype.getActiveTab=function(){return this._activeTab},t.prototype.setActiveTab=function(t){this._activeTab=t},t.prototype.getTab=function(t){return this._items.filter((function(e){return e.id===t}))[0]},t.prototype.show=function(t,e){var n,i,r=this;void 0===e&&(e=!1);var s=this.getTab(t);(s!==this._activeTab||e)&&(this._items.map((function(t){var e,n;t!==s&&((e=t.triggerEl.classList).remove.apply(e,r._options.activeClasses.split(" ")),(n=t.triggerEl.classList).add.apply(n,r._options.inactiveClasses.split(" ")),t.targetEl.classList.add("hidden"),t.triggerEl.setAttribute("aria-selected","false"))})),(n=s.triggerEl.classList).add.apply(n,this._options.activeClasses.split(" ")),(i=s.triggerEl.classList).remove.apply(i,this._options.inactiveClasses.split(" ")),s.triggerEl.setAttribute("aria-selected","true"),s.targetEl.classList.remove("hidden"),this.setActiveTab(s),this._options.onShow(this,s))},t.prototype.updateOnShow=function(t){this._options.onShow=t},t}();function Cn(){document.querySelectorAll("[data-tabs-toggle]").forEach((function(t){var e=[],n=t.getAttribute("data-tabs-active-classes"),i=t.getAttribute("data-tabs-inactive-classes"),r=null;t.querySelectorAll('[role="tab"]').forEach((function(t){var n="true"===t.getAttribute("aria-selected"),i={id:t.getAttribute("data-tabs-target"),triggerEl:t,targetEl:document.querySelector(t.getAttribute("data-tabs-target"))};e.push(i),n&&(r=i.id)})),new kn(t,e,{defaultTabId:r,activeClasses:n||_n.activeClasses,inactiveClasses:i||_n.inactiveClasses})}))}"undefined"!=typeof window&&(window.Tabs=kn,window.initTabs=Cn);var xn=function(){return xn=Object.assign||function(t){for(var e,n=1,i=arguments.length;n<i;n++)for(var r in e=arguments[n])Object.prototype.hasOwnProperty.call(e,r)&&(t[r]=e[r]);return t},xn.apply(this,arguments)},Tn=function(t,e,n){if(n||2===arguments.length)for(var i,r=0,s=e.length;r<s;r++)!i&&r in e||(i||(i=Array.prototype.slice.call(e,0,r)),i[r]=e[r]);return t.concat(i||Array.prototype.slice.call(e))},Sn={placement:"top",triggerType:"hover",onShow:function(){},onHide:function(){},onToggle:function(){}},In={id:null,override:!0},Dn=function(){function t(t,e,n,i){void 0===t&&(t=null),void 0===e&&(e=null),void 0===n&&(n=Sn),void 0===i&&(i=In),this._instanceId=i.id?i.id:t.id,this._targetEl=t,this._triggerEl=e,this._options=xn(xn({},Sn),n),this._popperInstance=null,this._visible=!1,this._initialized=!1,this.init(),wt.addInstance("Tooltip",this,this._instanceId,i.override)}return t.prototype.init=function(){this._triggerEl&&this._targetEl&&!this._initialized&&(this._setupEventListeners(),this._popperInstance=this._createPopperInstance(),this._initialized=!0)},t.prototype.destroy=function(){var t=this;if(this._initialized){var e=this._getTriggerEvents();e.showEvents.forEach((function(e){t._triggerEl.removeEventListener(e,t._showHandler)})),e.hideEvents.forEach((function(e){t._triggerEl.removeEventListener(e,t._hideHandler)})),this._removeKeydownListener(),this._removeClickOutsideListener(),this._popperInstance&&this._popperInstance.destroy(),this._initialized=!1}},t.prototype.removeInstance=function(){wt.removeInstance("Tooltip",this._instanceId)},t.prototype.destroyAndRemoveInstance=function(){this.destroy(),this.removeInstance()},t.prototype._setupEventListeners=function(){var t=this,e=this._getTriggerEvents();this._showHandler=function(){t.show()},this._hideHandler=function(){t.hide()},e.showEvents.forEach((function(e){t._triggerEl.addEventListener(e,t._showHandler)})),e.hideEvents.forEach((function(e){t._triggerEl.addEventListener(e,t._hideHandler)}))},t.prototype._createPopperInstance=function(){return nn(this._triggerEl,this._targetEl,{placement:this._options.placement,modifiers:[{name:"offset",options:{offset:[0,8]}}]})},t.prototype._getTriggerEvents=function(){switch(this._options.triggerType){case"hover":default:return{showEvents:["mouseenter","focus"],hideEvents:["mouseleave","blur"]};case"click":return{showEvents:["click","focus"],hideEvents:["focusout","blur"]};case"none":return{showEvents:[],hideEvents:[]}}},t.prototype._setupKeydownListener=function(){var t=this;this._keydownEventListener=function(e){"Escape"===e.key&&t.hide()},document.body.addEventListener("keydown",this._keydownEventListener,!0)},t.prototype._removeKeydownListener=function(){document.body.removeEventListener("keydown",this._keydownEventListener,!0)},t.prototype._setupClickOutsideListener=function(){var t=this;this._clickOutsideEventListener=function(e){t._handleClickOutside(e,t._targetEl)},document.body.addEventListener("click",this._clickOutsideEventListener,!0)},t.prototype._removeClickOutsideListener=function(){document.body.removeEventListener("click",this._clickOutsideEventListener,!0)},t.prototype._handleClickOutside=function(t,e){var n=t.target;n===e||e.contains(n)||this._triggerEl.contains(n)||!this.isVisible()||this.hide()},t.prototype.isVisible=function(){return this._visible},t.prototype.toggle=function(){this.isVisible()?this.hide():this.show()},t.prototype.show=function(){this._targetEl.classList.remove("opacity-0","invisible"),this._targetEl.classList.add("opacity-100","visible"),this._popperInstance.setOptions((function(t){return xn(xn({},t),{modifiers:Tn(Tn([],t.modifiers,!0),[{name:"eventListeners",enabled:!0}],!1)})})),this._setupClickOutsideListener(),this._setupKeydownListener(),this._popperInstance.update(),this._visible=!0,this._options.onShow(this)},t.prototype.hide=function(){this._targetEl.classList.remove("opacity-100","visible"),this._targetEl.classList.add("opacity-0","invisible"),this._popperInstance.setOptions((function(t){return xn(xn({},t),{modifiers:Tn(Tn([],t.modifiers,!0),[{name:"eventListeners",enabled:!1}],!1)})})),this._removeClickOutsideListener(),this._removeKeydownListener(),this._visible=!1,this._options.onHide(this)},t.prototype.updateOnShow=function(t){this._options.onShow=t},t.prototype.updateOnHide=function(t){this._options.onHide=t},t.prototype.updateOnToggle=function(t){this._options.onToggle=t},t}();function An(){document.querySelectorAll("[data-tooltip-target]").forEach((function(t){var e=t.getAttribute("data-tooltip-target"),n=document.getElementById(e);if(n){var i=t.getAttribute("data-tooltip-trigger"),r=t.getAttribute("data-tooltip-placement");new Dn(n,t,{placement:r||Sn.placement,triggerType:i||Sn.triggerType})}}))}"undefined"!=typeof window&&(window.Tooltip=Dn,window.initTooltips=An);var Ln=function(){return Ln=Object.assign||function(t){for(var e,n=1,i=arguments.length;n<i;n++)for(var r in e=arguments[n])Object.prototype.hasOwnProperty.call(e,r)&&(t[r]=e[r]);return t},Ln.apply(this,arguments)},On=function(t,e,n){if(n||2===arguments.length)for(var i,r=0,s=e.length;r<s;r++)!i&&r in e||(i||(i=Array.prototype.slice.call(e,0,r)),i[r]=e[r]);return t.concat(i||Array.prototype.slice.call(e))},Nn={placement:"top",offset:10,triggerType:"hover",onShow:function(){},onHide:function(){},onToggle:function(){}},Mn={id:null,override:!0},Rn=function(){function t(t,e,n,i){void 0===t&&(t=null),void 0===e&&(e=null),void 0===n&&(n=Nn),void 0===i&&(i=Mn),this._instanceId=i.id?i.id:t.id,this._targetEl=t,this._triggerEl=e,this._options=Ln(Ln({},Nn),n),this._popperInstance=null,this._visible=!1,this._initialized=!1,this.init(),wt.addInstance("Popover",this,i.id?i.id:this._targetEl.id,i.override)}return t.prototype.init=function(){this._triggerEl&&this._targetEl&&!this._initialized&&(this._setupEventListeners(),this._popperInstance=this._createPopperInstance(),this._initialized=!0)},t.prototype.destroy=function(){var t=this;if(this._initialized){var e=this._getTriggerEvents();e.showEvents.forEach((function(e){t._triggerEl.removeEventListener(e,t._showHandler),t._targetEl.removeEventListener(e,t._showHandler)})),e.hideEvents.forEach((function(e){t._triggerEl.removeEventListener(e,t._hideHandler),t._targetEl.removeEventListener(e,t._hideHandler)})),this._removeKeydownListener(),this._removeClickOutsideListener(),this._popperInstance&&this._popperInstance.destroy(),this._initialized=!1}},t.prototype.removeInstance=function(){wt.removeInstance("Popover",this._instanceId)},t.prototype.destroyAndRemoveInstance=function(){this.destroy(),this.removeInstance()},t.prototype._setupEventListeners=function(){var t=this,e=this._getTriggerEvents();this._showHandler=function(){t.show()},this._hideHandler=function(){setTimeout((function(){t._targetEl.matches(":hover")||t.hide()}),100)},e.showEvents.forEach((function(e){t._triggerEl.addEventListener(e,t._showHandler),t._targetEl.addEventListener(e,t._showHandler)})),e.hideEvents.forEach((function(e){t._triggerEl.addEventListener(e,t._hideHandler),t._targetEl.addEventListener(e,t._hideHandler)}))},t.prototype._createPopperInstance=function(){return nn(this._triggerEl,this._targetEl,{placement:this._options.placement,modifiers:[{name:"offset",options:{offset:[0,this._options.offset]}}]})},t.prototype._getTriggerEvents=function(){switch(this._options.triggerType){case"hover":default:return{showEvents:["mouseenter","focus"],hideEvents:["mouseleave","blur"]};case"click":return{showEvents:["click","focus"],hideEvents:["focusout","blur"]};case"none":return{showEvents:[],hideEvents:[]}}},t.prototype._setupKeydownListener=function(){var t=this;this._keydownEventListener=function(e){"Escape"===e.key&&t.hide()},document.body.addEventListener("keydown",this._keydownEventListener,!0)},t.prototype._removeKeydownListener=function(){document.body.removeEventListener("keydown",this._keydownEventListener,!0)},t.prototype._setupClickOutsideListener=function(){var t=this;this._clickOutsideEventListener=function(e){t._handleClickOutside(e,t._targetEl)},document.body.addEventListener("click",this._clickOutsideEventListener,!0)},t.prototype._removeClickOutsideListener=function(){document.body.removeEventListener("click",this._clickOutsideEventListener,!0)},t.prototype._handleClickOutside=function(t,e){var n=t.target;n===e||e.contains(n)||this._triggerEl.contains(n)||!this.isVisible()||this.hide()},t.prototype.isVisible=function(){return this._visible},t.prototype.toggle=function(){this.isVisible()?this.hide():this.show(),this._options.onToggle(this)},t.prototype.show=function(){this._targetEl.classList.remove("opacity-0","invisible"),this._targetEl.classList.add("opacity-100","visible"),this._popperInstance.setOptions((function(t){return Ln(Ln({},t),{modifiers:On(On([],t.modifiers,!0),[{name:"eventListeners",enabled:!0}],!1)})})),this._setupClickOutsideListener(),this._setupKeydownListener(),this._popperInstance.update(),this._visible=!0,this._options.onShow(this)},t.prototype.hide=function(){this._targetEl.classList.remove("opacity-100","visible"),this._targetEl.classList.add("opacity-0","invisible"),this._popperInstance.setOptions((function(t){return Ln(Ln({},t),{modifiers:On(On([],t.modifiers,!0),[{name:"eventListeners",enabled:!1}],!1)})})),this._removeClickOutsideListener(),this._removeKeydownListener(),this._visible=!1,this._options.onHide(this)},t.prototype.updateOnShow=function(t){this._options.onShow=t},t.prototype.updateOnHide=function(t){this._options.onHide=t},t.prototype.updateOnToggle=function(t){this._options.onToggle=t},t}();function Pn(){document.querySelectorAll("[data-popover-target]").forEach((function(t){var e=t.getAttribute("data-popover-target"),n=document.getElementById(e);if(n){var i=t.getAttribute("data-popover-trigger"),r=t.getAttribute("data-popover-placement"),s=t.getAttribute("data-popover-offset");new Rn(n,t,{placement:r||Nn.placement,offset:s?parseInt(s):Nn.offset,triggerType:i||Nn.triggerType})}}))}"undefined"!=typeof window&&(window.Popover=Rn,window.initPopovers=Pn);var Vn=function(){return Vn=Object.assign||function(t){for(var e,n=1,i=arguments.length;n<i;n++)for(var r in e=arguments[n])Object.prototype.hasOwnProperty.call(e,r)&&(t[r]=e[r]);return t},Vn.apply(this,arguments)},Fn={triggerType:"hover",onShow:function(){},onHide:function(){},onToggle:function(){}},Bn={id:null,override:!0},jn=function(){function t(t,e,n,i,r){void 0===t&&(t=null),void 0===e&&(e=null),void 0===n&&(n=null),void 0===i&&(i=Fn),void 0===r&&(r=Bn),this._instanceId=r.id?r.id:n.id,this._parentEl=t,this._triggerEl=e,this._targetEl=n,this._options=Vn(Vn({},Fn),i),this._visible=!1,this._initialized=!1,this.init(),wt.addInstance("Dial",this,this._instanceId,r.override)}return t.prototype.init=function(){var t=this;if(this._triggerEl&&this._targetEl&&!this._initialized){var e=this._getTriggerEventTypes(this._options.triggerType);this._showEventHandler=function(){t.show()},e.showEvents.forEach((function(e){t._triggerEl.addEventListener(e,t._showEventHandler),t._targetEl.addEventListener(e,t._showEventHandler)})),this._hideEventHandler=function(){t._parentEl.matches(":hover")||t.hide()},e.hideEvents.forEach((function(e){t._parentEl.addEventListener(e,t._hideEventHandler)})),this._initialized=!0}},t.prototype.destroy=function(){var t=this;if(this._initialized){var e=this._getTriggerEventTypes(this._options.triggerType);e.showEvents.forEach((function(e){t._triggerEl.removeEventListener(e,t._showEventHandler),t._targetEl.removeEventListener(e,t._showEventHandler)})),e.hideEvents.forEach((function(e){t._parentEl.removeEventListener(e,t._hideEventHandler)})),this._initialized=!1}},t.prototype.removeInstance=function(){wt.removeInstance("Dial",this._instanceId)},t.prototype.destroyAndRemoveInstance=function(){this.destroy(),this.removeInstance()},t.prototype.hide=function(){this._targetEl.classList.add("hidden"),this._triggerEl&&this._triggerEl.setAttribute("aria-expanded","false"),this._visible=!1,this._options.onHide(this)},t.prototype.show=function(){this._targetEl.classList.remove("hidden"),this._triggerEl&&this._triggerEl.setAttribute("aria-expanded","true"),this._visible=!0,this._options.onShow(this)},t.prototype.toggle=function(){this._visible?this.hide():this.show()},t.prototype.isHidden=function(){return!this._visible},t.prototype.isVisible=function(){return this._visible},t.prototype._getTriggerEventTypes=function(t){switch(t){case"hover":default:return{showEvents:["mouseenter","focus"],hideEvents:["mouseleave","blur"]};case"click":return{showEvents:["click","focus"],hideEvents:["focusout","blur"]};case"none":return{showEvents:[],hideEvents:[]}}},t.prototype.updateOnShow=function(t){this._options.onShow=t},t.prototype.updateOnHide=function(t){this._options.onHide=t},t.prototype.updateOnToggle=function(t){this._options.onToggle=t},t}();function Un(){document.querySelectorAll("[data-dial-init]").forEach((function(t){var e=t.querySelector("[data-dial-toggle]");if(e){var n=e.getAttribute("data-dial-toggle"),i=document.getElementById(n);if(i){var r=e.getAttribute("data-dial-trigger");new jn(t,e,i,{triggerType:r||Fn.triggerType})}}}))}"undefined"!=typeof window&&(window.Dial=jn,window.initDials=Un);var qn=function(){return qn=Object.assign||function(t){for(var e,n=1,i=arguments.length;n<i;n++)for(var r in e=arguments[n])Object.prototype.hasOwnProperty.call(e,r)&&(t[r]=e[r]);return t},qn.apply(this,arguments)},Hn={minValue:null,maxValue:null,onIncrement:function(){},onDecrement:function(){}},zn={id:null,override:!0},$n=function(){function t(t,e,n,i,r){void 0===t&&(t=null),void 0===e&&(e=null),void 0===n&&(n=null),void 0===i&&(i=Hn),void 0===r&&(r=zn),this._instanceId=r.id?r.id:t.id,this._targetEl=t,this._incrementEl=e,this._decrementEl=n,this._options=qn(qn({},Hn),i),this._initialized=!1,this.init(),wt.addInstance("InputCounter",this,this._instanceId,r.override)}return t.prototype.init=function(){var t=this;this._targetEl&&!this._initialized&&(this._inputHandler=function(e){var n=e.target;/^\d*$/.test(n.value)||(n.value=n.value.replace(/[^\d]/g,"")),null!==t._options.maxValue&&parseInt(n.value)>t._options.maxValue&&(n.value=t._options.maxValue.toString()),null!==t._options.minValue&&parseInt(n.value)<t._options.minValue&&(n.value=t._options.minValue.toString())},this._incrementClickHandler=function(){t.increment()},this._decrementClickHandler=function(){t.decrement()},this._targetEl.addEventListener("input",this._inputHandler),this._incrementEl&&this._incrementEl.addEventListener("click",this._incrementClickHandler),this._decrementEl&&this._decrementEl.addEventListener("click",this._decrementClickHandler),this._initialized=!0)},t.prototype.destroy=function(){this._targetEl&&this._initialized&&(this._targetEl.removeEventListener("input",this._inputHandler),this._incrementEl&&this._incrementEl.removeEventListener("click",this._incrementClickHandler),this._decrementEl&&this._decrementEl.removeEventListener("click",this._decrementClickHandler),this._initialized=!1)},t.prototype.removeInstance=function(){wt.removeInstance("InputCounter",this._instanceId)},t.prototype.destroyAndRemoveInstance=function(){this.destroy(),this.removeInstance()},t.prototype.getCurrentValue=function(){return parseInt(this._targetEl.value)||0},t.prototype.increment=function(){null!==this._options.maxValue&&this.getCurrentValue()>=this._options.maxValue||(this._targetEl.value=(this.getCurrentValue()+1).toString(),this._options.onIncrement(this))},t.prototype.decrement=function(){null!==this._options.minValue&&this.getCurrentValue()<=this._options.minValue||(this._targetEl.value=(this.getCurrentValue()-1).toString(),this._options.onDecrement(this))},t.prototype.updateOnIncrement=function(t){this._options.onIncrement=t},t.prototype.updateOnDecrement=function(t){this._options.onDecrement=t},t}();function Kn(){document.querySelectorAll("[data-input-counter]").forEach((function(t){var e=t.id,n=document.querySelector('[data-input-counter-increment="'+e+'"]'),i=document.querySelector('[data-input-counter-decrement="'+e+'"]'),r=t.getAttribute("data-input-counter-min"),s=t.getAttribute("data-input-counter-max");t&&(wt.instanceExists("InputCounter",t.getAttribute("id"))||new $n(t,n||null,i||null,{minValue:r?parseInt(r):null,maxValue:s?parseInt(s):null}))}))}"undefined"!=typeof window&&(window.InputCounter=$n,window.initInputCounters=Kn);var Gn=function(){return Gn=Object.assign||function(t){for(var e,n=1,i=arguments.length;n<i;n++)for(var r in e=arguments[n])Object.prototype.hasOwnProperty.call(e,r)&&(t[r]=e[r]);return t},Gn.apply(this,arguments)},Wn={htmlEntities:!1,contentType:"input",onCopy:function(){}},Qn={id:null,override:!0},Yn=function(){function t(t,e,n,i){void 0===t&&(t=null),void 0===e&&(e=null),void 0===n&&(n=Wn),void 0===i&&(i=Qn),this._instanceId=i.id?i.id:e.id,this._triggerEl=t,this._targetEl=e,this._options=Gn(Gn({},Wn),n),this._initialized=!1,this.init(),wt.addInstance("CopyClipboard",this,this._instanceId,i.override)}return t.prototype.init=function(){var t=this;this._targetEl&&this._triggerEl&&!this._initialized&&(this._triggerElClickHandler=function(){t.copy()},this._triggerEl&&this._triggerEl.addEventListener("click",this._triggerElClickHandler),this._initialized=!0)},t.prototype.destroy=function(){this._triggerEl&&this._targetEl&&this._initialized&&(this._triggerEl&&this._triggerEl.removeEventListener("click",this._triggerElClickHandler),this._initialized=!1)},t.prototype.removeInstance=function(){wt.removeInstance("CopyClipboard",this._instanceId)},t.prototype.destroyAndRemoveInstance=function(){this.destroy(),this.removeInstance()},t.prototype.getTargetValue=function(){return"input"===this._options.contentType?this._targetEl.value:"innerHTML"===this._options.contentType?this._targetEl.innerHTML:"textContent"===this._options.contentType?this._targetEl.textContent.replace(/\s+/g," ").trim():void 0},t.prototype.copy=function(){var t=this.getTargetValue();this._options.htmlEntities&&(t=this.decodeHTML(t));var e=document.createElement("textarea");return e.value=t,document.body.appendChild(e),e.select(),document.execCommand("copy"),document.body.removeChild(e),this._options.onCopy(this),t},t.prototype.decodeHTML=function(t){var e=document.createElement("textarea");return e.innerHTML=t,e.textContent},t.prototype.updateOnCopyCallback=function(t){this._options.onCopy=t},t}();function Xn(){document.querySelectorAll("[data-copy-to-clipboard-target]").forEach((function(t){var e=t.getAttribute("data-copy-to-clipboard-target"),n=document.getElementById(e),i=t.getAttribute("data-copy-to-clipboard-content-type"),r=t.getAttribute("data-copy-to-clipboard-html-entities");n&&(wt.instanceExists("CopyClipboard",n.getAttribute("id"))||new Yn(t,n,{htmlEntities:!(!r||"true"!==r)||Wn.htmlEntities,contentType:i||Wn.contentType}))}))}function Jn(t,e){(null==e||e>t.length)&&(e=t.length);for(var n=0,i=Array(e);n<e;n++)i[n]=t[n];return i}function Zn(t,e,n){return e=ri(e),function(t,e){if(e&&("object"==typeof e||"function"==typeof e))return e;if(void 0!==e)throw new TypeError("Derived constructors may only return object or undefined");return function(t){if(void 0===t)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return t}(t)}(t,oi()?Reflect.construct(e,n||[],ri(t).constructor):e.apply(t,n))}function ti(t,e){if(!(t instanceof e))throw new TypeError("Cannot call a class as a function")}function ei(t,e){for(var n=0;n<e.length;n++){var i=e[n];i.enumerable=i.enumerable||!1,i.configurable=!0,"value"in i&&(i.writable=!0),Object.defineProperty(t,ui(i.key),i)}}function ni(t,e,n){return e&&ei(t.prototype,e),n&&ei(t,n),Object.defineProperty(t,"prototype",{writable:!1}),t}function ii(){return ii="undefined"!=typeof Reflect&&Reflect.get?Reflect.get.bind():function(t,e,n){var i=function(t,e){for(;!{}.hasOwnProperty.call(t,e)&&null!==(t=ri(t)););return t}(t,e);if(i){var r=Object.getOwnPropertyDescriptor(i,e);return r.get?r.get.call(arguments.length<3?t:n):r.value}},ii.apply(null,arguments)}function ri(t){return(ri=Object.setPrototypeOf?Object.getPrototypeOf.bind():function(t){return t.__proto__||Object.getPrototypeOf(t)})(t)}function si(t,e){if("function"!=typeof e&&null!==e)throw new TypeError("Super expression must either be null or a function");t.prototype=Object.create(e&&e.prototype,{constructor:{value:t,writable:!0,configurable:!0}}),Object.defineProperty(t,"prototype",{writable:!1}),e&&ai(t,e)}function oi(){try{var t=!Boolean.prototype.valueOf.call(Reflect.construct(Boolean,[],(function(){})))}catch(e){}return(oi=function(){return!!t})()}function ai(t,e){return(ai=Object.setPrototypeOf?Object.setPrototypeOf.bind():function(t,e){return t.__proto__=e,t})(t,e)}function ci(t,e){return function(t){if(Array.isArray(t))return t}(t)||function(t,e){var n=null==t?null:"undefined"!=typeof Symbol&&t[Symbol.iterator]||t["@@iterator"];if(null!=n){var i,r,s,o,a=[],c=!0,l=!1;try{if(s=(n=n.call(t)).next,0===e){if(Object(n)!==n)return;c=!1}else for(;!(c=(i=s.call(n)).done)&&(a.push(i.value),a.length!==e);c=!0);}catch(u){l=!0,r=u}finally{try{if(!c&&null!=n.return&&(o=n.return(),Object(o)!==o))return}finally{if(l)throw r}}return a}}(t,e)||di(t,e)||function(){throw new TypeError("Invalid attempt to destructure non-iterable instance.\nIn order to be iterable, non-array objects must have a [Symbol.iterator]() method.")}()}function li(t){return function(t){if(Array.isArray(t))return Jn(t)}(t)||function(t){if("undefined"!=typeof Symbol&&null!=t[Symbol.iterator]||null!=t["@@iterator"])return Array.from(t)}(t)||di(t)||function(){throw new TypeError("Invalid attempt to spread non-iterable instance.\nIn order to be iterable, non-array objects must have a [Symbol.iterator]() method.")}()}function ui(t){var e=function(t,e){if("object"!=typeof t||!t)return t;var n=t[Symbol.toPrimitive];if(void 0!==n){var i=n.call(t,e);if("object"!=typeof i)return i;throw new TypeError("@@toPrimitive must return a primitive value.")}return String(t)}(t,"string");return"symbol"==typeof e?e:e+""}function hi(t){return(hi="function"==typeof Symbol&&"symbol"==typeof Symbol.iterator?function(t){return typeof t}:function(t){return t&&"function"==typeof Symbol&&t.constructor===Symbol&&t!==Symbol.prototype?"symbol":typeof t})(t)}function di(t,e){if(t){if("string"==typeof t)return Jn(t,e);var n={}.toString.call(t).slice(8,-1);return"Object"===n&&t.constructor&&(n=t.constructor.name),"Map"===n||"Set"===n?Array.from(t):"Arguments"===n||/^(?:Ui|I)nt(?:8|16|32)(?:Clamped)?Array$/.test(n)?Jn(t,e):void 0}}function fi(t,e){return Object.prototype.hasOwnProperty.call(t,e)}function pi(t){return t[t.length-1]}function gi(t){for(var e=arguments.length,n=new Array(e>1?e-1:0),i=1;i<e;i++)n[i-1]=arguments[i];return n.forEach((function(e){t.includes(e)||t.push(e)})),t}function mi(t,e){return t?t.split(e):[]}function yi(t,e,n){return(void 0===e||t>=e)&&(void 0===n||t<=n)}function vi(t,e,n){return t<e?e:t>n?n:t}function bi(t,e){var n=arguments.length>2&&void 0!==arguments[2]?arguments[2]:{},i=arguments.length>3&&void 0!==arguments[3]?arguments[3]:0,r=arguments.length>4&&void 0!==arguments[4]?arguments[4]:"",s=Object.keys(n).reduce((function(t,e){var r=n[e];return"function"==typeof r&&(r=r(i)),"".concat(t," ").concat(e,'="').concat(r,'"')}),t);r+="<".concat(s,"></").concat(t,">");var o=i+1;return o<e?bi(t,e,n,o,r):r}function wi(t){return t.replace(/>\s+/g,">").replace(/\s+</,"<")}function _i(t){return new Date(t).setHours(0,0,0,0)}function Ei(){return(new Date).setHours(0,0,0,0)}function ki(){switch(arguments.length){case 0:return Ei();case 1:return _i(arguments.length<=0?void 0:arguments[0])}var t=new Date(0);return t.setFullYear.apply(t,arguments),t.setHours(0,0,0,0)}function Ci(t,e){var n=new Date(t);return n.setDate(n.getDate()+e)}function xi(t,e){var n=new Date(t),i=n.getMonth()+e,r=i%12;r<0&&(r+=12);var s=n.setMonth(i);return n.getMonth()!==r?n.setDate(0):s}function Ti(t,e){var n=new Date(t),i=n.getMonth(),r=n.setFullYear(n.getFullYear()+e);return 1===i&&2===n.getMonth()?n.setDate(0):r}function Si(t,e){return(t-e+7)%7}function Ii(t,e){var n=arguments.length>2&&void 0!==arguments[2]?arguments[2]:0,i=new Date(t).getDay();return Ci(t,Si(e,n)-Si(i,n))}function Di(t,e){var n=new Date(t).getFullYear();return Math.floor(n/e)*e}"undefined"!=typeof window&&(window.CopyClipboard=Yn,window.initClipboards=Xn);var Ai=/dd?|DD?|mm?|MM?|yy?(?:yy)?/,Li=/[\s!-/:-@[-`{-~]+/,Oi={},Ni={y:function(t,e){return new Date(t).setFullYear(parseInt(e,10))},m:function(t,e,n){var i=new Date(t),r=parseInt(e,10)-1;if(isNaN(r)){if(!e)return NaN;var s=e.toLowerCase(),o=function(t){return t.toLowerCase().startsWith(s)};if((r=n.monthsShort.findIndex(o))<0&&(r=n.months.findIndex(o)),r<0)return NaN}return i.setMonth(r),i.getMonth()!==Ri(r)?i.setDate(0):i.getTime()},d:function(t,e){return new Date(t).setDate(parseInt(e,10))}},Mi={d:function(t){return t.getDate()},dd:function(t){return Pi(t.getDate(),2)},D:function(t,e){return e.daysShort[t.getDay()]},DD:function(t,e){return e.days[t.getDay()]},m:function(t){return t.getMonth()+1},mm:function(t){return Pi(t.getMonth()+1,2)},M:function(t,e){return e.monthsShort[t.getMonth()]},MM:function(t,e){return e.months[t.getMonth()]},y:function(t){return t.getFullYear()},yy:function(t){return Pi(t.getFullYear(),2).slice(-2)},yyyy:function(t){return Pi(t.getFullYear(),4)}};function Ri(t){return t>-1?t%12:Ri(t+12)}function Pi(t,e){return t.toString().padStart(e,"0")}function Vi(t){if("string"!=typeof t)throw new Error("Invalid date format.");if(t in Oi)return Oi[t];var e=t.split(Ai),n=t.match(new RegExp(Ai,"g"));if(0===e.length||!n)throw new Error("Invalid date format.");var i=n.map((function(t){return Mi[t]})),r=Object.keys(Ni).reduce((function(t,e){return n.find((function(t){return"D"!==t[0]&&t[0].toLowerCase()===e}))&&t.push(e),t}),[]);return Oi[t]={parser:function(t,e){var i=t.split(Li).reduce((function(t,e,i){if(e.length>0&&n[i]){var r=n[i][0];"M"===r?t.m=e:"D"!==r&&(t[r]=e)}return t}),{});return r.reduce((function(t,n){var r=Ni[n](t,i[n],e);return isNaN(r)?t:r}),Ei())},formatter:function(t,n){return i.reduce((function(i,r,s){return i+"".concat(e[s]).concat(r(t,n))}),"")+pi(e)}}}function Fi(t,e,n){if(t instanceof Date||"number"==typeof t){var i=_i(t);return isNaN(i)?void 0:i}if(t){if("today"===t)return Ei();if(e&&e.toValue){var r=e.toValue(t,e,n);return isNaN(r)?void 0:_i(r)}return Vi(e).parser(t,n)}}function Bi(t,e,n){if(isNaN(t)||!t&&0!==t)return"";var i="number"==typeof t?new Date(t):t;return e.toDisplay?e.toDisplay(i,e,n):Vi(e).formatter(i,n)}var ji=new WeakMap,Ui=EventTarget.prototype,qi=Ui.addEventListener,Hi=Ui.removeEventListener;function zi(t,e){var n=ji.get(t);n||(n=[],ji.set(t,n)),e.forEach((function(t){qi.call.apply(qi,li(t)),n.push(t)}))}function $i(t){var e=ji.get(t);e&&(e.forEach((function(t){Hi.call.apply(Hi,li(t))})),ji.delete(t))}if(!Event.prototype.composedPath){var Ki=function t(e){var n,i=arguments.length>1&&void 0!==arguments[1]?arguments[1]:[];return i.push(e),e.parentNode?n=e.parentNode:e.host?n=e.host:e.defaultView&&(n=e.defaultView),n?t(n,i):i};Event.prototype.composedPath=function(){return Ki(this.target)}}function Gi(t,e,n){var i=arguments.length>3&&void 0!==arguments[3]?arguments[3]:0,r=t[i];return e(r)?r:r!==n&&r.parentElement?Gi(t,e,n,i+1):void 0}function Wi(t,e){var n="function"==typeof e?e:function(t){return t.matches(e)};return Gi(t.composedPath(),n,t.currentTarget)}var Qi={en:{days:["Sunday","Monday","Tuesday","Wednesday","Thursday","Friday","Saturday"],daysShort:["Sun","Mon","Tue","Wed","Thu","Fri","Sat"],daysMin:["Su","Mo","Tu","We","Th","Fr","Sa"],months:["January","February","March","April","May","June","July","August","September","October","November","December"],monthsShort:["Jan","Feb","Mar","Apr","May","Jun","Jul","Aug","Sep","Oct","Nov","Dec"],today:"Today",clear:"Clear",titleFormat:"MM y"}},Yi={autohide:!1,beforeShowDay:null,beforeShowDecade:null,beforeShowMonth:null,beforeShowYear:null,calendarWeeks:!1,clearBtn:!1,dateDelimiter:",",datesDisabled:[],daysOfWeekDisabled:[],daysOfWeekHighlighted:[],defaultViewDate:void 0,disableTouchKeyboard:!1,format:"mm/dd/yyyy",language:"en",maxDate:null,maxNumberOfDates:1,maxView:3,minDate:null,nextArrow:'<svg class="w-4 h-4 rtl:rotate-180 text-gray-800 dark:text-white" aria-hidden="true" xmlns="http://www.w3.org/2000/svg" fill="none" viewBox="0 0 14 10"><path stroke="currentColor" stroke-linecap="round" stroke-linejoin="round" stroke-width="2" d="M1 5h12m0 0L9 1m4 4L9 9"/></svg>',orientation:"auto",pickLevel:0,prevArrow:'<svg class="w-4 h-4 rtl:rotate-180 text-gray-800 dark:text-white" aria-hidden="true" xmlns="http://www.w3.org/2000/svg" fill="none" viewBox="0 0 14 10"><path stroke="currentColor" stroke-linecap="round" stroke-linejoin="round" stroke-width="2" d="M13 5H1m0 0 4 4M1 5l4-4"/></svg>',showDaysOfWeek:!0,showOnClick:!0,showOnFocus:!0,startView:0,title:"",todayBtn:!1,todayBtnMode:0,todayHighlight:!1,updateOnBlur:!0,weekStart:0},Xi=null;function Ji(t){return null==Xi&&(Xi=document.createRange()),Xi.createContextualFragment(t)}function Zi(t){"none"!==t.style.display&&(t.style.display&&(t.dataset.styleDisplay=t.style.display),t.style.display="none")}function tr(t){"none"===t.style.display&&(t.dataset.styleDisplay?(t.style.display=t.dataset.styleDisplay,delete t.dataset.styleDisplay):t.style.display="")}function er(t){t.firstChild&&(t.removeChild(t.firstChild),er(t))}var nr=Yi.language,ir=Yi.format,rr=Yi.weekStart;function sr(t,e){return t.length<6&&e>=0&&e<7?gi(t,e):t}function or(t){return(t+6)%7}function ar(t,e,n,i){var r=Fi(t,e,n);return void 0!==r?r:i}function cr(t,e){var n=arguments.length>2&&void 0!==arguments[2]?arguments[2]:3,i=parseInt(t,10);return i>=0&&i<=n?i:e}function lr(t,e){var n,i=Object.assign({},t),r={},s=e.constructor.locales,o=e.config||{},a=o.format,c=o.language,l=o.locale,u=o.maxDate,h=o.maxView,d=o.minDate,f=o.pickLevel,p=o.startView,g=o.weekStart;if(i.language&&(i.language!==c&&(s[i.language]?n=i.language:void 0===s[n=i.language.split("-")[0]]&&(n=!1)),delete i.language,n)){c=r.language=n;var m=l||s[nr];l=Object.assign({format:ir,weekStart:rr},s[nr]),c!==nr&&Object.assign(l,s[c]),r.locale=l,a===m.format&&(a=r.format=l.format),g===m.weekStart&&(g=r.weekStart=l.weekStart,r.weekEnd=or(l.weekStart))}if(i.format){var y="function"==typeof i.format.toDisplay,v="function"==typeof i.format.toValue,b=Ai.test(i.format);(y&&v||b)&&(a=r.format=i.format),delete i.format}var w=d,_=u;if(void 0!==i.minDate&&(w=null===i.minDate?ki(0,0,1):ar(i.minDate,a,l,w),delete i.minDate),void 0!==i.maxDate&&(_=null===i.maxDate?void 0:ar(i.maxDate,a,l,_),delete i.maxDate),_<w?(d=r.minDate=_,u=r.maxDate=w):(d!==w&&(d=r.minDate=w),u!==_&&(u=r.maxDate=_)),i.datesDisabled&&(r.datesDisabled=i.datesDisabled.reduce((function(t,e){var n=Fi(e,a,l);return void 0!==n?gi(t,n):t}),[]),delete i.datesDisabled),void 0!==i.defaultViewDate){var E=Fi(i.defaultViewDate,a,l);void 0!==E&&(r.defaultViewDate=E),delete i.defaultViewDate}if(void 0!==i.weekStart){var k=Number(i.weekStart)%7;isNaN(k)||(g=r.weekStart=k,r.weekEnd=or(k)),delete i.weekStart}if(i.daysOfWeekDisabled&&(r.daysOfWeekDisabled=i.daysOfWeekDisabled.reduce(sr,[]),delete i.daysOfWeekDisabled),i.daysOfWeekHighlighted&&(r.daysOfWeekHighlighted=i.daysOfWeekHighlighted.reduce(sr,[]),delete i.daysOfWeekHighlighted),void 0!==i.maxNumberOfDates){var C=parseInt(i.maxNumberOfDates,10);C>=0&&(r.maxNumberOfDates=C,r.multidate=1!==C),delete i.maxNumberOfDates}i.dateDelimiter&&(r.dateDelimiter=String(i.dateDelimiter),delete i.dateDelimiter);var x=f;void 0!==i.pickLevel&&(x=cr(i.pickLevel,2),delete i.pickLevel),x!==f&&(f=r.pickLevel=x);var T=h;void 0!==i.maxView&&(T=cr(i.maxView,h),delete i.maxView),(T=f>T?f:T)!==h&&(h=r.maxView=T);var S=p;if(void 0!==i.startView&&(S=cr(i.startView,S),delete i.startView),S<f?S=f:S>h&&(S=h),S!==p&&(r.startView=S),i.prevArrow){var I=Ji(i.prevArrow);I.childNodes.length>0&&(r.prevArrow=I.childNodes),delete i.prevArrow}if(i.nextArrow){var D=Ji(i.nextArrow);D.childNodes.length>0&&(r.nextArrow=D.childNodes),delete i.nextArrow}if(void 0!==i.disableTouchKeyboard&&(r.disableTouchKeyboard="ontouchstart"in document&&!!i.disableTouchKeyboard,delete i.disableTouchKeyboard),i.orientation){var A=i.orientation.toLowerCase().split(/\s+/g);r.orientation={x:A.find((function(t){return"left"===t||"right"===t}))||"auto",y:A.find((function(t){return"top"===t||"bottom"===t}))||"auto"},delete i.orientation}if(void 0!==i.todayBtnMode){switch(i.todayBtnMode){case 0:case 1:r.todayBtnMode=i.todayBtnMode}delete i.todayBtnMode}return Object.keys(i).forEach((function(t){void 0!==i[t]&&fi(Yi,t)&&(r[t]=i[t])})),r}var ur=wi('<div class="datepicker hidden">\n  <div class="datepicker-picker inline-block rounded-lg bg-white dark:bg-gray-700 shadow-lg p-4">\n    <div class="datepicker-header">\n      <div class="datepicker-title bg-white dark:bg-gray-700 dark:text-white px-2 py-3 text-center font-semibold"></div>\n      <div class="datepicker-controls flex justify-between mb-2">\n        <button type="button" class="bg-white dark:bg-gray-700 rounded-lg text-gray-500 dark:text-white hover:bg-gray-100 dark:hover:bg-gray-600 hover:text-gray-900 dark:hover:text-white text-lg p-2.5 focus:outline-none focus:ring-2 focus:ring-gray-200 prev-btn"></button>\n        <button type="button" class="text-sm rounded-lg text-gray-900 dark:text-white bg-white dark:bg-gray-700 font-semibold py-2.5 px-5 hover:bg-gray-100 dark:hover:bg-gray-600 focus:outline-none focus:ring-2 focus:ring-gray-200 view-switch"></button>\n        <button type="button" class="bg-white dark:bg-gray-700 rounded-lg text-gray-500 dark:text-white hover:bg-gray-100 dark:hover:bg-gray-600 hover:text-gray-900 dark:hover:text-white text-lg p-2.5 focus:outline-none focus:ring-2 focus:ring-gray-200 next-btn"></button>\n      </div>\n    </div>\n    <div class="datepicker-main p-1"></div>\n    <div class="datepicker-footer">\n      <div class="datepicker-controls flex space-x-2 rtl:space-x-reverse mt-2">\n        <button type="button" class="%buttonClass% today-btn text-white bg-blue-700 !bg-primary-700 dark:bg-blue-600 dark:!bg-primary-600 hover:bg-blue-800 hover:!bg-primary-800 dark:hover:bg-blue-700 dark:hover:!bg-primary-700 focus:ring-4 focus:ring-blue-300 focus:!ring-primary-300 font-medium rounded-lg text-sm px-5 py-2 text-center w-1/2"></button>\n        <button type="button" class="%buttonClass% clear-btn text-gray-900 dark:text-white bg-white dark:bg-gray-700 border border-gray-300 dark:border-gray-600 hover:bg-gray-100 dark:hover:bg-gray-600 focus:ring-4 focus:ring-blue-300 focus:!ring-primary-300 font-medium rounded-lg text-sm px-5 py-2 text-center w-1/2"></button>\n      </div>\n    </div>\n  </div>\n</div>'),hr=wi('<div class="days">\n  <div class="days-of-week grid grid-cols-7 mb-1">'.concat(bi("span",7,{class:"dow block flex-1 leading-9 border-0 rounded-lg cursor-default text-center text-gray-900 font-semibold text-sm"}),'</div>\n  <div class="datepicker-grid w-64 grid grid-cols-7">').concat(bi("span",42,{class:"block flex-1 leading-9 border-0 rounded-lg cursor-default text-center text-gray-900 font-semibold text-sm h-6 leading-6 text-sm font-medium text-gray-500 dark:text-gray-400"}),"</div>\n</div>")),dr=wi('<div class="calendar-weeks">\n  <div class="days-of-week flex"><span class="dow h-6 leading-6 text-sm font-medium text-gray-500 dark:text-gray-400"></span></div>\n  <div class="weeks">'.concat(bi("span",6,{class:"week block flex-1 leading-9 border-0 rounded-lg cursor-default text-center text-gray-900 font-semibold text-sm"}),"</div>\n</div>")),fr=function(){return ni((function t(e,n){ti(this,t),Object.assign(this,n,{picker:e,element:Ji('<div class="datepicker-view flex"></div>').firstChild,selected:[]}),this.init(this.picker.datepicker.config)}),[{key:"init",value:function(t){void 0!==t.pickLevel&&(this.isMinView=this.id===t.pickLevel),this.setOptions(t),this.updateFocus(),this.updateSelection()}},{key:"performBeforeHook",value:function(t,e,n){var i=this.beforeShow(new Date(n));switch(hi(i)){case"boolean":i={enabled:i};break;case"string":i={classes:i}}if(i){if(!1===i.enabled&&(t.classList.add("disabled"),gi(this.disabled,e)),i.classes){var r,s=i.classes.split(/\s+/);(r=t.classList).add.apply(r,li(s)),s.includes("disabled")&&gi(this.disabled,e)}i.content&&function(t,e){er(t),e instanceof DocumentFragment?t.appendChild(e):"string"==typeof e?t.appendChild(Ji(e)):"function"==typeof e.forEach&&e.forEach((function(e){t.appendChild(e)}))}(t,i.content)}}}])}(),pr=function(){function t(e){return ti(this,t),Zn(this,t,[e,{id:0,name:"days",cellClass:"day"}])}return si(t,fr),ni(t,[{key:"init",value:function(e){if(!(arguments.length>1&&void 0!==arguments[1])||arguments[1]){var n=Ji(hr).firstChild;this.dow=n.firstChild,this.grid=n.lastChild,this.element.appendChild(n)}ii(ri(t.prototype),"init",this).call(this,e)}},{key:"setOptions",value:function(t){var e,n=this;if(fi(t,"minDate")&&(this.minDate=t.minDate),fi(t,"maxDate")&&(this.maxDate=t.maxDate),t.datesDisabled&&(this.datesDisabled=t.datesDisabled),t.daysOfWeekDisabled&&(this.daysOfWeekDisabled=t.daysOfWeekDisabled,e=!0),t.daysOfWeekHighlighted&&(this.daysOfWeekHighlighted=t.daysOfWeekHighlighted),void 0!==t.todayHighlight&&(this.todayHighlight=t.todayHighlight),void 0!==t.weekStart&&(this.weekStart=t.weekStart,this.weekEnd=t.weekEnd,e=!0),t.locale){var i=this.locale=t.locale;this.dayNames=i.daysMin,this.switchLabelFormat=i.titleFormat,e=!0}if(void 0!==t.beforeShowDay&&(this.beforeShow="function"==typeof t.beforeShowDay?t.beforeShowDay:void 0),void 0!==t.calendarWeeks)if(t.calendarWeeks&&!this.calendarWeeks){var r=Ji(dr).firstChild;this.calendarWeeks={element:r,dow:r.firstChild,weeks:r.lastChild},this.element.insertBefore(r,this.element.firstChild)}else this.calendarWeeks&&!t.calendarWeeks&&(this.element.removeChild(this.calendarWeeks.element),this.calendarWeeks=null);void 0!==t.showDaysOfWeek&&(t.showDaysOfWeek?(tr(this.dow),this.calendarWeeks&&tr(this.calendarWeeks.dow)):(Zi(this.dow),this.calendarWeeks&&Zi(this.calendarWeeks.dow))),e&&Array.from(this.dow.children).forEach((function(t,e){var i=(n.weekStart+e)%7;t.textContent=n.dayNames[i],t.className=n.daysOfWeekDisabled.includes(i)?"dow disabled text-center h-6 leading-6 text-sm font-medium text-gray-500 dark:text-gray-400 cursor-not-allowed":"dow text-center h-6 leading-6 text-sm font-medium text-gray-500 dark:text-gray-400"}))}},{key:"updateFocus",value:function(){var t=new Date(this.picker.viewDate),e=t.getFullYear(),n=t.getMonth(),i=ki(e,n,1),r=Ii(i,this.weekStart,this.weekStart);this.first=i,this.last=ki(e,n+1,0),this.start=r,this.focused=this.picker.viewDate}},{key:"updateSelection",value:function(){var t=this.picker.datepicker,e=t.dates,n=t.rangepicker;this.selected=e,n&&(this.range=n.dates)}},{key:"render",value:function(){var t=this;this.today=this.todayHighlight?Ei():void 0,this.disabled=li(this.datesDisabled);var e=Bi(this.focused,this.switchLabelFormat,this.locale);if(this.picker.setViewSwitchLabel(e),this.picker.setPrevBtnDisabled(this.first<=this.minDate),this.picker.setNextBtnDisabled(this.last>=this.maxDate),this.calendarWeeks){var n=Ii(this.first,1,1);Array.from(this.calendarWeeks.weeks.children).forEach((function(t,e){t.textContent=function(t){var e=Ii(t,4,1),n=Ii(new Date(e).setMonth(0,4),4,1);return Math.round((e-n)/6048e5)+1}(Ci(n,7*e))}))}Array.from(this.grid.children).forEach((function(e,n){var i=e.classList,r=Ci(t.start,n),s=new Date(r),o=s.getDay();if(e.className="datepicker-cell hover:bg-gray-100 dark:hover:bg-gray-600 block flex-1 leading-9 border-0 rounded-lg cursor-pointer text-center text-gray-900 dark:text-white font-semibold text-sm ".concat(t.cellClass),e.dataset.date=r,e.textContent=s.getDate(),r<t.first?i.add("prev","text-gray-500","dark:text-white"):r>t.last&&i.add("next","text-gray-500","dark:text-white"),t.today===r&&i.add("today","bg-gray-100","dark:bg-gray-600"),(r<t.minDate||r>t.maxDate||t.disabled.includes(r))&&(i.add("disabled","cursor-not-allowed","text-gray-400","dark:text-gray-500"),i.remove("hover:bg-gray-100","dark:hover:bg-gray-600","text-gray-900","dark:text-white","cursor-pointer")),t.daysOfWeekDisabled.includes(o)&&(i.add("disabled","cursor-not-allowed","text-gray-400","dark:text-gray-500"),i.remove("hover:bg-gray-100","dark:hover:bg-gray-600","text-gray-900","dark:text-white","cursor-pointer"),gi(t.disabled,r)),t.daysOfWeekHighlighted.includes(o)&&i.add("highlighted"),t.range){var a=ci(t.range,2),c=a[0],l=a[1];r>c&&r<l&&(i.add("range","bg-gray-200","dark:bg-gray-600"),i.remove("rounded-lg","rounded-l-lg","rounded-r-lg")),r===c&&(i.add("range-start","bg-gray-100","dark:bg-gray-600","rounded-l-lg"),i.remove("rounded-lg","rounded-r-lg")),r===l&&(i.add("range-end","bg-gray-100","dark:bg-gray-600","rounded-r-lg"),i.remove("rounded-lg","rounded-l-lg"))}t.selected.includes(r)&&(i.add("selected","bg-blue-700","!bg-primary-700","text-white","dark:bg-blue-600","dark:!bg-primary-600","dark:text-white"),i.remove("text-gray-900","text-gray-500","hover:bg-gray-100","dark:text-white","dark:hover:bg-gray-600","dark:bg-gray-600","bg-gray-100","bg-gray-200")),r===t.focused&&i.add("focused"),t.beforeShow&&t.performBeforeHook(e,r,r)}))}},{key:"refresh",value:function(){var t=this,e=ci(this.range||[],2),n=e[0],i=e[1];this.grid.querySelectorAll(".range, .range-start, .range-end, .selected, .focused").forEach((function(t){t.classList.remove("range","range-start","range-end","selected","bg-blue-700","!bg-primary-700","text-white","dark:bg-blue-600","dark:!bg-primary-600","dark:text-white","focused"),t.classList.add("text-gray-900","rounded-lg","dark:text-white")})),Array.from(this.grid.children).forEach((function(e){var r=Number(e.dataset.date),s=e.classList;s.remove("bg-gray-200","dark:bg-gray-600","rounded-l-lg","rounded-r-lg"),r>n&&r<i&&(s.add("range","bg-gray-200","dark:bg-gray-600"),s.remove("rounded-lg")),r===n&&(s.add("range-start","bg-gray-200","dark:bg-gray-600","rounded-l-lg"),s.remove("rounded-lg")),r===i&&(s.add("range-end","bg-gray-200","dark:bg-gray-600","rounded-r-lg"),s.remove("rounded-lg")),t.selected.includes(r)&&(s.add("selected","bg-blue-700","!bg-primary-700","text-white","dark:bg-blue-600","dark:!bg-primary-600","dark:text-white"),s.remove("text-gray-900","hover:bg-gray-100","dark:text-white","dark:hover:bg-gray-600","bg-gray-100","bg-gray-200","dark:bg-gray-600")),r===t.focused&&s.add("focused")}))}},{key:"refreshFocus",value:function(){var t=Math.round((this.focused-this.start)/864e5);this.grid.querySelectorAll(".focused").forEach((function(t){t.classList.remove("focused")})),this.grid.children[t].classList.add("focused")}}])}();function gr(t,e){if(t&&t[0]&&t[1]){var n=ci(t,2),i=ci(n[0],2),r=i[0],s=i[1],o=ci(n[1],2),a=o[0],c=o[1];if(!(r>e||a<e))return[r===e?s:-1,a===e?c:12]}}var mr=function(){function t(e){return ti(this,t),Zn(this,t,[e,{id:1,name:"months",cellClass:"month"}])}return si(t,fr),ni(t,[{key:"init",value:function(e){(!(arguments.length>1&&void 0!==arguments[1])||arguments[1])&&(this.grid=this.element,this.element.classList.add("months","datepicker-grid","w-64","grid","grid-cols-4"),this.grid.appendChild(Ji(bi("span",12,{"data-month":function(t){return t}})))),ii(ri(t.prototype),"init",this).call(this,e)}},{key:"setOptions",value:function(t){if(t.locale&&(this.monthNames=t.locale.monthsShort),fi(t,"minDate"))if(void 0===t.minDate)this.minYear=this.minMonth=this.minDate=void 0;else{var e=new Date(t.minDate);this.minYear=e.getFullYear(),this.minMonth=e.getMonth(),this.minDate=e.setDate(1)}if(fi(t,"maxDate"))if(void 0===t.maxDate)this.maxYear=this.maxMonth=this.maxDate=void 0;else{var n=new Date(t.maxDate);this.maxYear=n.getFullYear(),this.maxMonth=n.getMonth(),this.maxDate=ki(this.maxYear,this.maxMonth+1,0)}void 0!==t.beforeShowMonth&&(this.beforeShow="function"==typeof t.beforeShowMonth?t.beforeShowMonth:void 0)}},{key:"updateFocus",value:function(){var t=new Date(this.picker.viewDate);this.year=t.getFullYear(),this.focused=t.getMonth()}},{key:"updateSelection",value:function(){var t=this.picker.datepicker,e=t.dates,n=t.rangepicker;this.selected=e.reduce((function(t,e){var n=new Date(e),i=n.getFullYear(),r=n.getMonth();return void 0===t[i]?t[i]=[r]:gi(t[i],r),t}),{}),n&&n.dates&&(this.range=n.dates.map((function(t){var e=new Date(t);return isNaN(e)?void 0:[e.getFullYear(),e.getMonth()]})))}},{key:"render",value:function(){var t=this;this.disabled=[],this.picker.setViewSwitchLabel(this.year),this.picker.setPrevBtnDisabled(this.year<=this.minYear),this.picker.setNextBtnDisabled(this.year>=this.maxYear);var e=this.selected[this.year]||[],n=this.year<this.minYear||this.year>this.maxYear,i=this.year===this.minYear,r=this.year===this.maxYear,s=gr(this.range,this.year);Array.from(this.grid.children).forEach((function(o,a){var c=o.classList,l=ki(t.year,a,1);if(o.className="datepicker-cell hover:bg-gray-100 dark:hover:bg-gray-600 block flex-1 leading-9 border-0 rounded-lg cursor-pointer text-center text-gray-900 dark:text-white font-semibold text-sm ".concat(t.cellClass),t.isMinView&&(o.dataset.date=l),o.textContent=t.monthNames[a],(n||i&&a<t.minMonth||r&&a>t.maxMonth)&&c.add("disabled"),s){var u=ci(s,2),h=u[0],d=u[1];a>h&&a<d&&c.add("range"),a===h&&c.add("range-start"),a===d&&c.add("range-end")}e.includes(a)&&(c.add("selected","bg-blue-700","!bg-primary-700","text-white","dark:bg-blue-600","dark:!bg-primary-600","dark:text-white"),c.remove("text-gray-900","hover:bg-gray-100","dark:text-white","dark:hover:bg-gray-600")),a===t.focused&&c.add("focused"),t.beforeShow&&t.performBeforeHook(o,a,l)}))}},{key:"refresh",value:function(){var t=this,e=this.selected[this.year]||[],n=ci(gr(this.range,this.year)||[],2),i=n[0],r=n[1];this.grid.querySelectorAll(".range, .range-start, .range-end, .selected, .focused").forEach((function(t){t.classList.remove("range","range-start","range-end","selected","bg-blue-700","!bg-primary-700","dark:bg-blue-600","dark:!bg-primary-700","dark:text-white","text-white","focused"),t.classList.add("text-gray-900","hover:bg-gray-100","dark:text-white","dark:hover:bg-gray-600")})),Array.from(this.grid.children).forEach((function(n,s){var o=n.classList;s>i&&s<r&&o.add("range"),s===i&&o.add("range-start"),s===r&&o.add("range-end"),e.includes(s)&&(o.add("selected","bg-blue-700","!bg-primary-700","text-white","dark:bg-blue-600","dark:!bg-primary-600","dark:text-white"),o.remove("text-gray-900","hover:bg-gray-100","dark:text-white","dark:hover:bg-gray-600")),s===t.focused&&o.add("focused")}))}},{key:"refreshFocus",value:function(){this.grid.querySelectorAll(".focused").forEach((function(t){t.classList.remove("focused")})),this.grid.children[this.focused].classList.add("focused")}}])}();var yr=function(){function t(e,n){return ti(this,t),Zn(this,t,[e,n])}return si(t,fr),ni(t,[{key:"init",value:function(e){(!(arguments.length>1&&void 0!==arguments[1])||arguments[1])&&(this.navStep=10*this.step,this.beforeShowOption="beforeShow".concat(li(this.cellClass).reduce((function(t,e,n){return t+(n?e:e.toUpperCase())}),"")),this.grid=this.element,this.element.classList.add(this.name,"datepicker-grid","w-64","grid","grid-cols-4"),this.grid.appendChild(Ji(bi("span",12)))),ii(ri(t.prototype),"init",this).call(this,e)}},{key:"setOptions",value:function(t){if(fi(t,"minDate")&&(void 0===t.minDate?this.minYear=this.minDate=void 0:(this.minYear=Di(t.minDate,this.step),this.minDate=ki(this.minYear,0,1))),fi(t,"maxDate")&&(void 0===t.maxDate?this.maxYear=this.maxDate=void 0:(this.maxYear=Di(t.maxDate,this.step),this.maxDate=ki(this.maxYear,11,31))),void 0!==t[this.beforeShowOption]){var e=t[this.beforeShowOption];this.beforeShow="function"==typeof e?e:void 0}}},{key:"updateFocus",value:function(){var t=new Date(this.picker.viewDate),e=Di(t,this.navStep),n=e+9*this.step;this.first=e,this.last=n,this.start=e-this.step,this.focused=Di(t,this.step)}},{key:"updateSelection",value:function(){var t=this,e=this.picker.datepicker,n=e.dates,i=e.rangepicker;this.selected=n.reduce((function(e,n){return gi(e,Di(n,t.step))}),[]),i&&i.dates&&(this.range=i.dates.map((function(e){if(void 0!==e)return Di(e,t.step)})))}},{key:"render",value:function(){var t=this;this.disabled=[],this.picker.setViewSwitchLabel("".concat(this.first,"-").concat(this.last)),this.picker.setPrevBtnDisabled(this.first<=this.minYear),this.picker.setNextBtnDisabled(this.last>=this.maxYear),Array.from(this.grid.children).forEach((function(e,n){var i=e.classList,r=t.start+n*t.step,s=ki(r,0,1);if(e.className="datepicker-cell hover:bg-gray-100 dark:hover:bg-gray-600 block flex-1 leading-9 border-0 rounded-lg cursor-pointer text-center text-gray-900 dark:text-white font-semibold text-sm ".concat(t.cellClass),t.isMinView&&(e.dataset.date=s),e.textContent=e.dataset.year=r,0===n?i.add("prev"):11===n&&i.add("next"),(r<t.minYear||r>t.maxYear)&&i.add("disabled"),t.range){var o=ci(t.range,2),a=o[0],c=o[1];r>a&&r<c&&i.add("range"),r===a&&i.add("range-start"),r===c&&i.add("range-end")}t.selected.includes(r)&&(i.add("selected","bg-blue-700","!bg-primary-700","text-white","dark:bg-blue-600","dark:!bg-primary-600","dark:text-white"),i.remove("text-gray-900","hover:bg-gray-100","dark:text-white","dark:hover:bg-gray-600")),r===t.focused&&i.add("focused"),t.beforeShow&&t.performBeforeHook(e,r,s)}))}},{key:"refresh",value:function(){var t=this,e=ci(this.range||[],2),n=e[0],i=e[1];this.grid.querySelectorAll(".range, .range-start, .range-end, .selected, .focused").forEach((function(t){t.classList.remove("range","range-start","range-end","selected","bg-blue-700","!bg-primary-700","text-white","dark:bg-blue-600","dark!bg-primary-600","dark:text-white","focused")})),Array.from(this.grid.children).forEach((function(e){var r=Number(e.textContent),s=e.classList;r>n&&r<i&&s.add("range"),r===n&&s.add("range-start"),r===i&&s.add("range-end"),t.selected.includes(r)&&(s.add("selected","bg-blue-700","!bg-primary-700","text-white","dark:bg-blue-600","dark:!bg-primary-600","dark:text-white"),s.remove("text-gray-900","hover:bg-gray-100","dark:text-white","dark:hover:bg-gray-600")),r===t.focused&&s.add("focused")}))}},{key:"refreshFocus",value:function(){var t=Math.round((this.focused-this.start)/this.step);this.grid.querySelectorAll(".focused").forEach((function(t){t.classList.remove("focused")})),this.grid.children[t].classList.add("focused")}}])}();function vr(t,e){var n={date:t.getDate(),viewDate:new Date(t.picker.viewDate),viewId:t.picker.currentView.id,datepicker:t};t.element.dispatchEvent(new CustomEvent(e,{detail:n}))}function br(t,e){var n,i=t.config,r=i.minDate,s=i.maxDate,o=t.picker,a=o.currentView,c=o.viewDate;switch(a.id){case 0:n=xi(c,e);break;case 1:n=Ti(c,e);break;default:n=Ti(c,e*a.navStep)}n=vi(n,r,s),t.picker.changeFocus(n).render()}function wr(t){var e=t.picker.currentView.id;e!==t.config.maxView&&t.picker.changeView(e+1).render()}function _r(t){t.config.updateOnBlur?t.update({autohide:!0}):(t.refresh("input"),t.hide())}function Er(t,e){var n=t.picker,i=new Date(n.viewDate),r=n.currentView.id,s=1===r?xi(i,e-i.getMonth()):Ti(i,e-i.getFullYear());n.changeFocus(s).changeView(r-1).render()}function kr(t){var e=t.picker,n=Ei();if(1===t.config.todayBtnMode){if(t.config.autohide)return void t.setDate(n);t.setDate(n,{render:!1}),e.update()}e.viewDate!==n&&e.changeFocus(n),e.changeView(0).render()}function Cr(t){t.setDate({clear:!0})}function xr(t){wr(t)}function Tr(t){br(t,-1)}function Sr(t){br(t,1)}function Ir(t,e){var n=Wi(e,".datepicker-cell");if(n&&!n.classList.contains("disabled")){var i=t.picker.currentView,r=i.id;i.isMinView?t.setDate(Number(n.dataset.date)):Er(t,Number(1===r?n.dataset.month:n.dataset.year))}}function Dr(t){t.inline||t.config.disableTouchKeyboard||t.inputField.focus()}function Ar(t,e){if(void 0!==e.title&&(e.title?(t.controls.title.textContent=e.title,tr(t.controls.title)):(t.controls.title.textContent="",Zi(t.controls.title))),e.prevArrow){var n=t.controls.prevBtn;er(n),e.prevArrow.forEach((function(t){n.appendChild(t.cloneNode(!0))}))}if(e.nextArrow){var i=t.controls.nextBtn;er(i),e.nextArrow.forEach((function(t){i.appendChild(t.cloneNode(!0))}))}if(e.locale&&(t.controls.todayBtn.textContent=e.locale.today,t.controls.clearBtn.textContent=e.locale.clear),void 0!==e.todayBtn&&(e.todayBtn?tr(t.controls.todayBtn):Zi(t.controls.todayBtn)),fi(e,"minDate")||fi(e,"maxDate")){var r=t.datepicker.config,s=r.minDate,o=r.maxDate;t.controls.todayBtn.disabled=!yi(Ei(),s,o)}void 0!==e.clearBtn&&(e.clearBtn?tr(t.controls.clearBtn):Zi(t.controls.clearBtn))}function Lr(t){var e=t.dates,n=t.config;return vi(e.length>0?pi(e):n.defaultViewDate,n.minDate,n.maxDate)}function Or(t,e){var n=new Date(t.viewDate),i=new Date(e),r=t.currentView,s=r.id,o=r.year,a=r.first,c=r.last,l=i.getFullYear();switch(t.viewDate=e,l!==n.getFullYear()&&vr(t.datepicker,"changeYear"),i.getMonth()!==n.getMonth()&&vr(t.datepicker,"changeMonth"),s){case 0:return e<a||e>c;case 1:return l!==o;default:return l<a||l>c}}function Nr(t){return window.getComputedStyle(t).direction}var Mr=function(){return ni((function t(e){ti(this,t),this.datepicker=e;var n=ur.replace(/%buttonClass%/g,e.config.buttonClass),i=this.element=Ji(n).firstChild,r=ci(i.firstChild.children,3),s=r[0],o=r[1],a=r[2],c=s.firstElementChild,l=ci(s.lastElementChild.children,3),u=l[0],h=l[1],d=l[2],f=ci(a.firstChild.children,2),p={title:c,prevBtn:u,viewSwitch:h,nextBtn:d,todayBtn:f[0],clearBtn:f[1]};this.main=o,this.controls=p;var g=e.inline?"inline":"dropdown";i.classList.add("datepicker-".concat(g)),"dropdown"===g&&i.classList.add("dropdown","absolute","top-0","left-0","z-50","pt-2"),Ar(this,e.config),this.viewDate=Lr(e),zi(e,[[i,"click",Dr.bind(null,e),{capture:!0}],[o,"click",Ir.bind(null,e)],[p.viewSwitch,"click",xr.bind(null,e)],[p.prevBtn,"click",Tr.bind(null,e)],[p.nextBtn,"click",Sr.bind(null,e)],[p.todayBtn,"click",kr.bind(null,e)],[p.clearBtn,"click",Cr.bind(null,e)]]),this.views=[new pr(this),new mr(this),new yr(this,{id:2,name:"years",cellClass:"year",step:1}),new yr(this,{id:3,name:"decades",cellClass:"decade",step:10})],this.currentView=this.views[e.config.startView],this.currentView.render(),this.main.appendChild(this.currentView.element),e.config.container.appendChild(this.element)}),[{key:"setOptions",value:function(t){Ar(this,t),this.views.forEach((function(e){e.init(t,!1)})),this.currentView.render()}},{key:"detach",value:function(){this.datepicker.config.container.removeChild(this.element)}},{key:"show",value:function(){if(!this.active){this.element.classList.add("active","block"),this.element.classList.remove("hidden"),this.active=!0;var t=this.datepicker;if(!t.inline){var e=Nr(t.inputField);e!==Nr(t.config.container)?this.element.dir=e:this.element.dir&&this.element.removeAttribute("dir"),this.place(),t.config.disableTouchKeyboard&&t.inputField.blur()}vr(t,"show")}}},{key:"hide",value:function(){this.active&&(this.datepicker.exitEditMode(),this.element.classList.remove("active","block"),this.element.classList.add("active","block","hidden"),this.active=!1,vr(this.datepicker,"hide"))}},{key:"place",value:function(){var t,e,n,i=this.element,r=i.classList,s=i.style,o=this.datepicker,a=o.config,c=o.inputField,l=a.container,u=this.element.getBoundingClientRect(),h=u.width,d=u.height,f=l.getBoundingClientRect(),p=f.left,g=f.top,m=f.width,y=c.getBoundingClientRect(),v=y.left,b=y.top,w=y.width,_=y.height,E=a.orientation,k=E.x,C=E.y;l===document.body?(t=window.scrollY,e=v+window.scrollX,n=b+t):(e=v-p,n=b-g+(t=l.scrollTop)),"auto"===k&&(e<0?(k="left",e=10):k=e+h>m||"rtl"===Nr(c)?"right":"left"),"right"===k&&(e-=h-w),"auto"===C&&(C=n-d<t?"bottom":"top"),"top"===C?n-=d:n+=_,r.remove("datepicker-orient-top","datepicker-orient-bottom","datepicker-orient-right","datepicker-orient-left"),r.add("datepicker-orient-".concat(C),"datepicker-orient-".concat(k)),s.top=n?"".concat(n,"px"):n,s.left=e?"".concat(e,"px"):e}},{key:"setViewSwitchLabel",value:function(t){this.controls.viewSwitch.textContent=t}},{key:"setPrevBtnDisabled",value:function(t){this.controls.prevBtn.disabled=t}},{key:"setNextBtnDisabled",value:function(t){this.controls.nextBtn.disabled=t}},{key:"changeView",value:function(t){var e=this.currentView,n=this.views[t];return n.id!==e.id&&(this.currentView=n,this._renderMethod="render",vr(this.datepicker,"changeView"),this.main.replaceChild(n.element,e.element)),this}},{key:"changeFocus",value:function(t){return this._renderMethod=Or(this,t)?"render":"refreshFocus",this.views.forEach((function(t){t.updateFocus()})),this}},{key:"update",value:function(){var t=Lr(this.datepicker);return this._renderMethod=Or(this,t)?"render":"refresh",this.views.forEach((function(t){t.updateFocus(),t.updateSelection()})),this}},{key:"render",value:function(){var t=(!(arguments.length>0&&void 0!==arguments[0])||arguments[0])&&this._renderMethod||"render";delete this._renderMethod,this.currentView[t]()}}])}();function Rr(t,e,n,i,r,s){if(yi(t,r,s))return i(t)?Rr(e(t,n),e,n,i,r,s):t}function Pr(t,e,n,i){var r,s,o=t.picker,a=o.currentView,c=a.step||1,l=o.viewDate;switch(a.id){case 0:l=i?Ci(l,7*n):e.ctrlKey||e.metaKey?Ti(l,n):Ci(l,n),r=Ci,s=function(t){return a.disabled.includes(t)};break;case 1:l=xi(l,i?4*n:n),r=xi,s=function(t){var e=new Date(t),n=a.year,i=a.disabled;return e.getFullYear()===n&&i.includes(e.getMonth())};break;default:l=Ti(l,n*(i?4:1)*c),r=Ti,s=function(t){return a.disabled.includes(Di(t,c))}}void 0!==(l=Rr(l,r,n<0?-c:c,s,a.minDate,a.maxDate))&&o.changeFocus(l).render()}function Vr(t,e){if("Tab"!==e.key){var n=t.picker,i=n.currentView,r=i.id,s=i.isMinView;if(n.active)if(t.editMode)switch(e.key){case"Escape":n.hide();break;case"Enter":t.exitEditMode({update:!0,autohide:t.config.autohide});break;default:return}else switch(e.key){case"Escape":n.hide();break;case"ArrowLeft":if(e.ctrlKey||e.metaKey)br(t,-1);else{if(e.shiftKey)return void t.enterEditMode();Pr(t,e,-1,!1)}break;case"ArrowRight":if(e.ctrlKey||e.metaKey)br(t,1);else{if(e.shiftKey)return void t.enterEditMode();Pr(t,e,1,!1)}break;case"ArrowUp":if(e.ctrlKey||e.metaKey)wr(t);else{if(e.shiftKey)return void t.enterEditMode();Pr(t,e,-1,!0)}break;case"ArrowDown":if(e.shiftKey&&!e.ctrlKey&&!e.metaKey)return void t.enterEditMode();Pr(t,e,1,!0);break;case"Enter":s?t.setDate(n.viewDate):n.changeView(r-1).render();break;case"Backspace":case"Delete":return void t.enterEditMode();default:return void(1!==e.key.length||e.ctrlKey||e.metaKey||t.enterEditMode())}else switch(e.key){case"ArrowDown":case"Escape":n.show();break;case"Enter":t.update();break;default:return}e.preventDefault(),e.stopPropagation()}else _r(t)}function Fr(t){t.config.showOnFocus&&!t._showing&&t.show()}function Br(t,e){var n=e.target;(t.picker.active||t.config.showOnClick)&&(n._active=n===document.activeElement,n._clicking=setTimeout((function(){delete n._active,delete n._clicking}),2e3))}function jr(t,e){var n=e.target;n._clicking&&(clearTimeout(n._clicking),delete n._clicking,n._active&&t.enterEditMode(),delete n._active,t.config.showOnClick&&t.show())}function Ur(t,e){e.clipboardData.types.includes("text/plain")&&t.enterEditMode()}function qr(t,e){var n=t.element;if(n===document.activeElement){var i=t.picker.element;Wi(e,(function(t){return t===n||t===i}))||_r(t)}}function Hr(t,e){return t.map((function(t){return Bi(t,e.format,e.locale)})).join(e.dateDelimiter)}function zr(t,e){var n=arguments.length>2&&void 0!==arguments[2]&&arguments[2],i=t.config,r=t.dates,s=t.rangepicker;if(0===e.length)return n?[]:void 0;var o=s&&t===s.datepickers[1],a=e.reduce((function(t,e){var n=Fi(e,i.format,i.locale);if(void 0===n)return t;if(i.pickLevel>0){var r=new Date(n);n=1===i.pickLevel?o?r.setMonth(r.getMonth()+1,0):r.setDate(1):o?r.setFullYear(r.getFullYear()+1,0,0):r.setMonth(0,1)}return!yi(n,i.minDate,i.maxDate)||t.includes(n)||i.datesDisabled.includes(n)||i.daysOfWeekDisabled.includes(new Date(n).getDay())||t.push(n),t}),[]);return 0!==a.length?(i.multidate&&!n&&(a=a.reduce((function(t,e){return r.includes(e)||t.push(e),t}),r.filter((function(t){return!a.includes(t)})))),i.maxNumberOfDates&&a.length>i.maxNumberOfDates?a.slice(-1*i.maxNumberOfDates):a):void 0}function $r(t){var e=arguments.length>1&&void 0!==arguments[1]?arguments[1]:3,n=!(arguments.length>2&&void 0!==arguments[2])||arguments[2],i=t.config,r=t.picker,s=t.inputField;if(2&e){var o=r.active?i.pickLevel:i.startView;r.update().changeView(o).render(n)}1&e&&s&&(s.value=Hr(t.dates,i))}function Kr(t,e,n){var i=n.clear,r=n.render,s=n.autohide;void 0===r&&(r=!0),r?void 0===s&&(s=t.config.autohide):s=!1;var o=zr(t,e,i);o&&(o.toString()!==t.dates.toString()?(t.dates=o,$r(t,r?3:1),vr(t,"changeDate")):$r(t,1),s&&t.hide())}var Gr=function(){return ni((function t(e){var n=arguments.length>1&&void 0!==arguments[1]?arguments[1]:{},i=arguments.length>2&&void 0!==arguments[2]?arguments[2]:void 0;ti(this,t),e.datepicker=this,this.element=e;var r=this.config=Object.assign({buttonClass:n.buttonClass&&String(n.buttonClass)||"button",container:document.body,defaultViewDate:Ei(),maxDate:void 0,minDate:void 0},lr(Yi,this));this._options=n,Object.assign(r,lr(n,this));var s,o,a=this.inline="INPUT"!==e.tagName;if(a)r.container=e,o=mi(e.dataset.date,r.dateDelimiter),delete e.dataset.date;else{var c=n.container?document.querySelector(n.container):null;c&&(r.container=c),(s=this.inputField=e).classList.add("datepicker-input"),o=mi(s.value,r.dateDelimiter)}if(i){var l=i.inputs.indexOf(s),u=i.datepickers;if(l<0||l>1||!Array.isArray(u))throw Error("Invalid rangepicker object.");u[l]=this,Object.defineProperty(this,"rangepicker",{get:function(){return i}})}this.dates=[];var h=zr(this,o);h&&h.length>0&&(this.dates=h),s&&(s.value=Hr(this.dates,r));var d=this.picker=new Mr(this);if(a)this.show();else{var f=qr.bind(null,this);zi(this,[[s,"keydown",Vr.bind(null,this)],[s,"focus",Fr.bind(null,this)],[s,"mousedown",Br.bind(null,this)],[s,"click",jr.bind(null,this)],[s,"paste",Ur.bind(null,this)],[document,"mousedown",f],[document,"touchstart",f],[window,"resize",d.place.bind(d)]])}}),[{key:"active",get:function(){return!(!this.picker||!this.picker.active)}},{key:"pickerElement",get:function(){return this.picker?this.picker.element:void 0}},{key:"setOptions",value:function(t){var e=this.picker,n=lr(t,this);Object.assign(this._options,t),Object.assign(this.config,n),e.setOptions(n),$r(this,3)}},{key:"show",value:function(){if(this.inputField){if(this.inputField.disabled)return;this.inputField!==document.activeElement&&(this._showing=!0,this.inputField.focus(),delete this._showing)}this.picker.show()}},{key:"hide",value:function(){this.inline||(this.picker.hide(),this.picker.update().changeView(this.config.startView).render())}},{key:"destroy",value:function(){return this.hide(),$i(this),this.picker.detach(),this.inline||this.inputField.classList.remove("datepicker-input"),delete this.element.datepicker,this}},{key:"getDate",value:function(){var t=this,e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:void 0,n=e?function(n){return Bi(n,e,t.config.locale)}:function(t){return new Date(t)};return this.config.multidate?this.dates.map(n):this.dates.length>0?n(this.dates[0]):void 0}},{key:"setDate",value:function(){for(var t=arguments.length,e=new Array(t),n=0;n<t;n++)e[n]=arguments[n];var i=[].concat(e),r={},s=pi(e);"object"!==hi(s)||Array.isArray(s)||s instanceof Date||!s||Object.assign(r,i.pop()),Kr(this,Array.isArray(i[0])?i[0]:i,r)}},{key:"update",value:function(){var t=arguments.length>0&&void 0!==arguments[0]?arguments[0]:void 0;if(!this.inline){var e={clear:!0,autohide:!(!t||!t.autohide)};Kr(this,mi(this.inputField.value,this.config.dateDelimiter),e)}}},{key:"refresh",value:function(){var t=arguments.length>0&&void 0!==arguments[0]?arguments[0]:void 0,e=arguments.length>1&&void 0!==arguments[1]&&arguments[1];t&&"string"!=typeof t&&(e=t,t=void 0),$r(this,"picker"===t?2:"input"===t?1:3,!e)}},{key:"enterEditMode",value:function(){this.inline||!this.picker.active||this.editMode||(this.editMode=!0,this.inputField.classList.add("in-edit","border-blue-700","!border-primary-700"))}},{key:"exitEditMode",value:function(){var t=arguments.length>0&&void 0!==arguments[0]?arguments[0]:void 0;if(!this.inline&&this.editMode){var e=Object.assign({update:!1},t);delete this.editMode,this.inputField.classList.remove("in-edit","border-blue-700","!border-primary-700"),e.update&&this.update(e)}}}],[{key:"formatDate",value:function(t,e,n){return Bi(t,e,n&&Qi[n]||Qi.en)}},{key:"parseDate",value:function(t,e,n){return Fi(t,e,n&&Qi[n]||Qi.en)}},{key:"locales",get:function(){return Qi}}])}();function Wr(t){var e=Object.assign({},t);return delete e.inputs,delete e.allowOneSidedRange,delete e.maxNumberOfDates,e}function Qr(t,e,n,i){zi(t,[[n,"changeDate",e]]),new Gr(n,i,t)}function Yr(t,e){if(!t._updating){t._updating=!0;var n=e.target;if(void 0!==n.datepicker){var i=t.datepickers,r={render:!1},s=t.inputs.indexOf(n),o=0===s?1:0,a=i[s].dates[0],c=i[o].dates[0];void 0!==a&&void 0!==c?0===s&&a>c?(i[0].setDate(c,r),i[1].setDate(a,r)):1===s&&a<c&&(i[0].setDate(a,r),i[1].setDate(c,r)):t.allowOneSidedRange||void 0===a&&void 0===c||(r.clear=!0,i[o].setDate(i[s].dates,r)),i[0].picker.update().render(),i[1].picker.update().render(),delete t._updating}}}var Xr=function(){return ni((function t(e){var n=arguments.length>1&&void 0!==arguments[1]?arguments[1]:{};ti(this,t);var i=Array.isArray(n.inputs)?n.inputs:Array.from(e.querySelectorAll("input"));if(!(i.length<2)){e.rangepicker=this,this.element=e,this.inputs=i.slice(0,2),this.allowOneSidedRange=!!n.allowOneSidedRange;var r=Yr.bind(null,this),s=Wr(n),o=[];Object.defineProperty(this,"datepickers",{get:function(){return o}}),Qr(this,r,this.inputs[0],s),Qr(this,r,this.inputs[1],s),Object.freeze(o),o[0].dates.length>0?Yr(this,{target:this.inputs[0]}):o[1].dates.length>0&&Yr(this,{target:this.inputs[1]})}}),[{key:"dates",get:function(){return 2===this.datepickers.length?[this.datepickers[0].dates[0],this.datepickers[1].dates[0]]:void 0}},{key:"setOptions",value:function(t){this.allowOneSidedRange=!!t.allowOneSidedRange;var e=Wr(t);this.datepickers[0].setOptions(e),this.datepickers[1].setOptions(e)}},{key:"destroy",value:function(){this.datepickers[0].destroy(),this.datepickers[1].destroy(),$i(this),delete this.element.rangepicker}},{key:"getDates",value:function(){var t=this,e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:void 0,n=e?function(n){return Bi(n,e,t.datepickers[0].config.locale)}:function(t){return new Date(t)};return this.dates.map((function(t){return void 0===t?t:n(t)}))}},{key:"setDates",value:function(t,e){var n=ci(this.datepickers,2),i=n[0],r=n[1],s=this.dates;this._updating=!0,i.setDate(t),r.setDate(e),delete this._updating,r.dates[0]!==s[1]?Yr(this,{target:this.inputs[1]}):i.dates[0]!==s[0]&&Yr(this,{target:this.inputs[0]})}}])}(),Jr=function(){return Jr=Object.assign||function(t){for(var e,n=1,i=arguments.length;n<i;n++)for(var r in e=arguments[n])Object.prototype.hasOwnProperty.call(e,r)&&(t[r]=e[r]);return t},Jr.apply(this,arguments)},Zr={defaultDatepickerId:null,autohide:!1,format:"mm/dd/yyyy",maxDate:null,minDate:null,orientation:"bottom",buttons:!1,autoSelectToday:0,title:null,language:"en",rangePicker:!1,onShow:function(){},onHide:function(){}},ts={id:null,override:!0},es=function(){function t(t,e,n){void 0===t&&(t=null),void 0===e&&(e=Zr),void 0===n&&(n=ts),this._instanceId=n.id?n.id:t.id,this._datepickerEl=t,this._datepickerInstance=null,this._options=Jr(Jr({},Zr),e),this._initialized=!1,this.init(),wt.addInstance("Datepicker",this,this._instanceId,n.override)}return t.prototype.init=function(){this._datepickerEl&&!this._initialized&&(this._options.rangePicker?this._datepickerInstance=new Xr(this._datepickerEl,this._getDatepickerOptions(this._options)):this._datepickerInstance=new Gr(this._datepickerEl,this._getDatepickerOptions(this._options)),this._initialized=!0)},t.prototype.destroy=function(){this._initialized&&(this._initialized=!1,this._datepickerInstance.destroy())},t.prototype.removeInstance=function(){this.destroy(),wt.removeInstance("Datepicker",this._instanceId)},t.prototype.destroyAndRemoveInstance=function(){this.destroy(),this.removeInstance()},t.prototype.getDatepickerInstance=function(){return this._datepickerInstance},t.prototype.getDate=function(){return this._options.rangePicker&&this._datepickerInstance instanceof Xr?this._datepickerInstance.getDates():!this._options.rangePicker&&this._datepickerInstance instanceof Gr?this._datepickerInstance.getDate():void 0},t.prototype.setDate=function(t){return this._options.rangePicker&&this._datepickerInstance instanceof Xr?this._datepickerInstance.setDates(t):!this._options.rangePicker&&this._datepickerInstance instanceof Gr?this._datepickerInstance.setDate(t):void 0},t.prototype.show=function(){this._datepickerInstance.show(),this._options.onShow(this)},t.prototype.hide=function(){this._datepickerInstance.hide(),this._options.onHide(this)},t.prototype._getDatepickerOptions=function(t){var e={};return t.buttons&&(e.todayBtn=!0,e.clearBtn=!0,t.autoSelectToday&&(e.todayBtnMode=1)),t.autohide&&(e.autohide=!0),t.format&&(e.format=t.format),t.maxDate&&(e.maxDate=t.maxDate),t.minDate&&(e.minDate=t.minDate),t.orientation&&(e.orientation=t.orientation),t.title&&(e.title=t.title),t.language&&(e.language=t.language),e},t.prototype.updateOnShow=function(t){this._options.onShow=t},t.prototype.updateOnHide=function(t){this._options.onHide=t},t}();function ns(){document.querySelectorAll("[datepicker], [inline-datepicker], [date-rangepicker]").forEach((function(t){if(t){var e=t.hasAttribute("datepicker-buttons"),n=t.hasAttribute("datepicker-autoselect-today"),i=t.hasAttribute("datepicker-autohide"),r=t.getAttribute("datepicker-format"),s=t.getAttribute("datepicker-max-date"),o=t.getAttribute("datepicker-min-date"),a=t.getAttribute("datepicker-orientation"),c=t.getAttribute("datepicker-title"),l=t.getAttribute("datepicker-language"),u=t.hasAttribute("date-rangepicker");new es(t,{buttons:e||Zr.buttons,autoSelectToday:n||Zr.autoSelectToday,autohide:i||Zr.autohide,format:r||Zr.format,maxDate:s||Zr.maxDate,minDate:o||Zr.minDate,orientation:a||Zr.orientation,title:c||Zr.title,language:l||Zr.language,rangePicker:u||Zr.rangePicker})}}))}function is(){xt(),At(),Rt(),jt(),ln(),pn(),bn(),Cn(),An(),Pn(),Un(),Kn(),Xn(),ns()}"undefined"!=typeof window&&(window.Datepicker=es,window.initDatepickers=ns),"undefined"!=typeof window&&(window.initFlowbite=is),new bt("load",[xt,At,Rt,jt,ln,pn,bn,Cn,An,Pn,Un,Kn,Xn,ns]).init();const rs=(t,e)=>{const n=t.__vccOpts||t;for(const[i,r]of e)n[i]=r;return n},ss={class:"pl-4 flex items-center gap-2"};const os=t({name:"App",components:{FlowBite:rs({name:"FlowBite",mounted(){is()},emits:["select-component"],data:()=>({baseLinkClass:"block py-2 px-3 md:p-0 rounded-sm",activeLinkClass:"text-white bg-blue-700 md:bg-transparent md:text-blue-700 dark:text-white md:dark:text-blue-500",inactiveLinkClass:"text-gray-900 hover:bg-gray-100 md:hover:bg-transparent md:border-0 md:hover:text-blue-700 dark:text-white md:dark:hover:text-blue-500 dark:hover:bg-gray-700 dark:hover:text-white md:dark:hover:bg-transparent"}),props:{selectedComponent:{required:!1}},methods:{handleComponentSelection(t){this.$emit("select-component",t)},getLinkClasses(t){const e=this.selectedComponent===t;return[this.baseLinkClass,e?this.activeLinkClass:this.inactiveLinkClass]}}},[["render",function(t,e,n,s,o,a){return r(),i("div",ss,e[0]||(e[0]=[v("img",{src:"https://flowbite.com/docs/images/logo.svg",class:"h-6 md:h-8",alt:"Flowbite Logo"},null,-1),v("span",{class:"hidden md:inline self-center text-2xl font-semibold whitespace-nowrap dark:text-white"},"Flowbite",-1)]))}]])},data:()=>({isDarkMode:!1,lightBackground:"/vue-find-a-coach/assets/light-mode-background-LtbTSl5w.png",darkBackground:"/vue-find-a-coach/assets/dark-mode-background-C6-_r_bY.png"}),methods:{...gt("Request",["fetchRequests"]),toggleTheme(){this.isDarkMode=!this.isDarkMode;const t=this.isDarkMode?"dark":"light";document.documentElement.setAttribute("data-theme",t),document.body.style.backgroundImage=`url(${this.isDarkMode?this.darkBackground:this.lightBackground})`,localStorage.setItem("theme",t)}},mounted(){this.fetchRequests();const t=localStorage.getItem("theme");t&&(this.isDarkMode="dark"===t,document.documentElement.setAttribute("data-theme",t),document.body.style.backgroundImage=`url(${this.isDarkMode?this.darkBackground:this.lightBackground})`)}}),as={class:"nav-bar"},cs={class:"nav-links"},ls={key:0},us={key:1};const hs=rs(os,[["render",function(t,e,n,o,a,c){const l=b("FlowBite"),h=b("router-link"),d=b("router-view");return r(),i(s,null,[v("header",null,[v("nav",as,[w(l),v("nav",cs,[w(h,{to:"/"},{default:_((()=>e[1]||(e[1]=[u("All Coaches")]))),_:1}),e[3]||(e[3]=u(" | ")),w(h,{to:"/requests"},{default:_((()=>e[2]||(e[2]=[u("Requests")]))),_:1}),v("button",{class:"theme-toggle",onClick:e[0]||(e[0]=(...e)=>t.toggleTheme&&t.toggleTheme(...e))},[t.isDarkMode?(r(),i("span",ls,"")):(r(),i("span",us,""))])])])]),w(d,null,{default:_((t=>[w(E,{name:"route",mode:"out-in"},{default:_((()=>[(r(),k(C(t.Component)))])),_:2},1024)])),_:1})],64)}]]);var ds={};
/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const fs=function(t){const e=[];let n=0;for(let i=0;i<t.length;i++){let r=t.charCodeAt(i);r<128?e[n++]=r:r<2048?(e[n++]=r>>6|192,e[n++]=63&r|128):55296==(64512&r)&&i+1<t.length&&56320==(64512&t.charCodeAt(i+1))?(r=65536+((1023&r)<<10)+(1023&t.charCodeAt(++i)),e[n++]=r>>18|240,e[n++]=r>>12&63|128,e[n++]=r>>6&63|128,e[n++]=63&r|128):(e[n++]=r>>12|224,e[n++]=r>>6&63|128,e[n++]=63&r|128)}return e},ps={byteToCharMap_:null,charToByteMap_:null,byteToCharMapWebSafe_:null,charToByteMapWebSafe_:null,ENCODED_VALS_BASE:"ABCDEFGHIJKLMNOPQRSTUVWXYZabcdefghijklmnopqrstuvwxyz0123456789",get ENCODED_VALS(){return this.ENCODED_VALS_BASE+"+/="},get ENCODED_VALS_WEBSAFE(){return this.ENCODED_VALS_BASE+"-_."},HAS_NATIVE_SUPPORT:"function"==typeof atob,encodeByteArray(t,e){if(!Array.isArray(t))throw Error("encodeByteArray takes an array as a parameter");this.init_();const n=e?this.byteToCharMapWebSafe_:this.byteToCharMap_,i=[];for(let r=0;r<t.length;r+=3){const e=t[r],s=r+1<t.length,o=s?t[r+1]:0,a=r+2<t.length,c=a?t[r+2]:0,l=e>>2,u=(3&e)<<4|o>>4;let h=(15&o)<<2|c>>6,d=63&c;a||(d=64,s||(h=64)),i.push(n[l],n[u],n[h],n[d])}return i.join("")},encodeString(t,e){return this.HAS_NATIVE_SUPPORT&&!e?btoa(t):this.encodeByteArray(fs(t),e)},decodeString(t,e){return this.HAS_NATIVE_SUPPORT&&!e?atob(t):function(t){const e=[];let n=0,i=0;for(;n<t.length;){const r=t[n++];if(r<128)e[i++]=String.fromCharCode(r);else if(r>191&&r<224){const s=t[n++];e[i++]=String.fromCharCode((31&r)<<6|63&s)}else if(r>239&&r<365){const s=((7&r)<<18|(63&t[n++])<<12|(63&t[n++])<<6|63&t[n++])-65536;e[i++]=String.fromCharCode(55296+(s>>10)),e[i++]=String.fromCharCode(56320+(1023&s))}else{const s=t[n++],o=t[n++];e[i++]=String.fromCharCode((15&r)<<12|(63&s)<<6|63&o)}}return e.join("")}(this.decodeStringToByteArray(t,e))},decodeStringToByteArray(t,e){this.init_();const n=e?this.charToByteMapWebSafe_:this.charToByteMap_,i=[];for(let r=0;r<t.length;){const e=n[t.charAt(r++)],s=r<t.length?n[t.charAt(r)]:0;++r;const o=r<t.length?n[t.charAt(r)]:64;++r;const a=r<t.length?n[t.charAt(r)]:64;if(++r,null==e||null==s||null==o||null==a)throw new gs;const c=e<<2|s>>4;if(i.push(c),64!==o){const t=s<<4&240|o>>2;if(i.push(t),64!==a){const t=o<<6&192|a;i.push(t)}}}return i},init_(){if(!this.byteToCharMap_){this.byteToCharMap_={},this.charToByteMap_={},this.byteToCharMapWebSafe_={},this.charToByteMapWebSafe_={};for(let t=0;t<this.ENCODED_VALS.length;t++)this.byteToCharMap_[t]=this.ENCODED_VALS.charAt(t),this.charToByteMap_[this.byteToCharMap_[t]]=t,this.byteToCharMapWebSafe_[t]=this.ENCODED_VALS_WEBSAFE.charAt(t),this.charToByteMapWebSafe_[this.byteToCharMapWebSafe_[t]]=t,t>=this.ENCODED_VALS_BASE.length&&(this.charToByteMap_[this.ENCODED_VALS_WEBSAFE.charAt(t)]=t,this.charToByteMapWebSafe_[this.ENCODED_VALS.charAt(t)]=t)}}};class gs extends Error{constructor(){super(...arguments),this.name="DecodeBase64StringError"}}const ms=function(t){return function(t){const e=fs(t);return ps.encodeByteArray(e,!0)}(t).replace(/\./g,"")};
/**
 * @license
 * Copyright 2022 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */
const ys=()=>
/**
 * @license
 * Copyright 2022 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */
function(){if("undefined"!=typeof self)return self;if("undefined"!=typeof window)return window;if("undefined"!=typeof global)return global;throw new Error("Unable to locate global object.")}().__FIREBASE_DEFAULTS__,vs=()=>{if("undefined"==typeof document)return;let t;try{t=document.cookie.match(/__FIREBASE_DEFAULTS__=([^;]+)/)}catch(n){return}const e=t&&function(t){try{return ps.decodeString(t,!0)}catch(n){}return null}(t[1]);return e&&JSON.parse(e)},bs=()=>{try{return ys()||(()=>{if("undefined"==typeof process)return;const t=ds.__FIREBASE_DEFAULTS__;return t?JSON.parse(t):void 0})()||vs()}catch(t){return}},ws=t=>{const e=(t=>{var e,n;return null===(n=null===(e=bs())||void 0===e?void 0:e.emulatorHosts)||void 0===n?void 0:n[t]})(t);if(!e)return;const n=e.lastIndexOf(":");if(n<=0||n+1===e.length)throw new Error(`Invalid host ${e} with no separate hostname and port!`);const i=parseInt(e.substring(n+1),10);return"["===e[0]?[e.substring(1,n-1),i]:[e.substring(0,n),i]},_s=()=>{var t;return null===(t=bs())||void 0===t?void 0:t.config};
/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */
class Es{constructor(){this.reject=()=>{},this.resolve=()=>{},this.promise=new Promise(((t,e)=>{this.resolve=t,this.reject=e}))}wrapCallback(t){return(e,n)=>{e?this.reject(e):this.resolve(n),"function"==typeof t&&(this.promise.catch((()=>{})),1===t.length?t(e):t(e,n))}}}
/**
 * @license
 * Copyright 2021 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function ks(){return!function(){var t;const e=null===(t=bs())||void 0===t?void 0:t.forceEnvironment;if("node"===e)return!0;if("browser"===e)return!1;try{return"[object process]"===Object.prototype.toString.call(global.process)}catch(n){return!1}}()&&!!navigator.userAgent&&navigator.userAgent.includes("Safari")&&!navigator.userAgent.includes("Chrome")}class Cs extends Error{constructor(t,e,n){super(e),this.code=t,this.customData=n,this.name="FirebaseError",Object.setPrototypeOf(this,Cs.prototype),Error.captureStackTrace&&Error.captureStackTrace(this,xs.prototype.create)}}class xs{constructor(t,e,n){this.service=t,this.serviceName=e,this.errors=n}create(t,...e){const n=e[0]||{},i=`${this.service}/${t}`,r=this.errors[t],s=r?function(t,e){return t.replace(Ts,((t,n)=>{const i=e[n];return null!=i?String(i):`<${n}?>`}))}(r,n):"Error",o=`${this.serviceName}: ${s} (${i}).`;return new Cs(i,o,n)}}const Ts=/\{\$([^}]+)}/g;function Ss(t,e){if(t===e)return!0;const n=Object.keys(t),i=Object.keys(e);for(const r of n){if(!i.includes(r))return!1;const n=t[r],s=e[r];if(Is(n)&&Is(s)){if(!Ss(n,s))return!1}else if(n!==s)return!1}for(const r of i)if(!n.includes(r))return!1;return!0}function Is(t){return null!==t&&"object"==typeof t}
/**
 * @license
 * Copyright 2021 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function Ds(t){return t&&t._delegate?t._delegate:t}class As{constructor(t,e,n){this.name=t,this.instanceFactory=e,this.type=n,this.multipleInstances=!1,this.serviceProps={},this.instantiationMode="LAZY",this.onInstanceCreated=null}setInstantiationMode(t){return this.instantiationMode=t,this}setMultipleInstances(t){return this.multipleInstances=t,this}setServiceProps(t){return this.serviceProps=t,this}setInstanceCreatedCallback(t){return this.onInstanceCreated=t,this}}
/**
 * @license
 * Copyright 2019 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const Ls="[DEFAULT]";
/**
 * @license
 * Copyright 2019 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class Os{constructor(t,e){this.name=t,this.container=e,this.component=null,this.instances=new Map,this.instancesDeferred=new Map,this.instancesOptions=new Map,this.onInitCallbacks=new Map}get(t){const e=this.normalizeInstanceIdentifier(t);if(!this.instancesDeferred.has(e)){const t=new Es;if(this.instancesDeferred.set(e,t),this.isInitialized(e)||this.shouldAutoInitialize())try{const n=this.getOrInitializeService({instanceIdentifier:e});n&&t.resolve(n)}catch(n){}}return this.instancesDeferred.get(e).promise}getImmediate(t){var e;const n=this.normalizeInstanceIdentifier(null==t?void 0:t.identifier),i=null!==(e=null==t?void 0:t.optional)&&void 0!==e&&e;if(!this.isInitialized(n)&&!this.shouldAutoInitialize()){if(i)return null;throw Error(`Service ${this.name} is not available`)}try{return this.getOrInitializeService({instanceIdentifier:n})}catch(r){if(i)return null;throw r}}getComponent(){return this.component}setComponent(t){if(t.name!==this.name)throw Error(`Mismatching Component ${t.name} for Provider ${this.name}.`);if(this.component)throw Error(`Component for ${this.name} has already been provided`);if(this.component=t,this.shouldAutoInitialize()){if(function(t){return"EAGER"===t.instantiationMode}
/**
 * @license
 * Copyright 2019 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */(t))try{this.getOrInitializeService({instanceIdentifier:Ls})}catch(e){}for(const[t,n]of this.instancesDeferred.entries()){const i=this.normalizeInstanceIdentifier(t);try{const t=this.getOrInitializeService({instanceIdentifier:i});n.resolve(t)}catch(e){}}}}clearInstance(t=Ls){this.instancesDeferred.delete(t),this.instancesOptions.delete(t),this.instances.delete(t)}async delete(){const t=Array.from(this.instances.values());await Promise.all([...t.filter((t=>"INTERNAL"in t)).map((t=>t.INTERNAL.delete())),...t.filter((t=>"_delete"in t)).map((t=>t._delete()))])}isComponentSet(){return null!=this.component}isInitialized(t=Ls){return this.instances.has(t)}getOptions(t=Ls){return this.instancesOptions.get(t)||{}}initialize(t={}){const{options:e={}}=t,n=this.normalizeInstanceIdentifier(t.instanceIdentifier);if(this.isInitialized(n))throw Error(`${this.name}(${n}) has already been initialized`);if(!this.isComponentSet())throw Error(`Component ${this.name} has not been registered yet`);const i=this.getOrInitializeService({instanceIdentifier:n,options:e});for(const[r,s]of this.instancesDeferred.entries()){n===this.normalizeInstanceIdentifier(r)&&s.resolve(i)}return i}onInit(t,e){var n;const i=this.normalizeInstanceIdentifier(e),r=null!==(n=this.onInitCallbacks.get(i))&&void 0!==n?n:new Set;r.add(t),this.onInitCallbacks.set(i,r);const s=this.instances.get(i);return s&&t(s,i),()=>{r.delete(t)}}invokeOnInitCallbacks(t,e){const n=this.onInitCallbacks.get(e);if(n)for(const r of n)try{r(t,e)}catch(i){}}getOrInitializeService({instanceIdentifier:t,options:e={}}){let n=this.instances.get(t);if(!n&&this.component&&(n=this.component.instanceFactory(this.container,{instanceIdentifier:(i=t,i===Ls?void 0:i),options:e}),this.instances.set(t,n),this.instancesOptions.set(t,e),this.invokeOnInitCallbacks(n,t),this.component.onInstanceCreated))try{this.component.onInstanceCreated(this.container,t,n)}catch(r){}var i;return n||null}normalizeInstanceIdentifier(t=Ls){return this.component?this.component.multipleInstances?t:Ls:t}shouldAutoInitialize(){return!!this.component&&"EXPLICIT"!==this.component.instantiationMode}}class Ns{constructor(t){this.name=t,this.providers=new Map}addComponent(t){const e=this.getProvider(t.name);if(e.isComponentSet())throw new Error(`Component ${t.name} has already been registered with ${this.name}`);e.setComponent(t)}addOrOverwriteComponent(t){this.getProvider(t.name).isComponentSet()&&this.providers.delete(t.name),this.addComponent(t)}getProvider(t){if(this.providers.has(t))return this.providers.get(t);const e=new Os(t,this);return this.providers.set(t,e),e}getProviders(){return Array.from(this.providers.values())}}
/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */var Ms,Rs;(Rs=Ms||(Ms={}))[Rs.DEBUG=0]="DEBUG",Rs[Rs.VERBOSE=1]="VERBOSE",Rs[Rs.INFO=2]="INFO",Rs[Rs.WARN=3]="WARN",Rs[Rs.ERROR=4]="ERROR",Rs[Rs.SILENT=5]="SILENT";const Ps={debug:Ms.DEBUG,verbose:Ms.VERBOSE,info:Ms.INFO,warn:Ms.WARN,error:Ms.ERROR,silent:Ms.SILENT},Vs=Ms.INFO,Fs={[Ms.DEBUG]:"log",[Ms.VERBOSE]:"log",[Ms.INFO]:"info",[Ms.WARN]:"warn",[Ms.ERROR]:"error"},Bs=(t,e,...n)=>{if(e<t.logLevel)return;(new Date).toISOString();if(!Fs[e])throw new Error(`Attempted to log a message with an invalid logType (value: ${e})`)};class js{constructor(t){this.name=t,this._logLevel=Vs,this._logHandler=Bs,this._userLogHandler=null}get logLevel(){return this._logLevel}set logLevel(t){if(!(t in Ms))throw new TypeError(`Invalid value "${t}" assigned to \`logLevel\``);this._logLevel=t}setLogLevel(t){this._logLevel="string"==typeof t?Ps[t]:t}get logHandler(){return this._logHandler}set logHandler(t){if("function"!=typeof t)throw new TypeError("Value assigned to `logHandler` must be a function");this._logHandler=t}get userLogHandler(){return this._userLogHandler}set userLogHandler(t){this._userLogHandler=t}debug(...t){this._userLogHandler&&this._userLogHandler(this,Ms.DEBUG,...t),this._logHandler(this,Ms.DEBUG,...t)}log(...t){this._userLogHandler&&this._userLogHandler(this,Ms.VERBOSE,...t),this._logHandler(this,Ms.VERBOSE,...t)}info(...t){this._userLogHandler&&this._userLogHandler(this,Ms.INFO,...t),this._logHandler(this,Ms.INFO,...t)}warn(...t){this._userLogHandler&&this._userLogHandler(this,Ms.WARN,...t),this._logHandler(this,Ms.WARN,...t)}error(...t){this._userLogHandler&&this._userLogHandler(this,Ms.ERROR,...t),this._logHandler(this,Ms.ERROR,...t)}}let Us,qs;const Hs=new WeakMap,zs=new WeakMap,$s=new WeakMap,Ks=new WeakMap,Gs=new WeakMap;let Ws={get(t,e,n){if(t instanceof IDBTransaction){if("done"===e)return zs.get(t);if("objectStoreNames"===e)return t.objectStoreNames||$s.get(t);if("store"===e)return n.objectStoreNames[1]?void 0:n.objectStore(n.objectStoreNames[0])}return Xs(t[e])},set:(t,e,n)=>(t[e]=n,!0),has:(t,e)=>t instanceof IDBTransaction&&("done"===e||"store"===e)||e in t};function Qs(t){return t!==IDBDatabase.prototype.transaction||"objectStoreNames"in IDBTransaction.prototype?(qs||(qs=[IDBCursor.prototype.advance,IDBCursor.prototype.continue,IDBCursor.prototype.continuePrimaryKey])).includes(t)?function(...e){return t.apply(Js(this),e),Xs(Hs.get(this))}:function(...e){return Xs(t.apply(Js(this),e))}:function(e,...n){const i=t.call(Js(this),e,...n);return $s.set(i,e.sort?e.sort():[e]),Xs(i)}}function Ys(t){return"function"==typeof t?Qs(t):(t instanceof IDBTransaction&&function(t){if(zs.has(t))return;const e=new Promise(((e,n)=>{const i=()=>{t.removeEventListener("complete",r),t.removeEventListener("error",s),t.removeEventListener("abort",s)},r=()=>{e(),i()},s=()=>{n(t.error||new DOMException("AbortError","AbortError")),i()};t.addEventListener("complete",r),t.addEventListener("error",s),t.addEventListener("abort",s)}));zs.set(t,e)}(t),e=t,(Us||(Us=[IDBDatabase,IDBObjectStore,IDBIndex,IDBCursor,IDBTransaction])).some((t=>e instanceof t))?new Proxy(t,Ws):t);var e}function Xs(t){if(t instanceof IDBRequest)return function(t){const e=new Promise(((e,n)=>{const i=()=>{t.removeEventListener("success",r),t.removeEventListener("error",s)},r=()=>{e(Xs(t.result)),i()},s=()=>{n(t.error),i()};t.addEventListener("success",r),t.addEventListener("error",s)}));return e.then((e=>{e instanceof IDBCursor&&Hs.set(e,t)})).catch((()=>{})),Gs.set(e,t),e}(t);if(Ks.has(t))return Ks.get(t);const e=Ys(t);return e!==t&&(Ks.set(t,e),Gs.set(e,t)),e}const Js=t=>Gs.get(t);const Zs=["get","getKey","getAll","getAllKeys","count"],to=["put","add","delete","clear"],eo=new Map;function no(t,e){if(!(t instanceof IDBDatabase)||e in t||"string"!=typeof e)return;if(eo.get(e))return eo.get(e);const n=e.replace(/FromIndex$/,""),i=e!==n,r=to.includes(n);if(!(n in(i?IDBIndex:IDBObjectStore).prototype)||!r&&!Zs.includes(n))return;const s=async function(t,...e){const s=this.transaction(t,r?"readwrite":"readonly");let o=s.store;return i&&(o=o.index(e.shift())),(await Promise.all([o[n](...e),r&&s.done]))[0]};return eo.set(e,s),s}Ws=(t=>({...t,get:(e,n,i)=>no(e,n)||t.get(e,n,i),has:(e,n)=>!!no(e,n)||t.has(e,n)}))(Ws);
/**
 * @license
 * Copyright 2019 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */
class io{constructor(t){this.container=t}getPlatformInfoString(){return this.container.getProviders().map((t=>{if(function(t){const e=t.getComponent();return"VERSION"===(null==e?void 0:e.type)}(t)){const e=t.getImmediate();return`${e.library}/${e.version}`}return null})).filter((t=>t)).join(" ")}}const ro="@firebase/app",so="0.11.5",oo=new js("@firebase/app"),ao="@firebase/app-compat",co="@firebase/analytics-compat",lo="@firebase/analytics",uo="@firebase/app-check-compat",ho="@firebase/app-check",fo="@firebase/auth",po="@firebase/auth-compat",go="@firebase/database",mo="@firebase/data-connect",yo="@firebase/database-compat",vo="@firebase/functions",bo="@firebase/functions-compat",wo="@firebase/installations",_o="@firebase/installations-compat",Eo="@firebase/messaging",ko="@firebase/messaging-compat",Co="@firebase/performance",xo="@firebase/performance-compat",To="@firebase/remote-config",So="@firebase/remote-config-compat",Io="@firebase/storage",Do="@firebase/storage-compat",Ao="@firebase/firestore",Lo="@firebase/vertexai",Oo="@firebase/firestore-compat",No="firebase",Mo="[DEFAULT]",Ro={[ro]:"fire-core",[ao]:"fire-core-compat",[lo]:"fire-analytics",[co]:"fire-analytics-compat",[ho]:"fire-app-check",[uo]:"fire-app-check-compat",[fo]:"fire-auth",[po]:"fire-auth-compat",[go]:"fire-rtdb",[mo]:"fire-data-connect",[yo]:"fire-rtdb-compat",[vo]:"fire-fn",[bo]:"fire-fn-compat",[wo]:"fire-iid",[_o]:"fire-iid-compat",[Eo]:"fire-fcm",[ko]:"fire-fcm-compat",[Co]:"fire-perf",[xo]:"fire-perf-compat",[To]:"fire-rc",[So]:"fire-rc-compat",[Io]:"fire-gcs",[Do]:"fire-gcs-compat",[Ao]:"fire-fst",[Oo]:"fire-fst-compat",[Lo]:"fire-vertex","fire-js":"fire-js",[No]:"fire-js-all"},Po=new Map,Vo=new Map,Fo=new Map;function Bo(t,e){try{t.container.addComponent(e)}catch(n){oo.debug(`Component ${e.name} failed to register with FirebaseApp ${t.name}`,n)}}function jo(t){const e=t.name;if(Fo.has(e))return oo.debug(`There were multiple attempts to register component ${e}.`),!1;Fo.set(e,t);for(const n of Po.values())Bo(n,t);for(const n of Vo.values())Bo(n,t);return!0}
/**
 * @license
 * Copyright 2019 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */
const Uo=new xs("app","Firebase",{"no-app":"No Firebase App '{$appName}' has been created - call initializeApp() first","bad-app-name":"Illegal App name: '{$appName}'","duplicate-app":"Firebase App named '{$appName}' already exists with different options or config","app-deleted":"Firebase App named '{$appName}' already deleted","server-app-deleted":"Firebase Server App has been deleted","no-options":"Need to provide options, when not being deployed to hosting via source.","invalid-app-argument":"firebase.{$appName}() takes either no argument or a Firebase App instance.","invalid-log-argument":"First argument to `onLog` must be null or a function.","idb-open":"Error thrown when opening IndexedDB. Original error: {$originalErrorMessage}.","idb-get":"Error thrown when reading from IndexedDB. Original error: {$originalErrorMessage}.","idb-set":"Error thrown when writing to IndexedDB. Original error: {$originalErrorMessage}.","idb-delete":"Error thrown when deleting from IndexedDB. Original error: {$originalErrorMessage}.","finalization-registry-not-supported":"FirebaseServerApp deleteOnDeref field defined but the JS runtime does not support FinalizationRegistry.","invalid-server-app-environment":"FirebaseServerApp is not for use in browser environments."});
/**
 * @license
 * Copyright 2019 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */
class qo{constructor(t,e,n){this._isDeleted=!1,this._options=Object.assign({},t),this._config=Object.assign({},e),this._name=e.name,this._automaticDataCollectionEnabled=e.automaticDataCollectionEnabled,this._container=n,this.container.addComponent(new As("app",(()=>this),"PUBLIC"))}get automaticDataCollectionEnabled(){return this.checkDestroyed(),this._automaticDataCollectionEnabled}set automaticDataCollectionEnabled(t){this.checkDestroyed(),this._automaticDataCollectionEnabled=t}get name(){return this.checkDestroyed(),this._name}get options(){return this.checkDestroyed(),this._options}get config(){return this.checkDestroyed(),this._config}get container(){return this._container}get isDeleted(){return this._isDeleted}set isDeleted(t){this._isDeleted=t}checkDestroyed(){if(this.isDeleted)throw Uo.create("app-deleted",{appName:this._name})}}
/**
 * @license
 * Copyright 2019 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function Ho(t,e={}){let n=t;if("object"!=typeof e){e={name:e}}const i=Object.assign({name:Mo,automaticDataCollectionEnabled:!1},e),r=i.name;if("string"!=typeof r||!r)throw Uo.create("bad-app-name",{appName:String(r)});if(n||(n=_s()),!n)throw Uo.create("no-options");const s=Po.get(r);if(s){if(Ss(n,s.options)&&Ss(i,s.config))return s;throw Uo.create("duplicate-app",{appName:r})}const o=new Ns(r);for(const c of Fo.values())o.addComponent(c);const a=new qo(n,i,o);return Po.set(r,a),a}function zo(t,e,n){var i;let r=null!==(i=Ro[t])&&void 0!==i?i:t;n&&(r+=`-${n}`);const s=r.match(/\s|\//),o=e.match(/\s|\//);if(s||o){const t=[`Unable to register library "${r}" with version "${e}":`];return s&&t.push(`library name "${r}" contains illegal characters (whitespace or "/")`),s&&o&&t.push("and"),o&&t.push(`version name "${e}" contains illegal characters (whitespace or "/")`),void oo.warn(t.join(" "))}jo(new As(`${r}-version`,(()=>({library:r,version:e})),"VERSION"))}
/**
 * @license
 * Copyright 2021 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const $o="firebase-heartbeat-store";let Ko=null;function Go(){return Ko||(Ko=function(t,e,{blocked:n,upgrade:i,blocking:r,terminated:s}={}){const o=indexedDB.open(t,e),a=Xs(o);return i&&o.addEventListener("upgradeneeded",(t=>{i(Xs(o.result),t.oldVersion,t.newVersion,Xs(o.transaction),t)})),n&&o.addEventListener("blocked",(t=>n(t.oldVersion,t.newVersion,t))),a.then((t=>{s&&t.addEventListener("close",(()=>s())),r&&t.addEventListener("versionchange",(t=>r(t.oldVersion,t.newVersion,t)))})).catch((()=>{})),a}("firebase-heartbeat-database",1,{upgrade:(t,e)=>{if(0===e)try{t.createObjectStore($o)}catch(n){}}}).catch((t=>{throw Uo.create("idb-open",{originalErrorMessage:t.message})}))),Ko}async function Wo(t,e){try{const n=(await Go()).transaction($o,"readwrite"),i=n.objectStore($o);await i.put(e,Qo(t)),await n.done}catch(n){if(n instanceof Cs)oo.warn(n.message);else{const t=Uo.create("idb-set",{originalErrorMessage:null==n?void 0:n.message});oo.warn(t.message)}}}function Qo(t){return`${t.name}!${t.options.appId}`}
/**
 * @license
 * Copyright 2021 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class Yo{constructor(t){this.container=t,this._heartbeatsCache=null;const e=this.container.getProvider("app").getImmediate();this._storage=new Jo(e),this._heartbeatsCachePromise=this._storage.read().then((t=>(this._heartbeatsCache=t,t)))}async triggerHeartbeat(){var t,e;try{const n=this.container.getProvider("platform-logger").getImmediate().getPlatformInfoString(),i=Xo();if(null==(null===(t=this._heartbeatsCache)||void 0===t?void 0:t.heartbeats)&&(this._heartbeatsCache=await this._heartbeatsCachePromise,null==(null===(e=this._heartbeatsCache)||void 0===e?void 0:e.heartbeats)))return;if(this._heartbeatsCache.lastSentHeartbeatDate===i||this._heartbeatsCache.heartbeats.some((t=>t.date===i)))return;if(this._heartbeatsCache.heartbeats.push({date:i,agent:n}),this._heartbeatsCache.heartbeats.length>30){const t=function(t){if(0===t.length)return-1;let e=0,n=t[0].date;for(let i=1;i<t.length;i++)t[i].date<n&&(n=t[i].date,e=i);return e}
/**
 * @license
 * Copyright 2019 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */(this._heartbeatsCache.heartbeats);this._heartbeatsCache.heartbeats.splice(t,1)}return this._storage.overwrite(this._heartbeatsCache)}catch(n){oo.warn(n)}}async getHeartbeatsHeader(){var t;try{if(null===this._heartbeatsCache&&await this._heartbeatsCachePromise,null==(null===(t=this._heartbeatsCache)||void 0===t?void 0:t.heartbeats)||0===this._heartbeatsCache.heartbeats.length)return"";const e=Xo(),{heartbeatsToSend:n,unsentEntries:i}=function(t,e=1024){const n=[];let i=t.slice();for(const r of t){const t=n.find((t=>t.agent===r.agent));if(t){if(t.dates.push(r.date),Zo(n)>e){t.dates.pop();break}}else if(n.push({agent:r.agent,dates:[r.date]}),Zo(n)>e){n.pop();break}i=i.slice(1)}return{heartbeatsToSend:n,unsentEntries:i}}(this._heartbeatsCache.heartbeats),r=ms(JSON.stringify({version:2,heartbeats:n}));return this._heartbeatsCache.lastSentHeartbeatDate=e,i.length>0?(this._heartbeatsCache.heartbeats=i,await this._storage.overwrite(this._heartbeatsCache)):(this._heartbeatsCache.heartbeats=[],this._storage.overwrite(this._heartbeatsCache)),r}catch(e){return oo.warn(e),""}}}function Xo(){return(new Date).toISOString().substring(0,10)}class Jo{constructor(t){this.app=t,this._canUseIndexedDBPromise=this.runIndexedDBEnvironmentCheck()}async runIndexedDBEnvironmentCheck(){return!!function(){try{return"object"==typeof indexedDB}catch(t){return!1}}()&&new Promise(((t,e)=>{try{let n=!0;const i="validate-browser-context-for-indexeddb-analytics-module",r=self.indexedDB.open(i);r.onsuccess=()=>{r.result.close(),n||self.indexedDB.deleteDatabase(i),t(!0)},r.onupgradeneeded=()=>{n=!1},r.onerror=()=>{var t;e((null===(t=r.error)||void 0===t?void 0:t.message)||"")}}catch(n){e(n)}})).then((()=>!0)).catch((()=>!1))}async read(){if(await this._canUseIndexedDBPromise){const t=await async function(t){try{const e=(await Go()).transaction($o),n=await e.objectStore($o).get(Qo(t));return await e.done,n}catch(e){if(e instanceof Cs)oo.warn(e.message);else{const t=Uo.create("idb-get",{originalErrorMessage:null==e?void 0:e.message});oo.warn(t.message)}}}(this.app);return(null==t?void 0:t.heartbeats)?t:{heartbeats:[]}}return{heartbeats:[]}}async overwrite(t){var e;if(await this._canUseIndexedDBPromise){const n=await this.read();return Wo(this.app,{lastSentHeartbeatDate:null!==(e=t.lastSentHeartbeatDate)&&void 0!==e?e:n.lastSentHeartbeatDate,heartbeats:t.heartbeats})}}async add(t){var e;if(await this._canUseIndexedDBPromise){const n=await this.read();return Wo(this.app,{lastSentHeartbeatDate:null!==(e=t.lastSentHeartbeatDate)&&void 0!==e?e:n.lastSentHeartbeatDate,heartbeats:[...n.heartbeats,...t.heartbeats]})}}}function Zo(t){return ms(JSON.stringify({version:2,heartbeats:t})).length}var ta;ta="",jo(new As("platform-logger",(t=>new io(t)),"PRIVATE")),jo(new As("heartbeat",(t=>new Yo(t)),"PRIVATE")),zo(ro,so,ta),zo(ro,so,"esm2017"),zo("fire-js","");var ea,na,ia="undefined"!=typeof globalThis?globalThis:"undefined"!=typeof window?window:"undefined"!=typeof global?global:"undefined"!=typeof self?self:{};
/** @license
Copyright The Closure Library Authors.
SPDX-License-Identifier: Apache-2.0
*/(function(){var t;
/** @license
  
   Copyright The Closure Library Authors.
   SPDX-License-Identifier: Apache-2.0
  */function e(){this.blockSize=-1,this.blockSize=64,this.g=Array(4),this.B=Array(this.blockSize),this.o=this.h=0,this.s()}function n(t,e,n){n||(n=0);var i=Array(16);if("string"==typeof e)for(var r=0;16>r;++r)i[r]=e.charCodeAt(n++)|e.charCodeAt(n++)<<8|e.charCodeAt(n++)<<16|e.charCodeAt(n++)<<24;else for(r=0;16>r;++r)i[r]=e[n++]|e[n++]<<8|e[n++]<<16|e[n++]<<24;e=t.g[0],n=t.g[1],r=t.g[2];var s=t.g[3],o=e+(s^n&(r^s))+i[0]+3614090360&4294967295;o=(n=(r=(s=(e=(n=(r=(s=(e=(n=(r=(s=(e=(n=(r=(s=(e=(n=(r=(s=(e=(n=(r=(s=(e=(n=(r=(s=(e=(n=(r=(s=(e=(n=(r=(s=(e=(n=(r=(s=(e=(n=(r=(s=(e=(n=(r=(s=(e=(n=(r=(s=(e=(n=(r=(s=(e=(n=(r=(s=(e=n+(o<<7&4294967295|o>>>25))+((o=s+(r^e&(n^r))+i[1]+3905402710&4294967295)<<12&4294967295|o>>>20))+((o=r+(n^s&(e^n))+i[2]+606105819&4294967295)<<17&4294967295|o>>>15))+((o=n+(e^r&(s^e))+i[3]+3250441966&4294967295)<<22&4294967295|o>>>10))+((o=e+(s^n&(r^s))+i[4]+4118548399&4294967295)<<7&4294967295|o>>>25))+((o=s+(r^e&(n^r))+i[5]+1200080426&4294967295)<<12&4294967295|o>>>20))+((o=r+(n^s&(e^n))+i[6]+2821735955&4294967295)<<17&4294967295|o>>>15))+((o=n+(e^r&(s^e))+i[7]+4249261313&4294967295)<<22&4294967295|o>>>10))+((o=e+(s^n&(r^s))+i[8]+1770035416&4294967295)<<7&4294967295|o>>>25))+((o=s+(r^e&(n^r))+i[9]+2336552879&4294967295)<<12&4294967295|o>>>20))+((o=r+(n^s&(e^n))+i[10]+4294925233&4294967295)<<17&4294967295|o>>>15))+((o=n+(e^r&(s^e))+i[11]+2304563134&4294967295)<<22&4294967295|o>>>10))+((o=e+(s^n&(r^s))+i[12]+1804603682&4294967295)<<7&4294967295|o>>>25))+((o=s+(r^e&(n^r))+i[13]+4254626195&4294967295)<<12&4294967295|o>>>20))+((o=r+(n^s&(e^n))+i[14]+2792965006&4294967295)<<17&4294967295|o>>>15))+((o=n+(e^r&(s^e))+i[15]+1236535329&4294967295)<<22&4294967295|o>>>10))+((o=e+(r^s&(n^r))+i[1]+4129170786&4294967295)<<5&4294967295|o>>>27))+((o=s+(n^r&(e^n))+i[6]+3225465664&4294967295)<<9&4294967295|o>>>23))+((o=r+(e^n&(s^e))+i[11]+643717713&4294967295)<<14&4294967295|o>>>18))+((o=n+(s^e&(r^s))+i[0]+3921069994&4294967295)<<20&4294967295|o>>>12))+((o=e+(r^s&(n^r))+i[5]+3593408605&4294967295)<<5&4294967295|o>>>27))+((o=s+(n^r&(e^n))+i[10]+38016083&4294967295)<<9&4294967295|o>>>23))+((o=r+(e^n&(s^e))+i[15]+3634488961&4294967295)<<14&4294967295|o>>>18))+((o=n+(s^e&(r^s))+i[4]+3889429448&4294967295)<<20&4294967295|o>>>12))+((o=e+(r^s&(n^r))+i[9]+568446438&4294967295)<<5&4294967295|o>>>27))+((o=s+(n^r&(e^n))+i[14]+3275163606&4294967295)<<9&4294967295|o>>>23))+((o=r+(e^n&(s^e))+i[3]+4107603335&4294967295)<<14&4294967295|o>>>18))+((o=n+(s^e&(r^s))+i[8]+1163531501&4294967295)<<20&4294967295|o>>>12))+((o=e+(r^s&(n^r))+i[13]+2850285829&4294967295)<<5&4294967295|o>>>27))+((o=s+(n^r&(e^n))+i[2]+4243563512&4294967295)<<9&4294967295|o>>>23))+((o=r+(e^n&(s^e))+i[7]+1735328473&4294967295)<<14&4294967295|o>>>18))+((o=n+(s^e&(r^s))+i[12]+2368359562&4294967295)<<20&4294967295|o>>>12))+((o=e+(n^r^s)+i[5]+4294588738&4294967295)<<4&4294967295|o>>>28))+((o=s+(e^n^r)+i[8]+2272392833&4294967295)<<11&4294967295|o>>>21))+((o=r+(s^e^n)+i[11]+1839030562&4294967295)<<16&4294967295|o>>>16))+((o=n+(r^s^e)+i[14]+4259657740&4294967295)<<23&4294967295|o>>>9))+((o=e+(n^r^s)+i[1]+2763975236&4294967295)<<4&4294967295|o>>>28))+((o=s+(e^n^r)+i[4]+1272893353&4294967295)<<11&4294967295|o>>>21))+((o=r+(s^e^n)+i[7]+4139469664&4294967295)<<16&4294967295|o>>>16))+((o=n+(r^s^e)+i[10]+3200236656&4294967295)<<23&4294967295|o>>>9))+((o=e+(n^r^s)+i[13]+681279174&4294967295)<<4&4294967295|o>>>28))+((o=s+(e^n^r)+i[0]+3936430074&4294967295)<<11&4294967295|o>>>21))+((o=r+(s^e^n)+i[3]+3572445317&4294967295)<<16&4294967295|o>>>16))+((o=n+(r^s^e)+i[6]+76029189&4294967295)<<23&4294967295|o>>>9))+((o=e+(n^r^s)+i[9]+3654602809&4294967295)<<4&4294967295|o>>>28))+((o=s+(e^n^r)+i[12]+3873151461&4294967295)<<11&4294967295|o>>>21))+((o=r+(s^e^n)+i[15]+530742520&4294967295)<<16&4294967295|o>>>16))+((o=n+(r^s^e)+i[2]+3299628645&4294967295)<<23&4294967295|o>>>9))+((o=e+(r^(n|~s))+i[0]+4096336452&4294967295)<<6&4294967295|o>>>26))+((o=s+(n^(e|~r))+i[7]+1126891415&4294967295)<<10&4294967295|o>>>22))+((o=r+(e^(s|~n))+i[14]+2878612391&4294967295)<<15&4294967295|o>>>17))+((o=n+(s^(r|~e))+i[5]+4237533241&4294967295)<<21&4294967295|o>>>11))+((o=e+(r^(n|~s))+i[12]+1700485571&4294967295)<<6&4294967295|o>>>26))+((o=s+(n^(e|~r))+i[3]+2399980690&4294967295)<<10&4294967295|o>>>22))+((o=r+(e^(s|~n))+i[10]+4293915773&4294967295)<<15&4294967295|o>>>17))+((o=n+(s^(r|~e))+i[1]+2240044497&4294967295)<<21&4294967295|o>>>11))+((o=e+(r^(n|~s))+i[8]+1873313359&4294967295)<<6&4294967295|o>>>26))+((o=s+(n^(e|~r))+i[15]+4264355552&4294967295)<<10&4294967295|o>>>22))+((o=r+(e^(s|~n))+i[6]+2734768916&4294967295)<<15&4294967295|o>>>17))+((o=n+(s^(r|~e))+i[13]+1309151649&4294967295)<<21&4294967295|o>>>11))+((s=(e=n+((o=e+(r^(n|~s))+i[4]+4149444226&4294967295)<<6&4294967295|o>>>26))+((o=s+(n^(e|~r))+i[11]+3174756917&4294967295)<<10&4294967295|o>>>22))^((r=s+((o=r+(e^(s|~n))+i[2]+718787259&4294967295)<<15&4294967295|o>>>17))|~e))+i[9]+3951481745&4294967295,t.g[0]=t.g[0]+e&4294967295,t.g[1]=t.g[1]+(r+(o<<21&4294967295|o>>>11))&4294967295,t.g[2]=t.g[2]+r&4294967295,t.g[3]=t.g[3]+s&4294967295}function i(t,e){this.h=e;for(var n=[],i=!0,r=t.length-1;0<=r;r--){var s=0|t[r];i&&s==e||(n[r]=s,i=!1)}this.g=n}!function(t,e){function n(){}n.prototype=e.prototype,t.D=e.prototype,t.prototype=new n,t.prototype.constructor=t,t.C=function(t,n,i){for(var r=Array(arguments.length-2),s=2;s<arguments.length;s++)r[s-2]=arguments[s];return e.prototype[n].apply(t,r)}}(e,(function(){this.blockSize=-1})),e.prototype.s=function(){this.g[0]=1732584193,this.g[1]=4023233417,this.g[2]=2562383102,this.g[3]=271733878,this.o=this.h=0},e.prototype.u=function(t,e){void 0===e&&(e=t.length);for(var i=e-this.blockSize,r=this.B,s=this.h,o=0;o<e;){if(0==s)for(;o<=i;)n(this,t,o),o+=this.blockSize;if("string"==typeof t){for(;o<e;)if(r[s++]=t.charCodeAt(o++),s==this.blockSize){n(this,r),s=0;break}}else for(;o<e;)if(r[s++]=t[o++],s==this.blockSize){n(this,r),s=0;break}}this.h=s,this.o+=e},e.prototype.v=function(){var t=Array((56>this.h?this.blockSize:2*this.blockSize)-this.h);t[0]=128;for(var e=1;e<t.length-8;++e)t[e]=0;var n=8*this.o;for(e=t.length-8;e<t.length;++e)t[e]=255&n,n/=256;for(this.u(t),t=Array(16),e=n=0;4>e;++e)for(var i=0;32>i;i+=8)t[n++]=this.g[e]>>>i&255;return t};var r={};function s(t){return-128<=t&&128>t?function(t,e){var n=r;return Object.prototype.hasOwnProperty.call(n,t)?n[t]:n[t]=e(t)}(t,(function(t){return new i([0|t],0>t?-1:0)})):new i([0|t],0>t?-1:0)}function o(t){if(isNaN(t)||!isFinite(t))return a;if(0>t)return d(o(-t));for(var e=[],n=1,r=0;t>=n;r++)e[r]=t/n|0,n*=4294967296;return new i(e,0)}var a=s(0),c=s(1),l=s(16777216);function u(t){if(0!=t.h)return!1;for(var e=0;e<t.g.length;e++)if(0!=t.g[e])return!1;return!0}function h(t){return-1==t.h}function d(t){for(var e=t.g.length,n=[],r=0;r<e;r++)n[r]=~t.g[r];return new i(n,~t.h).add(c)}function f(t,e){return t.add(d(e))}function p(t,e){for(;(65535&t[e])!=t[e];)t[e+1]+=t[e]>>>16,t[e]&=65535,e++}function g(t,e){this.g=t,this.h=e}function m(t,e){if(u(e))throw Error("division by zero");if(u(t))return new g(a,a);if(h(t))return e=m(d(t),e),new g(d(e.g),d(e.h));if(h(e))return e=m(t,d(e)),new g(d(e.g),e.h);if(30<t.g.length){if(h(t)||h(e))throw Error("slowDivide_ only works with positive integers.");for(var n=c,i=e;0>=i.l(t);)n=y(n),i=y(i);var r=v(n,1),s=v(i,1);for(i=v(i,2),n=v(n,2);!u(i);){var l=s.add(i);0>=l.l(t)&&(r=r.add(n),s=l),i=v(i,1),n=v(n,1)}return e=f(t,r.j(e)),new g(r,e)}for(r=a;0<=t.l(e);){for(n=Math.max(1,Math.floor(t.m()/e.m())),i=48>=(i=Math.ceil(Math.log(n)/Math.LN2))?1:Math.pow(2,i-48),l=(s=o(n)).j(e);h(l)||0<l.l(t);)l=(s=o(n-=i)).j(e);u(s)&&(s=c),r=r.add(s),t=f(t,l)}return new g(r,t)}function y(t){for(var e=t.g.length+1,n=[],r=0;r<e;r++)n[r]=t.i(r)<<1|t.i(r-1)>>>31;return new i(n,t.h)}function v(t,e){var n=e>>5;e%=32;for(var r=t.g.length-n,s=[],o=0;o<r;o++)s[o]=0<e?t.i(o+n)>>>e|t.i(o+n+1)<<32-e:t.i(o+n);return new i(s,t.h)}(t=i.prototype).m=function(){if(h(this))return-d(this).m();for(var t=0,e=1,n=0;n<this.g.length;n++){var i=this.i(n);t+=(0<=i?i:4294967296+i)*e,e*=4294967296}return t},t.toString=function(t){if(2>(t=t||10)||36<t)throw Error("radix out of range: "+t);if(u(this))return"0";if(h(this))return"-"+d(this).toString(t);for(var e=o(Math.pow(t,6)),n=this,i="";;){var r=m(n,e).g,s=((0<(n=f(n,r.j(e))).g.length?n.g[0]:n.h)>>>0).toString(t);if(u(n=r))return s+i;for(;6>s.length;)s="0"+s;i=s+i}},t.i=function(t){return 0>t?0:t<this.g.length?this.g[t]:this.h},t.l=function(t){return h(t=f(this,t))?-1:u(t)?0:1},t.abs=function(){return h(this)?d(this):this},t.add=function(t){for(var e=Math.max(this.g.length,t.g.length),n=[],r=0,s=0;s<=e;s++){var o=r+(65535&this.i(s))+(65535&t.i(s)),a=(o>>>16)+(this.i(s)>>>16)+(t.i(s)>>>16);r=a>>>16,o&=65535,a&=65535,n[s]=a<<16|o}return new i(n,-2147483648&n[n.length-1]?-1:0)},t.j=function(t){if(u(this)||u(t))return a;if(h(this))return h(t)?d(this).j(d(t)):d(d(this).j(t));if(h(t))return d(this.j(d(t)));if(0>this.l(l)&&0>t.l(l))return o(this.m()*t.m());for(var e=this.g.length+t.g.length,n=[],r=0;r<2*e;r++)n[r]=0;for(r=0;r<this.g.length;r++)for(var s=0;s<t.g.length;s++){var c=this.i(r)>>>16,f=65535&this.i(r),g=t.i(s)>>>16,m=65535&t.i(s);n[2*r+2*s]+=f*m,p(n,2*r+2*s),n[2*r+2*s+1]+=c*m,p(n,2*r+2*s+1),n[2*r+2*s+1]+=f*g,p(n,2*r+2*s+1),n[2*r+2*s+2]+=c*g,p(n,2*r+2*s+2)}for(r=0;r<e;r++)n[r]=n[2*r+1]<<16|n[2*r];for(r=e;r<2*e;r++)n[r]=0;return new i(n,0)},t.A=function(t){return m(this,t).h},t.and=function(t){for(var e=Math.max(this.g.length,t.g.length),n=[],r=0;r<e;r++)n[r]=this.i(r)&t.i(r);return new i(n,this.h&t.h)},t.or=function(t){for(var e=Math.max(this.g.length,t.g.length),n=[],r=0;r<e;r++)n[r]=this.i(r)|t.i(r);return new i(n,this.h|t.h)},t.xor=function(t){for(var e=Math.max(this.g.length,t.g.length),n=[],r=0;r<e;r++)n[r]=this.i(r)^t.i(r);return new i(n,this.h^t.h)},e.prototype.digest=e.prototype.v,e.prototype.reset=e.prototype.s,e.prototype.update=e.prototype.u,na=e,i.prototype.add=i.prototype.add,i.prototype.multiply=i.prototype.j,i.prototype.modulo=i.prototype.A,i.prototype.compare=i.prototype.l,i.prototype.toNumber=i.prototype.m,i.prototype.toString=i.prototype.toString,i.prototype.getBits=i.prototype.i,i.fromNumber=o,i.fromString=function t(e,n){if(0==e.length)throw Error("number format error: empty string");if(2>(n=n||10)||36<n)throw Error("radix out of range: "+n);if("-"==e.charAt(0))return d(t(e.substring(1),n));if(0<=e.indexOf("-"))throw Error('number format error: interior "-" character');for(var i=o(Math.pow(n,8)),r=a,s=0;s<e.length;s+=8){var c=Math.min(8,e.length-s),l=parseInt(e.substring(s,s+c),n);8>c?(c=o(Math.pow(n,c)),r=r.j(c).add(o(l))):r=(r=r.j(i)).add(o(l))}return r},ea=i}).apply(void 0!==ia?ia:"undefined"!=typeof self?self:"undefined"!=typeof window?window:{});var ra,sa,oa,aa,ca,la,ua,ha,da="undefined"!=typeof globalThis?globalThis:"undefined"!=typeof window?window:"undefined"!=typeof global?global:"undefined"!=typeof self?self:{};
/** @license
Copyright The Closure Library Authors.
SPDX-License-Identifier: Apache-2.0
*/(function(){var t,e="function"==typeof Object.defineProperties?Object.defineProperty:function(t,e,n){return t==Array.prototype||t==Object.prototype||(t[e]=n.value),t};var n=function(t){t=["object"==typeof globalThis&&globalThis,t,"object"==typeof window&&window,"object"==typeof self&&self,"object"==typeof da&&da];for(var e=0;e<t.length;++e){var n=t[e];if(n&&n.Math==Math)return n}throw Error("Cannot find global object")}(this);!function(t,i){if(i)t:{var r=n;t=t.split(".");for(var s=0;s<t.length-1;s++){var o=t[s];if(!(o in r))break t;r=r[o]}(i=i(s=r[t=t[t.length-1]]))!=s&&null!=i&&e(r,t,{configurable:!0,writable:!0,value:i})}}("Array.prototype.values",(function(t){return t||function(){return function(t,e){t instanceof String&&(t+="");var n=0,i=!1,r={next:function(){if(!i&&n<t.length){var r=n++;return{value:e(r,t[r]),done:!1}}return i=!0,{done:!0,value:void 0}}};return r[Symbol.iterator]=function(){return r},r}(this,(function(t,e){return e}))}}));
/** @license
  
   Copyright The Closure Library Authors.
   SPDX-License-Identifier: Apache-2.0
  */
var i=i||{},r=this||self;function s(t){var e=typeof t;return"array"==(e="object"!=e?e:t?Array.isArray(t)?"array":e:"null")||"object"==e&&"number"==typeof t.length}function o(t){var e=typeof t;return"object"==e&&null!=t||"function"==e}function a(t,e,n){return t.call.apply(t.bind,arguments)}function c(t,e,n){if(!t)throw Error();if(2<arguments.length){var i=Array.prototype.slice.call(arguments,2);return function(){var n=Array.prototype.slice.call(arguments);return Array.prototype.unshift.apply(n,i),t.apply(e,n)}}return function(){return t.apply(e,arguments)}}function l(t,e,n){return(l=Function.prototype.bind&&-1!=Function.prototype.bind.toString().indexOf("native code")?a:c).apply(null,arguments)}function u(t,e){var n=Array.prototype.slice.call(arguments,1);return function(){var e=n.slice();return e.push.apply(e,arguments),t.apply(this,e)}}function h(t,e){function n(){}n.prototype=e.prototype,t.aa=e.prototype,t.prototype=new n,t.prototype.constructor=t,t.Qb=function(t,n,i){for(var r=Array(arguments.length-2),s=2;s<arguments.length;s++)r[s-2]=arguments[s];return e.prototype[n].apply(t,r)}}function d(t){const e=t.length;if(0<e){const n=Array(e);for(let i=0;i<e;i++)n[i]=t[i];return n}return[]}function f(t,e){for(let n=1;n<arguments.length;n++){const e=arguments[n];if(s(e)){const n=t.length||0,i=e.length||0;t.length=n+i;for(let r=0;r<i;r++)t[n+r]=e[r]}else t.push(e)}}function p(t){return/^[\s\xa0]*$/.test(t)}function g(){var t=r.navigator;return t&&(t=t.userAgent)?t:""}function m(t){return m[" "](t),t}m[" "]=function(){};var y=!(-1==g().indexOf("Gecko")||-1!=g().toLowerCase().indexOf("webkit")&&-1==g().indexOf("Edge")||-1!=g().indexOf("Trident")||-1!=g().indexOf("MSIE")||-1!=g().indexOf("Edge"));function v(t,e,n){for(const i in t)e.call(n,t[i],i,t)}function b(t){const e={};for(const n in t)e[n]=t[n];return e}const w="constructor hasOwnProperty isPrototypeOf propertyIsEnumerable toLocaleString toString valueOf".split(" ");function _(t,e){let n,i;for(let r=1;r<arguments.length;r++){for(n in i=arguments[r],i)t[n]=i[n];for(let e=0;e<w.length;e++)n=w[e],Object.prototype.hasOwnProperty.call(i,n)&&(t[n]=i[n])}}function E(t){var e=1;t=t.split(":");const n=[];for(;0<e&&t.length;)n.push(t.shift()),e--;return t.length&&n.push(t.join(":")),n}function k(t){r.setTimeout((()=>{throw t}),0)}function C(){var t=D;let e=null;return t.g&&(e=t.g,t.g=t.g.next,t.g||(t.h=null),e.next=null),e}var x=new class{constructor(t,e){this.i=t,this.j=e,this.h=0,this.g=null}get(){let t;return 0<this.h?(this.h--,t=this.g,this.g=t.next,t.next=null):t=this.i(),t}}((()=>new T),(t=>t.reset()));class T{constructor(){this.next=this.g=this.h=null}set(t,e){this.h=t,this.g=e,this.next=null}reset(){this.next=this.g=this.h=null}}let S,I=!1,D=new class{constructor(){this.h=this.g=null}add(t,e){const n=x.get();n.set(t,e),this.h?this.h.next=n:this.g=n,this.h=n}},A=()=>{const t=r.Promise.resolve(void 0);S=()=>{t.then(L)}};var L=()=>{for(var t;t=C();){try{t.h.call(t.g)}catch(n){k(n)}var e=x;e.j(t),100>e.h&&(e.h++,t.next=e.g,e.g=t)}I=!1};function O(){this.s=this.s,this.C=this.C}function N(t,e){this.type=t,this.g=this.target=e,this.defaultPrevented=!1}O.prototype.s=!1,O.prototype.ma=function(){this.s||(this.s=!0,this.N())},O.prototype.N=function(){if(this.C)for(;this.C.length;)this.C.shift()()},N.prototype.h=function(){this.defaultPrevented=!0};var M=function(){if(!r.addEventListener||!Object.defineProperty)return!1;var t=!1,e=Object.defineProperty({},"passive",{get:function(){t=!0}});try{const t=()=>{};r.addEventListener("test",t,e),r.removeEventListener("test",t,e)}catch(n){}return t}();function R(t,e){if(N.call(this,t?t.type:""),this.relatedTarget=this.g=this.target=null,this.button=this.screenY=this.screenX=this.clientY=this.clientX=0,this.key="",this.metaKey=this.shiftKey=this.altKey=this.ctrlKey=!1,this.state=null,this.pointerId=0,this.pointerType="",this.i=null,t){var n=this.type=t.type,i=t.changedTouches&&t.changedTouches.length?t.changedTouches[0]:null;if(this.target=t.target||t.srcElement,this.g=e,e=t.relatedTarget){if(y){t:{try{m(e.nodeName);var r=!0;break t}catch(s){}r=!1}r||(e=null)}}else"mouseover"==n?e=t.fromElement:"mouseout"==n&&(e=t.toElement);this.relatedTarget=e,i?(this.clientX=void 0!==i.clientX?i.clientX:i.pageX,this.clientY=void 0!==i.clientY?i.clientY:i.pageY,this.screenX=i.screenX||0,this.screenY=i.screenY||0):(this.clientX=void 0!==t.clientX?t.clientX:t.pageX,this.clientY=void 0!==t.clientY?t.clientY:t.pageY,this.screenX=t.screenX||0,this.screenY=t.screenY||0),this.button=t.button,this.key=t.key||"",this.ctrlKey=t.ctrlKey,this.altKey=t.altKey,this.shiftKey=t.shiftKey,this.metaKey=t.metaKey,this.pointerId=t.pointerId||0,this.pointerType="string"==typeof t.pointerType?t.pointerType:P[t.pointerType]||"",this.state=t.state,this.i=t,t.defaultPrevented&&R.aa.h.call(this)}}h(R,N);var P={2:"touch",3:"pen",4:"mouse"};R.prototype.h=function(){R.aa.h.call(this);var t=this.i;t.preventDefault?t.preventDefault():t.returnValue=!1};var V="closure_listenable_"+(1e6*Math.random()|0),F=0;function B(t,e,n,i,r){this.listener=t,this.proxy=null,this.src=e,this.type=n,this.capture=!!i,this.ha=r,this.key=++F,this.da=this.fa=!1}function j(t){t.da=!0,t.listener=null,t.proxy=null,t.src=null,t.ha=null}function U(t){this.src=t,this.g={},this.h=0}function q(t,e){var n=e.type;if(n in t.g){var i,r=t.g[n],s=Array.prototype.indexOf.call(r,e,void 0);(i=0<=s)&&Array.prototype.splice.call(r,s,1),i&&(j(e),0==t.g[n].length&&(delete t.g[n],t.h--))}}function H(t,e,n,i){for(var r=0;r<t.length;++r){var s=t[r];if(!s.da&&s.listener==e&&s.capture==!!n&&s.ha==i)return r}return-1}U.prototype.add=function(t,e,n,i,r){var s=t.toString();(t=this.g[s])||(t=this.g[s]=[],this.h++);var o=H(t,e,i,r);return-1<o?(e=t[o],n||(e.fa=!1)):((e=new B(e,this.src,s,!!i,r)).fa=n,t.push(e)),e};var z="closure_lm_"+(1e6*Math.random()|0),$={};function K(t,e,n,i,r){if(Array.isArray(e)){for(var s=0;s<e.length;s++)K(t,e[s],n,i,r);return null}return n=Z(n),t&&t[V]?t.K(e,n,!!o(i)&&!!i.capture,r):function(t,e,n,i,r,s){if(!e)throw Error("Invalid event type");var a=o(r)?!!r.capture:!!r,c=X(t);if(c||(t[z]=c=new U(t)),n=c.add(e,n,i,a,s),n.proxy)return n;if(i=function(){function t(n){return e.call(t.src,t.listener,n)}const e=Y;return t}(),n.proxy=i,i.src=t,i.listener=n,t.addEventListener)M||(r=a),void 0===r&&(r=!1),t.addEventListener(e.toString(),i,r);else if(t.attachEvent)t.attachEvent(Q(e.toString()),i);else{if(!t.addListener||!t.removeListener)throw Error("addEventListener and attachEvent are unavailable.");t.addListener(i)}return n}(t,e,n,!1,i,r)}function G(t,e,n,i,r){if(Array.isArray(e))for(var s=0;s<e.length;s++)G(t,e[s],n,i,r);else i=o(i)?!!i.capture:!!i,n=Z(n),t&&t[V]?(t=t.i,(e=String(e).toString())in t.g&&(-1<(n=H(s=t.g[e],n,i,r))&&(j(s[n]),Array.prototype.splice.call(s,n,1),0==s.length&&(delete t.g[e],t.h--)))):t&&(t=X(t))&&(e=t.g[e.toString()],t=-1,e&&(t=H(e,n,i,r)),(n=-1<t?e[t]:null)&&W(n))}function W(t){if("number"!=typeof t&&t&&!t.da){var e=t.src;if(e&&e[V])q(e.i,t);else{var n=t.type,i=t.proxy;e.removeEventListener?e.removeEventListener(n,i,t.capture):e.detachEvent?e.detachEvent(Q(n),i):e.addListener&&e.removeListener&&e.removeListener(i),(n=X(e))?(q(n,t),0==n.h&&(n.src=null,e[z]=null)):j(t)}}}function Q(t){return t in $?$[t]:$[t]="on"+t}function Y(t,e){if(t.da)t=!0;else{e=new R(e,this);var n=t.listener,i=t.ha||t.src;t.fa&&W(t),t=n.call(i,e)}return t}function X(t){return(t=t[z])instanceof U?t:null}var J="__closure_events_fn_"+(1e9*Math.random()>>>0);function Z(t){return"function"==typeof t?t:(t[J]||(t[J]=function(e){return t.handleEvent(e)}),t[J])}function tt(){O.call(this),this.i=new U(this),this.M=this,this.F=null}function et(t,e){var n,i=t.F;if(i)for(n=[];i;i=i.F)n.push(i);if(t=t.M,i=e.type||e,"string"==typeof e)e=new N(e,t);else if(e instanceof N)e.target=e.target||t;else{var r=e;_(e=new N(i,t),r)}if(r=!0,n)for(var s=n.length-1;0<=s;s--){var o=e.g=n[s];r=nt(o,i,!0,e)&&r}if(r=nt(o=e.g=t,i,!0,e)&&r,r=nt(o,i,!1,e)&&r,n)for(s=0;s<n.length;s++)r=nt(o=e.g=n[s],i,!1,e)&&r}function nt(t,e,n,i){if(!(e=t.i.g[String(e)]))return!0;e=e.concat();for(var r=!0,s=0;s<e.length;++s){var o=e[s];if(o&&!o.da&&o.capture==n){var a=o.listener,c=o.ha||o.src;o.fa&&q(t.i,o),r=!1!==a.call(c,i)&&r}}return r&&!i.defaultPrevented}function it(t,e,n){if("function"==typeof t)n&&(t=l(t,n));else{if(!t||"function"!=typeof t.handleEvent)throw Error("Invalid listener argument");t=l(t.handleEvent,t)}return 2147483647<Number(e)?-1:r.setTimeout(t,e||0)}function rt(t){t.g=it((()=>{t.g=null,t.i&&(t.i=!1,rt(t))}),t.l);const e=t.h;t.h=null,t.m.apply(null,e)}h(tt,O),tt.prototype[V]=!0,tt.prototype.removeEventListener=function(t,e,n,i){G(this,t,e,n,i)},tt.prototype.N=function(){if(tt.aa.N.call(this),this.i){var t,e=this.i;for(t in e.g){for(var n=e.g[t],i=0;i<n.length;i++)j(n[i]);delete e.g[t],e.h--}}this.F=null},tt.prototype.K=function(t,e,n,i){return this.i.add(String(t),e,!1,n,i)},tt.prototype.L=function(t,e,n,i){return this.i.add(String(t),e,!0,n,i)};class st extends O{constructor(t,e){super(),this.m=t,this.l=e,this.h=null,this.i=!1,this.g=null}j(t){this.h=arguments,this.g?this.i=!0:rt(this)}N(){super.N(),this.g&&(r.clearTimeout(this.g),this.g=null,this.i=!1,this.h=null)}}function ot(t){O.call(this),this.h=t,this.g={}}h(ot,O);var at=[];function ct(t){v(t.g,(function(t,e){this.g.hasOwnProperty(e)&&W(t)}),t),t.g={}}ot.prototype.N=function(){ot.aa.N.call(this),ct(this)},ot.prototype.handleEvent=function(){throw Error("EventHandler.handleEvent not implemented")};var lt=r.JSON.stringify,ut=r.JSON.parse,ht=class{stringify(t){return r.JSON.stringify(t,void 0)}parse(t){return r.JSON.parse(t,void 0)}};function dt(){}function ft(t){return t.h||(t.h=t.i())}function pt(){}dt.prototype.h=null;var gt={OPEN:"a",kb:"b",Ja:"c",wb:"d"};function mt(){N.call(this,"d")}function yt(){N.call(this,"c")}h(mt,N),h(yt,N);var vt={},bt=null;function wt(){return bt=bt||new tt}function _t(t){N.call(this,vt.La,t)}function Et(t){const e=wt();et(e,new _t(e))}function kt(t,e){N.call(this,vt.STAT_EVENT,t),this.stat=e}function Ct(t){const e=wt();et(e,new kt(e,t))}function xt(t,e){N.call(this,vt.Ma,t),this.size=e}function Tt(t,e){if("function"!=typeof t)throw Error("Fn must not be null and must be a function");return r.setTimeout((function(){t()}),e)}function St(){this.g=!0}function It(t,e,n,i){t.info((function(){return"XMLHTTP TEXT ("+e+"): "+function(t,e){if(!t.g)return e;if(!e)return null;try{var n=JSON.parse(e);if(n)for(t=0;t<n.length;t++)if(Array.isArray(n[t])){var i=n[t];if(!(2>i.length)){var r=i[1];if(Array.isArray(r)&&!(1>r.length)){var s=r[0];if("noop"!=s&&"stop"!=s&&"close"!=s)for(var o=1;o<r.length;o++)r[o]=""}}}return lt(n)}catch(a){return e}}(t,n)+(i?" "+i:"")}))}vt.La="serverreachability",h(_t,N),vt.STAT_EVENT="statevent",h(kt,N),vt.Ma="timingevent",h(xt,N),St.prototype.xa=function(){this.g=!1},St.prototype.info=function(){};var Dt,At={NO_ERROR:0,gb:1,tb:2,sb:3,nb:4,rb:5,ub:6,Ia:7,TIMEOUT:8,xb:9},Lt={lb:"complete",Hb:"success",Ja:"error",Ia:"abort",zb:"ready",Ab:"readystatechange",TIMEOUT:"timeout",vb:"incrementaldata",yb:"progress",ob:"downloadprogress",Pb:"uploadprogress"};function Ot(){}function Nt(t,e,n,i){this.j=t,this.i=e,this.l=n,this.R=i||1,this.U=new ot(this),this.I=45e3,this.H=null,this.o=!1,this.m=this.A=this.v=this.L=this.F=this.S=this.B=null,this.D=[],this.g=null,this.C=0,this.s=this.u=null,this.X=-1,this.J=!1,this.O=0,this.M=null,this.W=this.K=this.T=this.P=!1,this.h=new Mt}function Mt(){this.i=null,this.g="",this.h=!1}h(Ot,dt),Ot.prototype.g=function(){return new XMLHttpRequest},Ot.prototype.i=function(){return{}},Dt=new Ot;var Rt={},Pt={};function Vt(t,e,n){t.L=1,t.v=le(re(e)),t.m=n,t.P=!0,Ft(t,null)}function Ft(t,e){t.F=Date.now(),Ut(t),t.A=re(t.v);var n=t.A,i=t.R;Array.isArray(i)||(i=[String(i)]),Ee(n.i,"t",i),t.C=0,n=t.j.J,t.h=new Mt,t.g=un(t.j,n?e:null,!t.m),0<t.O&&(t.M=new st(l(t.Y,t,t.g),t.O)),e=t.U,n=t.g,i=t.ca;var r="readystatechange";Array.isArray(r)||(r&&(at[0]=r.toString()),r=at);for(var s=0;s<r.length;s++){var o=K(n,r[s],i||e.handleEvent,!1,e.h||e);if(!o)break;e.g[o.key]=o}e=t.H?b(t.H):{},t.m?(t.u||(t.u="POST"),e["Content-Type"]="application/x-www-form-urlencoded",t.g.ea(t.A,t.u,t.m,e)):(t.u="GET",t.g.ea(t.A,t.u,null,e)),Et(),function(t,e,n,i,r,s){t.info((function(){if(t.g)if(s)for(var o="",a=s.split("&"),c=0;c<a.length;c++){var l=a[c].split("=");if(1<l.length){var u=l[0];l=l[1];var h=u.split("_");o=2<=h.length&&"type"==h[1]?o+(u+"=")+l+"&":o+(u+"=redacted&")}}else o=null;else o=s;return"XMLHTTP REQ ("+i+") [attempt "+r+"]: "+e+"\n"+n+"\n"+o}))}(t.i,t.u,t.A,t.l,t.R,t.m)}function Bt(t){return!!t.g&&("GET"==t.u&&2!=t.L&&t.j.Ca)}function jt(t,e){var n=t.C,i=e.indexOf("\n",n);return-1==i?Pt:(n=Number(e.substring(n,i)),isNaN(n)?Rt:(i+=1)+n>e.length?Pt:(e=e.slice(i,i+n),t.C=i+n,e))}function Ut(t){t.S=Date.now()+t.I,qt(t,t.I)}function qt(t,e){if(null!=t.B)throw Error("WatchDog timer not null");t.B=Tt(l(t.ba,t),e)}function Ht(t){t.B&&(r.clearTimeout(t.B),t.B=null)}function zt(t){0==t.j.G||t.J||sn(t.j,t)}function $t(t){Ht(t);var e=t.M;e&&"function"==typeof e.ma&&e.ma(),t.M=null,ct(t.U),t.g&&(e=t.g,t.g=null,e.abort(),e.ma())}function Kt(t,e){try{var n=t.j;if(0!=n.G&&(n.g==t||Xt(n.h,t)))if(!t.K&&Xt(n.h,t)&&3==n.G){try{var i=n.Da.g.parse(e)}catch(u){i=null}if(Array.isArray(i)&&3==i.length){var r=i;if(0==r[0]){t:if(!n.u){if(n.g){if(!(n.g.F+3e3<t.F))break t;rn(n),Ge(n)}tn(n),Ct(18)}}else n.za=r[1],0<n.za-n.T&&37500>r[2]&&n.F&&0==n.v&&!n.C&&(n.C=Tt(l(n.Za,n),6e3));if(1>=Yt(n.h)&&n.ca){try{n.ca()}catch(u){}n.ca=void 0}}else an(n,11)}else if((t.K||n.g==t)&&rn(n),!p(e))for(r=n.Da.g.parse(e),e=0;e<r.length;e++){let l=r[e];if(n.T=l[0],l=l[1],2==n.G)if("c"==l[0]){n.K=l[1],n.ia=l[2];const e=l[3];null!=e&&(n.la=e,n.j.info("VER="+n.la));const r=l[4];null!=r&&(n.Aa=r,n.j.info("SVER="+n.Aa));const u=l[5];null!=u&&"number"==typeof u&&0<u&&(i=1.5*u,n.L=i,n.j.info("backChannelRequestTimeoutMs_="+i)),i=n;const h=t.g;if(h){const t=h.g?h.g.getResponseHeader("X-Client-Wire-Protocol"):null;if(t){var s=i.h;s.g||-1==t.indexOf("spdy")&&-1==t.indexOf("quic")&&-1==t.indexOf("h2")||(s.j=s.l,s.g=new Set,s.h&&(Jt(s,s.h),s.h=null))}if(i.D){const t=h.g?h.g.getResponseHeader("X-HTTP-Session-Id"):null;t&&(i.ya=t,ce(i.I,i.D,t))}}n.G=3,n.l&&n.l.ua(),n.ba&&(n.R=Date.now()-t.F,n.j.info("Handshake RTT: "+n.R+"ms"));var o=t;if((i=n).qa=ln(i,i.J?i.ia:null,i.W),o.K){Zt(i.h,o);var a=o,c=i.L;c&&(a.I=c),a.B&&(Ht(a),Ut(a)),i.g=o}else Ze(i);0<n.i.length&&Qe(n)}else"stop"!=l[0]&&"close"!=l[0]||an(n,7);else 3==n.G&&("stop"==l[0]||"close"==l[0]?"stop"==l[0]?an(n,7):Ke(n):"noop"!=l[0]&&n.l&&n.l.ta(l),n.v=0)}Et()}catch(u){}}Nt.prototype.ca=function(t){t=t.target;const e=this.M;e&&3==qe(t)?e.j():this.Y(t)},Nt.prototype.Y=function(t){try{if(t==this.g)t:{const d=qe(this.g);var e=this.g.Ba();this.g.Z();if(!(3>d)&&(3!=d||this.g&&(this.h.h||this.g.oa()||He(this.g)))){this.J||4!=d||7==e||Et(),Ht(this);var n=this.g.Z();this.X=n;e:if(Bt(this)){var i=He(this.g);t="";var s=i.length,o=4==qe(this.g);if(!this.h.i){if("undefined"==typeof TextDecoder){$t(this),zt(this);var a="";break e}this.h.i=new r.TextDecoder}for(e=0;e<s;e++)this.h.h=!0,t+=this.h.i.decode(i[e],{stream:!(o&&e==s-1)});i.length=0,this.h.g+=t,this.C=0,a=this.h.g}else a=this.g.oa();if(this.o=200==n,function(t,e,n,i,r,s,o){t.info((function(){return"XMLHTTP RESP ("+i+") [ attempt "+r+"]: "+e+"\n"+n+"\n"+s+" "+o}))}(this.i,this.u,this.A,this.l,this.R,d,n),this.o){if(this.T&&!this.K){e:{if(this.g){var c,l=this.g;if((c=l.g?l.g.getResponseHeader("X-HTTP-Initial-Response"):null)&&!p(c)){var u=c;break e}}u=null}if(!(n=u)){this.o=!1,this.s=3,Ct(12),$t(this),zt(this);break t}It(this.i,this.l,n,"Initial handshake response via X-HTTP-Initial-Response"),this.K=!0,Kt(this,n)}if(this.P){let t;for(n=!0;!this.J&&this.C<a.length;){if(t=jt(this,a),t==Pt){4==d&&(this.s=4,Ct(14),n=!1),It(this.i,this.l,null,"[Incomplete Response]");break}if(t==Rt){this.s=4,Ct(15),It(this.i,this.l,a,"[Invalid Chunk]"),n=!1;break}It(this.i,this.l,t,null),Kt(this,t)}if(Bt(this)&&0!=this.C&&(this.h.g=this.h.g.slice(this.C),this.C=0),4!=d||0!=a.length||this.h.h||(this.s=1,Ct(16),n=!1),this.o=this.o&&n,n){if(0<a.length&&!this.W){this.W=!0;var h=this.j;h.g==this&&h.ba&&!h.M&&(h.j.info("Great, no buffering proxy detected. Bytes received: "+a.length),en(h),h.M=!0,Ct(11))}}else It(this.i,this.l,a,"[Invalid Chunked Response]"),$t(this),zt(this)}else It(this.i,this.l,a,null),Kt(this,a);4==d&&$t(this),this.o&&!this.J&&(4==d?sn(this.j,this):(this.o=!1,Ut(this)))}else(function(t){const e={};t=(t.g&&2<=qe(t)&&t.g.getAllResponseHeaders()||"").split("\r\n");for(let i=0;i<t.length;i++){if(p(t[i]))continue;var n=E(t[i]);const r=n[0];if("string"!=typeof(n=n[1]))continue;n=n.trim();const s=e[r]||[];e[r]=s,s.push(n)}!function(t,e){for(const n in t)e.call(void 0,t[n],n,t)}(e,(function(t){return t.join(", ")}))})(this.g),400==n&&0<a.indexOf("Unknown SID")?(this.s=3,Ct(12)):(this.s=0,Ct(13)),$t(this),zt(this)}}}catch(d){}},Nt.prototype.cancel=function(){this.J=!0,$t(this)},Nt.prototype.ba=function(){this.B=null;const t=Date.now();0<=t-this.S?(function(t,e){t.info((function(){return"TIMEOUT: "+e}))}(this.i,this.A),2!=this.L&&(Et(),Ct(17)),$t(this),this.s=2,zt(this)):qt(this,this.S-t)};var Gt=class{constructor(t,e){this.g=t,this.map=e}};function Wt(t){this.l=t||10,r.PerformanceNavigationTiming?t=0<(t=r.performance.getEntriesByType("navigation")).length&&("hq"==t[0].nextHopProtocol||"h2"==t[0].nextHopProtocol):t=!!(r.chrome&&r.chrome.loadTimes&&r.chrome.loadTimes()&&r.chrome.loadTimes().wasFetchedViaSpdy),this.j=t?this.l:1,this.g=null,1<this.j&&(this.g=new Set),this.h=null,this.i=[]}function Qt(t){return!!t.h||!!t.g&&t.g.size>=t.j}function Yt(t){return t.h?1:t.g?t.g.size:0}function Xt(t,e){return t.h?t.h==e:!!t.g&&t.g.has(e)}function Jt(t,e){t.g?t.g.add(e):t.h=e}function Zt(t,e){t.h&&t.h==e?t.h=null:t.g&&t.g.has(e)&&t.g.delete(e)}function te(t){if(null!=t.h)return t.i.concat(t.h.D);if(null!=t.g&&0!==t.g.size){let e=t.i;for(const n of t.g.values())e=e.concat(n.D);return e}return d(t.i)}function ee(t,e){if(t.forEach&&"function"==typeof t.forEach)t.forEach(e,void 0);else if(s(t)||"string"==typeof t)Array.prototype.forEach.call(t,e,void 0);else for(var n=function(t){if(t.na&&"function"==typeof t.na)return t.na();if(!t.V||"function"!=typeof t.V){if("undefined"!=typeof Map&&t instanceof Map)return Array.from(t.keys());if(!("undefined"!=typeof Set&&t instanceof Set)){if(s(t)||"string"==typeof t){var e=[];t=t.length;for(var n=0;n<t;n++)e.push(n);return e}e=[],n=0;for(const i in t)e[n++]=i;return e}}}(t),i=function(t){if(t.V&&"function"==typeof t.V)return t.V();if("undefined"!=typeof Map&&t instanceof Map||"undefined"!=typeof Set&&t instanceof Set)return Array.from(t.values());if("string"==typeof t)return t.split("");if(s(t)){for(var e=[],n=t.length,i=0;i<n;i++)e.push(t[i]);return e}for(i in e=[],n=0,t)e[n++]=t[i];return e}(t),r=i.length,o=0;o<r;o++)e.call(void 0,i[o],n&&n[o],t)}Wt.prototype.cancel=function(){if(this.i=te(this),this.h)this.h.cancel(),this.h=null;else if(this.g&&0!==this.g.size){for(const t of this.g.values())t.cancel();this.g.clear()}};var ne=RegExp("^(?:([^:/?#.]+):)?(?://(?:([^\\\\/?#]*)@)?([^\\\\/?#]*?)(?::([0-9]+))?(?=[\\\\/?#]|$))?([^?#]+)?(?:\\?([^#]*))?(?:#([\\s\\S]*))?$");function ie(t){if(this.g=this.o=this.j="",this.s=null,this.m=this.l="",this.h=!1,t instanceof ie){this.h=t.h,se(this,t.j),this.o=t.o,this.g=t.g,oe(this,t.s),this.l=t.l;var e=t.i,n=new ve;n.i=e.i,e.g&&(n.g=new Map(e.g),n.h=e.h),ae(this,n),this.m=t.m}else t&&(e=String(t).match(ne))?(this.h=!1,se(this,e[1]||"",!0),this.o=ue(e[2]||""),this.g=ue(e[3]||"",!0),oe(this,e[4]),this.l=ue(e[5]||"",!0),ae(this,e[6]||"",!0),this.m=ue(e[7]||"")):(this.h=!1,this.i=new ve(null,this.h))}function re(t){return new ie(t)}function se(t,e,n){t.j=n?ue(e,!0):e,t.j&&(t.j=t.j.replace(/:$/,""))}function oe(t,e){if(e){if(e=Number(e),isNaN(e)||0>e)throw Error("Bad port number "+e);t.s=e}else t.s=null}function ae(t,e,n){e instanceof ve?(t.i=e,function(t,e){e&&!t.j&&(be(t),t.i=null,t.g.forEach((function(t,e){var n=e.toLowerCase();e!=n&&(we(this,e),Ee(this,n,t))}),t)),t.j=e}(t.i,t.h)):(n||(e=he(e,me)),t.i=new ve(e,t.h))}function ce(t,e,n){t.i.set(e,n)}function le(t){return ce(t,"zx",Math.floor(2147483648*Math.random()).toString(36)+Math.abs(Math.floor(2147483648*Math.random())^Date.now()).toString(36)),t}function ue(t,e){return t?e?decodeURI(t.replace(/%25/g,"%2525")):decodeURIComponent(t):""}function he(t,e,n){return"string"==typeof t?(t=encodeURI(t).replace(e,de),n&&(t=t.replace(/%25([0-9a-fA-F]{2})/g,"%$1")),t):null}function de(t){return"%"+((t=t.charCodeAt(0))>>4&15).toString(16)+(15&t).toString(16)}ie.prototype.toString=function(){var t=[],e=this.j;e&&t.push(he(e,fe,!0),":");var n=this.g;return(n||"file"==e)&&(t.push("//"),(e=this.o)&&t.push(he(e,fe,!0),"@"),t.push(encodeURIComponent(String(n)).replace(/%25([0-9a-fA-F]{2})/g,"%$1")),null!=(n=this.s)&&t.push(":",String(n))),(n=this.l)&&(this.g&&"/"!=n.charAt(0)&&t.push("/"),t.push(he(n,"/"==n.charAt(0)?ge:pe,!0))),(n=this.i.toString())&&t.push("?",n),(n=this.m)&&t.push("#",he(n,ye)),t.join("")};var fe=/[#\/\?@]/g,pe=/[#\?:]/g,ge=/[#\?]/g,me=/[#\?@]/g,ye=/#/g;function ve(t,e){this.h=this.g=null,this.i=t||null,this.j=!!e}function be(t){t.g||(t.g=new Map,t.h=0,t.i&&function(t,e){if(t){t=t.split("&");for(var n=0;n<t.length;n++){var i=t[n].indexOf("="),r=null;if(0<=i){var s=t[n].substring(0,i);r=t[n].substring(i+1)}else s=t[n];e(s,r?decodeURIComponent(r.replace(/\+/g," ")):"")}}}(t.i,(function(e,n){t.add(decodeURIComponent(e.replace(/\+/g," ")),n)})))}function we(t,e){be(t),e=ke(t,e),t.g.has(e)&&(t.i=null,t.h-=t.g.get(e).length,t.g.delete(e))}function _e(t,e){return be(t),e=ke(t,e),t.g.has(e)}function Ee(t,e,n){we(t,e),0<n.length&&(t.i=null,t.g.set(ke(t,e),d(n)),t.h+=n.length)}function ke(t,e){return e=String(e),t.j&&(e=e.toLowerCase()),e}function Ce(t,e,n,i,r){try{r&&(r.onload=null,r.onerror=null,r.onabort=null,r.ontimeout=null),i(n)}catch(s){}}function xe(){this.g=new ht}function Te(t,e,n){const i=n||"";try{ee(t,(function(t,n){let r=t;o(t)&&(r=lt(t)),e.push(i+n+"="+encodeURIComponent(r))}))}catch(r){throw e.push(i+"type="+encodeURIComponent("_badmap")),r}}function Se(t){this.l=t.Ub||null,this.j=t.eb||!1}function Ie(t,e){tt.call(this),this.D=t,this.o=e,this.m=void 0,this.status=this.readyState=0,this.responseType=this.responseText=this.response=this.statusText="",this.onreadystatechange=null,this.u=new Headers,this.h=null,this.B="GET",this.A="",this.g=!1,this.v=this.j=this.l=null}function De(t){t.j.read().then(t.Pa.bind(t)).catch(t.ga.bind(t))}function Ae(t){t.readyState=4,t.l=null,t.j=null,t.v=null,Le(t)}function Le(t){t.onreadystatechange&&t.onreadystatechange.call(t)}function Oe(t){let e="";return v(t,(function(t,n){e+=n,e+=":",e+=t,e+="\r\n"})),e}function Ne(t,e,n){t:{for(i in n){var i=!1;break t}i=!0}i||(n=Oe(n),"string"==typeof t?null!=n&&encodeURIComponent(String(n)):ce(t,e,n))}function Me(t){tt.call(this),this.headers=new Map,this.o=t||null,this.h=!1,this.v=this.g=null,this.D="",this.m=0,this.l="",this.j=this.B=this.u=this.A=!1,this.I=null,this.H="",this.J=!1}(t=ve.prototype).add=function(t,e){be(this),this.i=null,t=ke(this,t);var n=this.g.get(t);return n||this.g.set(t,n=[]),n.push(e),this.h+=1,this},t.forEach=function(t,e){be(this),this.g.forEach((function(n,i){n.forEach((function(n){t.call(e,n,i,this)}),this)}),this)},t.na=function(){be(this);const t=Array.from(this.g.values()),e=Array.from(this.g.keys()),n=[];for(let i=0;i<e.length;i++){const r=t[i];for(let t=0;t<r.length;t++)n.push(e[i])}return n},t.V=function(t){be(this);let e=[];if("string"==typeof t)_e(this,t)&&(e=e.concat(this.g.get(ke(this,t))));else{t=Array.from(this.g.values());for(let n=0;n<t.length;n++)e=e.concat(t[n])}return e},t.set=function(t,e){return be(this),this.i=null,_e(this,t=ke(this,t))&&(this.h-=this.g.get(t).length),this.g.set(t,[e]),this.h+=1,this},t.get=function(t,e){return t&&0<(t=this.V(t)).length?String(t[0]):e},t.toString=function(){if(this.i)return this.i;if(!this.g)return"";const t=[],e=Array.from(this.g.keys());for(var n=0;n<e.length;n++){var i=e[n];const s=encodeURIComponent(String(i)),o=this.V(i);for(i=0;i<o.length;i++){var r=s;""!==o[i]&&(r+="="+encodeURIComponent(String(o[i]))),t.push(r)}}return this.i=t.join("&")},h(Se,dt),Se.prototype.g=function(){return new Ie(this.l,this.j)},Se.prototype.i=function(t){return function(){return t}}({}),h(Ie,tt),(t=Ie.prototype).open=function(t,e){if(0!=this.readyState)throw this.abort(),Error("Error reopening a connection");this.B=t,this.A=e,this.readyState=1,Le(this)},t.send=function(t){if(1!=this.readyState)throw this.abort(),Error("need to call open() first. ");this.g=!0;const e={headers:this.u,method:this.B,credentials:this.m,cache:void 0};t&&(e.body=t),(this.D||r).fetch(new Request(this.A,e)).then(this.Sa.bind(this),this.ga.bind(this))},t.abort=function(){this.response=this.responseText="",this.u=new Headers,this.status=0,this.j&&this.j.cancel("Request was aborted.").catch((()=>{})),1<=this.readyState&&this.g&&4!=this.readyState&&(this.g=!1,Ae(this)),this.readyState=0},t.Sa=function(t){if(this.g&&(this.l=t,this.h||(this.status=this.l.status,this.statusText=this.l.statusText,this.h=t.headers,this.readyState=2,Le(this)),this.g&&(this.readyState=3,Le(this),this.g)))if("arraybuffer"===this.responseType)t.arrayBuffer().then(this.Qa.bind(this),this.ga.bind(this));else if(void 0!==r.ReadableStream&&"body"in t){if(this.j=t.body.getReader(),this.o){if(this.responseType)throw Error('responseType must be empty for "streamBinaryChunks" mode responses.');this.response=[]}else this.response=this.responseText="",this.v=new TextDecoder;De(this)}else t.text().then(this.Ra.bind(this),this.ga.bind(this))},t.Pa=function(t){if(this.g){if(this.o&&t.value)this.response.push(t.value);else if(!this.o){var e=t.value?t.value:new Uint8Array(0);(e=this.v.decode(e,{stream:!t.done}))&&(this.response=this.responseText+=e)}t.done?Ae(this):Le(this),3==this.readyState&&De(this)}},t.Ra=function(t){this.g&&(this.response=this.responseText=t,Ae(this))},t.Qa=function(t){this.g&&(this.response=t,Ae(this))},t.ga=function(){this.g&&Ae(this)},t.setRequestHeader=function(t,e){this.u.append(t,e)},t.getResponseHeader=function(t){return this.h&&this.h.get(t.toLowerCase())||""},t.getAllResponseHeaders=function(){if(!this.h)return"";const t=[],e=this.h.entries();for(var n=e.next();!n.done;)n=n.value,t.push(n[0]+": "+n[1]),n=e.next();return t.join("\r\n")},Object.defineProperty(Ie.prototype,"withCredentials",{get:function(){return"include"===this.m},set:function(t){this.m=t?"include":"same-origin"}}),h(Me,tt);var Re=/^https?$/i,Pe=["POST","PUT"];function Ve(t,e){t.h=!1,t.g&&(t.j=!0,t.g.abort(),t.j=!1),t.l=e,t.m=5,Fe(t),je(t)}function Fe(t){t.A||(t.A=!0,et(t,"complete"),et(t,"error"))}function Be(t){if(t.h&&void 0!==i&&(!t.v[1]||4!=qe(t)||2!=t.Z()))if(t.u&&4==qe(t))it(t.Ea,0,t);else if(et(t,"readystatechange"),4==qe(t)){t.h=!1;try{const i=t.Z();t:switch(i){case 200:case 201:case 202:case 204:case 206:case 304:case 1223:var e=!0;break t;default:e=!1}var n;if(!(n=e)){var s;if(s=0===i){var o=String(t.D).match(ne)[1]||null;!o&&r.self&&r.self.location&&(o=r.self.location.protocol.slice(0,-1)),s=!Re.test(o?o.toLowerCase():"")}n=s}if(n)et(t,"complete"),et(t,"success");else{t.m=6;try{var a=2<qe(t)?t.g.statusText:""}catch(c){a=""}t.l=a+" ["+t.Z()+"]",Fe(t)}}finally{je(t)}}}function je(t,e){if(t.g){Ue(t);const i=t.g,r=t.v[0]?()=>{}:null;t.g=null,t.v=null,e||et(t,"ready");try{i.onreadystatechange=r}catch(n){}}}function Ue(t){t.I&&(r.clearTimeout(t.I),t.I=null)}function qe(t){return t.g?t.g.readyState:0}function He(t){try{if(!t.g)return null;if("response"in t.g)return t.g.response;switch(t.H){case"":case"text":return t.g.responseText;case"arraybuffer":if("mozResponseArrayBuffer"in t.g)return t.g.mozResponseArrayBuffer}return null}catch(e){return null}}function ze(t,e,n){return n&&n.internalChannelParams&&n.internalChannelParams[t]||e}function $e(t){this.Aa=0,this.i=[],this.j=new St,this.ia=this.qa=this.I=this.W=this.g=this.ya=this.D=this.H=this.m=this.S=this.o=null,this.Ya=this.U=0,this.Va=ze("failFast",!1,t),this.F=this.C=this.u=this.s=this.l=null,this.X=!0,this.za=this.T=-1,this.Y=this.v=this.B=0,this.Ta=ze("baseRetryDelayMs",5e3,t),this.cb=ze("retryDelaySeedMs",1e4,t),this.Wa=ze("forwardChannelMaxRetries",2,t),this.wa=ze("forwardChannelRequestTimeoutMs",2e4,t),this.pa=t&&t.xmlHttpFactory||void 0,this.Xa=t&&t.Tb||void 0,this.Ca=t&&t.useFetchStreams||!1,this.L=void 0,this.J=t&&t.supportsCrossDomainXhr||!1,this.K="",this.h=new Wt(t&&t.concurrentRequestLimit),this.Da=new xe,this.P=t&&t.fastHandshake||!1,this.O=t&&t.encodeInitMessageHeaders||!1,this.P&&this.O&&(this.O=!1),this.Ua=t&&t.Rb||!1,t&&t.xa&&this.j.xa(),t&&t.forceLongPolling&&(this.X=!1),this.ba=!this.P&&this.X&&t&&t.detectBufferingProxy||!1,this.ja=void 0,t&&t.longPollingTimeout&&0<t.longPollingTimeout&&(this.ja=t.longPollingTimeout),this.ca=void 0,this.R=0,this.M=!1,this.ka=this.A=null}function Ke(t){if(We(t),3==t.G){var e=t.U++,n=re(t.I);if(ce(n,"SID",t.K),ce(n,"RID",e),ce(n,"TYPE","terminate"),Xe(t,n),(e=new Nt(t,t.j,e)).L=2,e.v=le(re(n)),n=!1,r.navigator&&r.navigator.sendBeacon)try{n=r.navigator.sendBeacon(e.v.toString(),"")}catch(i){}!n&&r.Image&&((new Image).src=e.v,n=!0),n||(e.g=un(e.j,null),e.g.ea(e.v)),e.F=Date.now(),Ut(e)}cn(t)}function Ge(t){t.g&&(en(t),t.g.cancel(),t.g=null)}function We(t){Ge(t),t.u&&(r.clearTimeout(t.u),t.u=null),rn(t),t.h.cancel(),t.s&&("number"==typeof t.s&&r.clearTimeout(t.s),t.s=null)}function Qe(t){if(!Qt(t.h)&&!t.s){t.s=!0;var e=t.Ga;S||A(),I||(S(),I=!0),D.add(e,t),t.B=0}}function Ye(t,e){var n;n=e?e.l:t.U++;const i=re(t.I);ce(i,"SID",t.K),ce(i,"RID",n),ce(i,"AID",t.T),Xe(t,i),t.m&&t.o&&Ne(i,t.m,t.o),n=new Nt(t,t.j,n,t.B+1),null===t.m&&(n.H=t.o),e&&(t.i=e.D.concat(t.i)),e=Je(t,n,1e3),n.I=Math.round(.5*t.wa)+Math.round(.5*t.wa*Math.random()),Jt(t.h,n),Vt(n,i,e)}function Xe(t,e){t.H&&v(t.H,(function(t,n){ce(e,n,t)})),t.l&&ee({},(function(t,n){ce(e,n,t)}))}function Je(t,e,n){n=Math.min(t.i.length,n);var i=t.l?l(t.l.Na,t.l,t):null;t:{var r=t.i;let e=-1;for(;;){const t=["count="+n];-1==e?0<n?(e=r[0].g,t.push("ofs="+e)):e=0:t.push("ofs="+e);let o=!0;for(let a=0;a<n;a++){let n=r[a].g;const c=r[a].map;if(n-=e,0>n)e=Math.max(0,r[a].g-100),o=!1;else try{Te(c,t,"req"+n+"_")}catch(s){i&&i(c)}}if(o){i=t.join("&");break t}}}return t=t.i.splice(0,n),e.D=t,i}function Ze(t){if(!t.g&&!t.u){t.Y=1;var e=t.Fa;S||A(),I||(S(),I=!0),D.add(e,t),t.v=0}}function tn(t){return!(t.g||t.u||3<=t.v)&&(t.Y++,t.u=Tt(l(t.Fa,t),on(t,t.v)),t.v++,!0)}function en(t){null!=t.A&&(r.clearTimeout(t.A),t.A=null)}function nn(t){t.g=new Nt(t,t.j,"rpc",t.Y),null===t.m&&(t.g.H=t.o),t.g.O=0;var e=re(t.qa);ce(e,"RID","rpc"),ce(e,"SID",t.K),ce(e,"AID",t.T),ce(e,"CI",t.F?"0":"1"),!t.F&&t.ja&&ce(e,"TO",t.ja),ce(e,"TYPE","xmlhttp"),Xe(t,e),t.m&&t.o&&Ne(e,t.m,t.o),t.L&&(t.g.I=t.L);var n=t.g;t=t.ia,n.L=1,n.v=le(re(e)),n.m=null,n.P=!0,Ft(n,t)}function rn(t){null!=t.C&&(r.clearTimeout(t.C),t.C=null)}function sn(t,e){var n=null;if(t.g==e){rn(t),en(t),t.g=null;var i=2}else{if(!Xt(t.h,e))return;n=e.D,Zt(t.h,e),i=1}if(0!=t.G)if(e.o)if(1==i){n=e.m?e.m.length:0,e=Date.now()-e.F;var r=t.B;et(i=wt(),new xt(i,n)),Qe(t)}else Ze(t);else if(3==(r=e.s)||0==r&&0<e.X||!(1==i&&function(t,e){return!(Yt(t.h)>=t.h.j-(t.s?1:0)||(t.s?(t.i=e.D.concat(t.i),0):1==t.G||2==t.G||t.B>=(t.Va?0:t.Wa)||(t.s=Tt(l(t.Ga,t,e),on(t,t.B)),t.B++,0)))}(t,e)||2==i&&tn(t)))switch(n&&0<n.length&&(e=t.h,e.i=e.i.concat(n)),r){case 1:an(t,5);break;case 4:an(t,10);break;case 3:an(t,6);break;default:an(t,2)}}function on(t,e){let n=t.Ta+Math.floor(Math.random()*t.cb);return t.isActive()||(n*=2),n*e}function an(t,e){if(t.j.info("Error code "+e),2==e){var n=l(t.fb,t),i=t.Xa;const e=!i;i=new ie(i||"//www.google.com/images/cleardot.gif"),r.location&&"http"==r.location.protocol||se(i,"https"),le(i),e?function(t,e){const n=new St;if(r.Image){const i=new Image;i.onload=u(Ce,n,"TestLoadImage: loaded",!0,e,i),i.onerror=u(Ce,n,"TestLoadImage: error",!1,e,i),i.onabort=u(Ce,n,"TestLoadImage: abort",!1,e,i),i.ontimeout=u(Ce,n,"TestLoadImage: timeout",!1,e,i),r.setTimeout((function(){i.ontimeout&&i.ontimeout()}),1e4),i.src=t}else e(!1)}(i.toString(),n):function(t,e){new St;const n=new AbortController,i=setTimeout((()=>{n.abort(),Ce(0,0,!1,e)}),1e4);fetch(t,{signal:n.signal}).then((t=>{clearTimeout(i),t.ok?Ce(0,0,!0,e):Ce(0,0,!1,e)})).catch((()=>{clearTimeout(i),Ce(0,0,!1,e)}))}(i.toString(),n)}else Ct(2);t.G=0,t.l&&t.l.sa(e),cn(t),We(t)}function cn(t){if(t.G=0,t.ka=[],t.l){const e=te(t.h);0==e.length&&0==t.i.length||(f(t.ka,e),f(t.ka,t.i),t.h.i.length=0,d(t.i),t.i.length=0),t.l.ra()}}function ln(t,e,n){var i=n instanceof ie?re(n):new ie(n);if(""!=i.g)e&&(i.g=e+"."+i.g),oe(i,i.s);else{var s=r.location;i=s.protocol,e=e?e+"."+s.hostname:s.hostname,s=+s.port;var o=new ie(null);i&&se(o,i),e&&(o.g=e),s&&oe(o,s),n&&(o.l=n),i=o}return n=t.D,e=t.ya,n&&e&&ce(i,n,e),ce(i,"VER",t.la),Xe(t,i),i}function un(t,e,n){if(e&&!t.J)throw Error("Can't create secondary domain capable XhrIo object.");return(e=t.Ca&&!t.pa?new Me(new Se({eb:n})):new Me(t.pa)).Ha(t.J),e}function hn(){}function dn(){}function fn(t,e){tt.call(this),this.g=new $e(e),this.l=t,this.h=e&&e.messageUrlParams||null,t=e&&e.messageHeaders||null,e&&e.clientProtocolHeaderRequired&&(t?t["X-Client-Protocol"]="webchannel":t={"X-Client-Protocol":"webchannel"}),this.g.o=t,t=e&&e.initMessageHeaders||null,e&&e.messageContentType&&(t?t["X-WebChannel-Content-Type"]=e.messageContentType:t={"X-WebChannel-Content-Type":e.messageContentType}),e&&e.va&&(t?t["X-WebChannel-Client-Profile"]=e.va:t={"X-WebChannel-Client-Profile":e.va}),this.g.S=t,(t=e&&e.Sb)&&!p(t)&&(this.g.m=t),this.v=e&&e.supportsCrossDomainXhr||!1,this.u=e&&e.sendRawJson||!1,(e=e&&e.httpSessionIdParam)&&!p(e)&&(this.g.D=e,null!==(t=this.h)&&e in t&&(e in(t=this.h)&&delete t[e])),this.j=new mn(this)}function pn(t){mt.call(this),t.__headers__&&(this.headers=t.__headers__,this.statusCode=t.__status__,delete t.__headers__,delete t.__status__);var e=t.__sm__;if(e){t:{for(const n in e){t=n;break t}t=void 0}(this.i=t)&&(t=this.i,e=null!==e&&t in e?e[t]:void 0),this.data=e}else this.data=t}function gn(){yt.call(this),this.status=1}function mn(t){this.g=t}(t=Me.prototype).Ha=function(t){this.J=t},t.ea=function(t,e,n,i){if(this.g)throw Error("[goog.net.XhrIo] Object is active with another request="+this.D+"; newUri="+t);e=e?e.toUpperCase():"GET",this.D=t,this.l="",this.m=0,this.A=!1,this.h=!0,this.g=this.o?this.o.g():Dt.g(),this.v=this.o?ft(this.o):ft(Dt),this.g.onreadystatechange=l(this.Ea,this);try{this.B=!0,this.g.open(e,String(t),!0),this.B=!1}catch(o){return void Ve(this,o)}if(t=n||"",n=new Map(this.headers),i)if(Object.getPrototypeOf(i)===Object.prototype)for(var s in i)n.set(s,i[s]);else{if("function"!=typeof i.keys||"function"!=typeof i.get)throw Error("Unknown input type for opt_headers: "+String(i));for(const t of i.keys())n.set(t,i.get(t))}i=Array.from(n.keys()).find((t=>"content-type"==t.toLowerCase())),s=r.FormData&&t instanceof r.FormData,!(0<=Array.prototype.indexOf.call(Pe,e,void 0))||i||s||n.set("Content-Type","application/x-www-form-urlencoded;charset=utf-8");for(const[r,a]of n)this.g.setRequestHeader(r,a);this.H&&(this.g.responseType=this.H),"withCredentials"in this.g&&this.g.withCredentials!==this.J&&(this.g.withCredentials=this.J);try{Ue(this),this.u=!0,this.g.send(t),this.u=!1}catch(o){Ve(this,o)}},t.abort=function(t){this.g&&this.h&&(this.h=!1,this.j=!0,this.g.abort(),this.j=!1,this.m=t||7,et(this,"complete"),et(this,"abort"),je(this))},t.N=function(){this.g&&(this.h&&(this.h=!1,this.j=!0,this.g.abort(),this.j=!1),je(this,!0)),Me.aa.N.call(this)},t.Ea=function(){this.s||(this.B||this.u||this.j?Be(this):this.bb())},t.bb=function(){Be(this)},t.isActive=function(){return!!this.g},t.Z=function(){try{return 2<qe(this)?this.g.status:-1}catch(t){return-1}},t.oa=function(){try{return this.g?this.g.responseText:""}catch(t){return""}},t.Oa=function(t){if(this.g){var e=this.g.responseText;return t&&0==e.indexOf(t)&&(e=e.substring(t.length)),ut(e)}},t.Ba=function(){return this.m},t.Ka=function(){return"string"==typeof this.l?this.l:String(this.l)},(t=$e.prototype).la=8,t.G=1,t.connect=function(t,e,n,i){Ct(0),this.W=t,this.H=e||{},n&&void 0!==i&&(this.H.OSID=n,this.H.OAID=i),this.F=this.X,this.I=ln(this,null,this.W),Qe(this)},t.Ga=function(t){if(this.s)if(this.s=null,1==this.G){if(!t){this.U=Math.floor(1e5*Math.random()),t=this.U++;const r=new Nt(this,this.j,t);let s=this.o;if(this.S&&(s?(s=b(s),_(s,this.S)):s=this.S),null!==this.m||this.O||(r.H=s,s=null),this.P)t:{for(var e=0,n=0;n<this.i.length;n++){var i=this.i[n];if(void 0===(i="__data__"in i.map&&"string"==typeof(i=i.map.__data__)?i.length:void 0))break;if(4096<(e+=i)){e=n;break t}if(4096===e||n===this.i.length-1){e=n+1;break t}}e=1e3}else e=1e3;e=Je(this,r,e),ce(n=re(this.I),"RID",t),ce(n,"CVER",22),this.D&&ce(n,"X-HTTP-Session-Id",this.D),Xe(this,n),s&&(this.O?e="headers="+encodeURIComponent(String(Oe(s)))+"&"+e:this.m&&Ne(n,this.m,s)),Jt(this.h,r),this.Ua&&ce(n,"TYPE","init"),this.P?(ce(n,"$req",e),ce(n,"SID","null"),r.T=!0,Vt(r,n,null)):Vt(r,n,e),this.G=2}}else 3==this.G&&(t?Ye(this,t):0==this.i.length||Qt(this.h)||Ye(this))},t.Fa=function(){if(this.u=null,nn(this),this.ba&&!(this.M||null==this.g||0>=this.R)){var t=2*this.R;this.j.info("BP detection timer enabled: "+t),this.A=Tt(l(this.ab,this),t)}},t.ab=function(){this.A&&(this.A=null,this.j.info("BP detection timeout reached."),this.j.info("Buffering proxy detected and switch to long-polling!"),this.F=!1,this.M=!0,Ct(10),Ge(this),nn(this))},t.Za=function(){null!=this.C&&(this.C=null,Ge(this),tn(this),Ct(19))},t.fb=function(t){t?(this.j.info("Successfully pinged google.com"),Ct(2)):(this.j.info("Failed to ping google.com"),Ct(1))},t.isActive=function(){return!!this.l&&this.l.isActive(this)},(t=hn.prototype).ua=function(){},t.ta=function(){},t.sa=function(){},t.ra=function(){},t.isActive=function(){return!0},t.Na=function(){},dn.prototype.g=function(t,e){return new fn(t,e)},h(fn,tt),fn.prototype.m=function(){this.g.l=this.j,this.v&&(this.g.J=!0),this.g.connect(this.l,this.h||void 0)},fn.prototype.close=function(){Ke(this.g)},fn.prototype.o=function(t){var e=this.g;if("string"==typeof t){var n={};n.__data__=t,t=n}else this.u&&((n={}).__data__=lt(t),t=n);e.i.push(new Gt(e.Ya++,t)),3==e.G&&Qe(e)},fn.prototype.N=function(){this.g.l=null,delete this.j,Ke(this.g),delete this.g,fn.aa.N.call(this)},h(pn,mt),h(gn,yt),h(mn,hn),mn.prototype.ua=function(){et(this.g,"a")},mn.prototype.ta=function(t){et(this.g,new pn(t))},mn.prototype.sa=function(t){et(this.g,new gn)},mn.prototype.ra=function(){et(this.g,"b")},dn.prototype.createWebChannel=dn.prototype.g,fn.prototype.send=fn.prototype.o,fn.prototype.open=fn.prototype.m,fn.prototype.close=fn.prototype.close,ha=function(){return new dn},ua=function(){return wt()},la=vt,ca={mb:0,pb:1,qb:2,Jb:3,Ob:4,Lb:5,Mb:6,Kb:7,Ib:8,Nb:9,PROXY:10,NOPROXY:11,Gb:12,Cb:13,Db:14,Bb:15,Eb:16,Fb:17,ib:18,hb:19,jb:20},At.NO_ERROR=0,At.TIMEOUT=8,At.HTTP_ERROR=6,aa=At,Lt.COMPLETE="complete",oa=Lt,pt.EventType=gt,gt.OPEN="a",gt.CLOSE="b",gt.ERROR="c",gt.MESSAGE="d",tt.prototype.listen=tt.prototype.K,sa=pt,Me.prototype.listenOnce=Me.prototype.L,Me.prototype.getLastError=Me.prototype.Ka,Me.prototype.getLastErrorCode=Me.prototype.Ba,Me.prototype.getStatus=Me.prototype.Z,Me.prototype.getResponseJson=Me.prototype.Oa,Me.prototype.getResponseText=Me.prototype.oa,Me.prototype.send=Me.prototype.ea,Me.prototype.setWithCredentials=Me.prototype.Ha,ra=Me}).apply(void 0!==da?da:"undefined"!=typeof self?self:"undefined"!=typeof window?window:{});const fa="@firebase/firestore",pa="4.7.11";
/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class ga{constructor(t){this.uid=t}isAuthenticated(){return null!=this.uid}toKey(){return this.isAuthenticated()?"uid:"+this.uid:"anonymous-user"}isEqual(t){return t.uid===this.uid}}ga.UNAUTHENTICATED=new ga(null),ga.GOOGLE_CREDENTIALS=new ga("google-credentials-uid"),ga.FIRST_PARTY=new ga("first-party-uid"),ga.MOCK_USER=new ga("mock-user");
/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */
let ma="11.6.1";
/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const ya=new js("@firebase/firestore");function va(){return ya.logLevel}function ba(t,...e){if(ya.logLevel<=Ms.DEBUG){const n=e.map(Ea);ya.debug(`Firestore (${ma}): ${t}`,...n)}}function wa(t,...e){if(ya.logLevel<=Ms.ERROR){const n=e.map(Ea);ya.error(`Firestore (${ma}): ${t}`,...n)}}function _a(t,...e){if(ya.logLevel<=Ms.WARN){const n=e.map(Ea);ya.warn(`Firestore (${ma}): ${t}`,...n)}}function Ea(t){if("string"==typeof t)return t;try{
/**
    * @license
    * Copyright 2020 Google LLC
    *
    * Licensed under the Apache License, Version 2.0 (the "License");
    * you may not use this file except in compliance with the License.
    * You may obtain a copy of the License at
    *
    *   http://www.apache.org/licenses/LICENSE-2.0
    *
    * Unless required by applicable law or agreed to in writing, software
    * distributed under the License is distributed on an "AS IS" BASIS,
    * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
    * See the License for the specific language governing permissions and
    * limitations under the License.
    */
return e=t,JSON.stringify(e)}catch(n){return t}var e}
/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function ka(t,e,n){let i="Unexpected state";"string"==typeof e?i=e:n=e,Ca(t,i,n)}function Ca(t,e,n){let i=`FIRESTORE (${ma}) INTERNAL ASSERTION FAILED: ${e} (ID: ${t.toString(16)})`;if(void 0!==n)try{i+=" CONTEXT: "+JSON.stringify(n)}catch(r){i+=" CONTEXT: "+n}throw wa(i),new Error(i)}function xa(t,e,n,i){let r="Unexpected state";"string"==typeof n?r=n:i=n,t||Ca(e,r,i)}function Ta(t,e){return t}
/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const Sa={OK:"ok",CANCELLED:"cancelled",UNKNOWN:"unknown",INVALID_ARGUMENT:"invalid-argument",DEADLINE_EXCEEDED:"deadline-exceeded",NOT_FOUND:"not-found",ALREADY_EXISTS:"already-exists",PERMISSION_DENIED:"permission-denied",UNAUTHENTICATED:"unauthenticated",RESOURCE_EXHAUSTED:"resource-exhausted",FAILED_PRECONDITION:"failed-precondition",ABORTED:"aborted",OUT_OF_RANGE:"out-of-range",UNIMPLEMENTED:"unimplemented",INTERNAL:"internal",UNAVAILABLE:"unavailable",DATA_LOSS:"data-loss"};class Ia extends Cs{constructor(t,e){super(t,e),this.code=t,this.message=e,this.toString=()=>`${this.name}: [code=${this.code}]: ${this.message}`}}
/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class Da{constructor(){this.promise=new Promise(((t,e)=>{this.resolve=t,this.reject=e}))}}
/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class Aa{constructor(t,e){this.user=e,this.type="OAuth",this.headers=new Map,this.headers.set("Authorization",`Bearer ${t}`)}}class La{getToken(){return Promise.resolve(null)}invalidateToken(){}start(t,e){t.enqueueRetryable((()=>e(ga.UNAUTHENTICATED)))}shutdown(){}}class Oa{constructor(t){this.token=t,this.changeListener=null}getToken(){return Promise.resolve(this.token)}invalidateToken(){}start(t,e){this.changeListener=e,t.enqueueRetryable((()=>e(this.token.user)))}shutdown(){this.changeListener=null}}class Na{constructor(t){this.t=t,this.currentUser=ga.UNAUTHENTICATED,this.i=0,this.forceRefresh=!1,this.auth=null}start(t,e){xa(void 0===this.o,42304);let n=this.i;const i=t=>this.i!==n?(n=this.i,e(t)):Promise.resolve();let r=new Da;this.o=()=>{this.i++,this.currentUser=this.u(),r.resolve(),r=new Da,t.enqueueRetryable((()=>i(this.currentUser)))};const s=()=>{const e=r;t.enqueueRetryable((async()=>{await e.promise,await i(this.currentUser)}))},o=t=>{ba("FirebaseAuthCredentialsProvider","Auth detected"),this.auth=t,this.o&&(this.auth.addAuthTokenListener(this.o),s())};this.t.onInit((t=>o(t))),setTimeout((()=>{if(!this.auth){const t=this.t.getImmediate({optional:!0});t?o(t):(ba("FirebaseAuthCredentialsProvider","Auth not yet detected"),r.resolve(),r=new Da)}}),0),s()}getToken(){const t=this.i,e=this.forceRefresh;return this.forceRefresh=!1,this.auth?this.auth.getToken(e).then((e=>this.i!==t?(ba("FirebaseAuthCredentialsProvider","getToken aborted due to token change."),this.getToken()):e?(xa("string"==typeof e.accessToken,31837,{l:e}),new Aa(e.accessToken,this.currentUser)):null)):Promise.resolve(null)}invalidateToken(){this.forceRefresh=!0}shutdown(){this.auth&&this.o&&this.auth.removeAuthTokenListener(this.o),this.o=void 0}u(){const t=this.auth&&this.auth.getUid();return xa(null===t||"string"==typeof t,2055,{h:t}),new ga(t)}}class Ma{constructor(t,e,n){this.P=t,this.T=e,this.I=n,this.type="FirstParty",this.user=ga.FIRST_PARTY,this.A=new Map}R(){return this.I?this.I():null}get headers(){this.A.set("X-Goog-AuthUser",this.P);const t=this.R();return t&&this.A.set("Authorization",t),this.T&&this.A.set("X-Goog-Iam-Authorization-Token",this.T),this.A}}class Ra{constructor(t,e,n){this.P=t,this.T=e,this.I=n}getToken(){return Promise.resolve(new Ma(this.P,this.T,this.I))}start(t,e){t.enqueueRetryable((()=>e(ga.FIRST_PARTY)))}shutdown(){}invalidateToken(){}}class Pa{constructor(t){this.value=t,this.type="AppCheck",this.headers=new Map,t&&t.length>0&&this.headers.set("x-firebase-appcheck",this.value)}}class Va{constructor(t,e){var n;this.V=e,this.forceRefresh=!1,this.appCheck=null,this.m=null,this.p=null,null!=(n=t)&&void 0!==n.settings&&t.settings.appCheckToken&&(this.p=t.settings.appCheckToken)}start(t,e){xa(void 0===this.o,3512);const n=t=>{null!=t.error&&ba("FirebaseAppCheckTokenProvider",`Error getting App Check token; using placeholder token instead. Error: ${t.error.message}`);const n=t.token!==this.m;return this.m=t.token,ba("FirebaseAppCheckTokenProvider",`Received ${n?"new":"existing"} token.`),n?e(t.token):Promise.resolve()};this.o=e=>{t.enqueueRetryable((()=>n(e)))};const i=t=>{ba("FirebaseAppCheckTokenProvider","AppCheck detected"),this.appCheck=t,this.o&&this.appCheck.addTokenListener(this.o)};this.V.onInit((t=>i(t))),setTimeout((()=>{if(!this.appCheck){const t=this.V.getImmediate({optional:!0});t?i(t):ba("FirebaseAppCheckTokenProvider","AppCheck not yet detected")}}),0)}getToken(){if(this.p)return Promise.resolve(new Pa(this.p));const t=this.forceRefresh;return this.forceRefresh=!1,this.appCheck?this.appCheck.getToken(t).then((t=>t?(xa("string"==typeof t.token,44558,{tokenResult:t}),this.m=t.token,new Pa(t.token)):null)):Promise.resolve(null)}invalidateToken(){this.forceRefresh=!0}shutdown(){this.appCheck&&this.o&&this.appCheck.removeTokenListener(this.o),this.o=void 0}}
/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function Fa(t){const e="undefined"!=typeof self&&(self.crypto||self.msCrypto),n=new Uint8Array(t);if(e&&"function"==typeof e.getRandomValues)e.getRandomValues(n);else for(let i=0;i<t;i++)n[i]=Math.floor(256*Math.random());return n}
/**
 * @license
 * Copyright 2023 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function Ba(){return new TextEncoder}
/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class ja{static newId(){const t=62*Math.floor(256/62);let e="";for(;e.length<20;){const n=Fa(40);for(let i=0;i<n.length;++i)e.length<20&&n[i]<t&&(e+="ABCDEFGHIJKLMNOPQRSTUVWXYZabcdefghijklmnopqrstuvwxyz0123456789".charAt(n[i]%62))}return e}}function Ua(t,e){return t<e?-1:t>e?1:0}function qa(t,e){let n=0;for(;n<t.length&&n<e.length;){const i=t.codePointAt(n),r=e.codePointAt(n);if(i!==r){if(i<128&&r<128)return Ua(i,r);{const s=Ba(),o=za(s.encode(Ha(t,n)),s.encode(Ha(e,n)));return 0!==o?o:Ua(i,r)}}n+=i>65535?2:1}return Ua(t.length,e.length)}function Ha(t,e){return t.codePointAt(e)>65535?t.substring(e,e+2):t.substring(e,e+1)}function za(t,e){for(let n=0;n<t.length&&n<e.length;++n)if(t[n]!==e[n])return Ua(t[n],e[n]);return Ua(t.length,e.length)}function $a(t,e,n){return t.length===e.length&&t.every(((t,i)=>n(t,e[i])))}
/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const Ka=-62135596800,Ga=1e6;class Wa{static now(){return Wa.fromMillis(Date.now())}static fromDate(t){return Wa.fromMillis(t.getTime())}static fromMillis(t){const e=Math.floor(t/1e3),n=Math.floor((t-1e3*e)*Ga);return new Wa(e,n)}constructor(t,e){if(this.seconds=t,this.nanoseconds=e,e<0)throw new Ia(Sa.INVALID_ARGUMENT,"Timestamp nanoseconds out of range: "+e);if(e>=1e9)throw new Ia(Sa.INVALID_ARGUMENT,"Timestamp nanoseconds out of range: "+e);if(t<Ka)throw new Ia(Sa.INVALID_ARGUMENT,"Timestamp seconds out of range: "+t);if(t>=253402300800)throw new Ia(Sa.INVALID_ARGUMENT,"Timestamp seconds out of range: "+t)}toDate(){return new Date(this.toMillis())}toMillis(){return 1e3*this.seconds+this.nanoseconds/Ga}_compareTo(t){return this.seconds===t.seconds?Ua(this.nanoseconds,t.nanoseconds):Ua(this.seconds,t.seconds)}isEqual(t){return t.seconds===this.seconds&&t.nanoseconds===this.nanoseconds}toString(){return"Timestamp(seconds="+this.seconds+", nanoseconds="+this.nanoseconds+")"}toJSON(){return{seconds:this.seconds,nanoseconds:this.nanoseconds}}valueOf(){const t=this.seconds-Ka;return String(t).padStart(12,"0")+"."+String(this.nanoseconds).padStart(9,"0")}}
/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class Qa{static fromTimestamp(t){return new Qa(t)}static min(){return new Qa(new Wa(0,0))}static max(){return new Qa(new Wa(253402300799,999999999))}constructor(t){this.timestamp=t}compareTo(t){return this.timestamp._compareTo(t.timestamp)}isEqual(t){return this.timestamp.isEqual(t.timestamp)}toMicroseconds(){return 1e6*this.timestamp.seconds+this.timestamp.nanoseconds/1e3}toString(){return"SnapshotVersion("+this.timestamp.toString()+")"}toTimestamp(){return this.timestamp}}
/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const Ya="__name__";class Xa{constructor(t,e,n){void 0===e?e=0:e>t.length&&ka(637,{offset:e,range:t.length}),void 0===n?n=t.length-e:n>t.length-e&&ka(1746,{length:n,range:t.length-e}),this.segments=t,this.offset=e,this.len=n}get length(){return this.len}isEqual(t){return 0===Xa.comparator(this,t)}child(t){const e=this.segments.slice(this.offset,this.limit());return t instanceof Xa?t.forEach((t=>{e.push(t)})):e.push(t),this.construct(e)}limit(){return this.offset+this.length}popFirst(t){return t=void 0===t?1:t,this.construct(this.segments,this.offset+t,this.length-t)}popLast(){return this.construct(this.segments,this.offset,this.length-1)}firstSegment(){return this.segments[this.offset]}lastSegment(){return this.get(this.length-1)}get(t){return this.segments[this.offset+t]}isEmpty(){return 0===this.length}isPrefixOf(t){if(t.length<this.length)return!1;for(let e=0;e<this.length;e++)if(this.get(e)!==t.get(e))return!1;return!0}isImmediateParentOf(t){if(this.length+1!==t.length)return!1;for(let e=0;e<this.length;e++)if(this.get(e)!==t.get(e))return!1;return!0}forEach(t){for(let e=this.offset,n=this.limit();e<n;e++)t(this.segments[e])}toArray(){return this.segments.slice(this.offset,this.limit())}static comparator(t,e){const n=Math.min(t.length,e.length);for(let i=0;i<n;i++){const n=Xa.compareSegments(t.get(i),e.get(i));if(0!==n)return n}return Ua(t.length,e.length)}static compareSegments(t,e){const n=Xa.isNumericId(t),i=Xa.isNumericId(e);return n&&!i?-1:!n&&i?1:n&&i?Xa.extractNumericId(t).compare(Xa.extractNumericId(e)):qa(t,e)}static isNumericId(t){return t.startsWith("__id")&&t.endsWith("__")}static extractNumericId(t){return ea.fromString(t.substring(4,t.length-2))}}class Ja extends Xa{construct(t,e,n){return new Ja(t,e,n)}canonicalString(){return this.toArray().join("/")}toString(){return this.canonicalString()}toUriEncodedString(){return this.toArray().map(encodeURIComponent).join("/")}static fromString(...t){const e=[];for(const n of t){if(n.indexOf("//")>=0)throw new Ia(Sa.INVALID_ARGUMENT,`Invalid segment (${n}). Paths must not contain // in them.`);e.push(...n.split("/").filter((t=>t.length>0)))}return new Ja(e)}static emptyPath(){return new Ja([])}}const Za=/^[_a-zA-Z][_a-zA-Z0-9]*$/;class tc extends Xa{construct(t,e,n){return new tc(t,e,n)}static isValidIdentifier(t){return Za.test(t)}canonicalString(){return this.toArray().map((t=>(t=t.replace(/\\/g,"\\\\").replace(/`/g,"\\`"),tc.isValidIdentifier(t)||(t="`"+t+"`"),t))).join(".")}toString(){return this.canonicalString()}isKeyField(){return 1===this.length&&this.get(0)===Ya}static keyField(){return new tc([Ya])}static fromServerFormat(t){const e=[];let n="",i=0;const r=()=>{if(0===n.length)throw new Ia(Sa.INVALID_ARGUMENT,`Invalid field path (${t}). Paths must not be empty, begin with '.', end with '.', or contain '..'`);e.push(n),n=""};let s=!1;for(;i<t.length;){const e=t[i];if("\\"===e){if(i+1===t.length)throw new Ia(Sa.INVALID_ARGUMENT,"Path has trailing escape character: "+t);const e=t[i+1];if("\\"!==e&&"."!==e&&"`"!==e)throw new Ia(Sa.INVALID_ARGUMENT,"Path has invalid escape sequence: "+t);n+=e,i+=2}else"`"===e?(s=!s,i++):"."!==e||s?(n+=e,i++):(r(),i++)}if(r(),s)throw new Ia(Sa.INVALID_ARGUMENT,"Unterminated ` in path: "+t);return new tc(e)}static emptyPath(){return new tc([])}}
/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class ec{constructor(t){this.path=t}static fromPath(t){return new ec(Ja.fromString(t))}static fromName(t){return new ec(Ja.fromString(t).popFirst(5))}static empty(){return new ec(Ja.emptyPath())}get collectionGroup(){return this.path.popLast().lastSegment()}hasCollectionId(t){return this.path.length>=2&&this.path.get(this.path.length-2)===t}getCollectionGroup(){return this.path.get(this.path.length-2)}getCollectionPath(){return this.path.popLast()}isEqual(t){return null!==t&&0===Ja.comparator(this.path,t.path)}toString(){return this.path.toString()}static comparator(t,e){return Ja.comparator(t.path,e.path)}static isDocumentKey(t){return t.length%2==0}static fromSegments(t){return new ec(new Ja(t.slice()))}}
/**
 * @license
 * Copyright 2021 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function nc(t){return new ic(t.readTime,t.key,-1)}class ic{constructor(t,e,n){this.readTime=t,this.documentKey=e,this.largestBatchId=n}static min(){return new ic(Qa.min(),ec.empty(),-1)}static max(){return new ic(Qa.max(),ec.empty(),-1)}}function rc(t,e){let n=t.readTime.compareTo(e.readTime);return 0!==n?n:(n=ec.comparator(t.documentKey,e.documentKey),0!==n?n:Ua(t.largestBatchId,e.largestBatchId)
/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */)}class sc{constructor(){this.onCommittedListeners=[]}addOnCommittedListener(t){this.onCommittedListeners.push(t)}raiseOnCommittedEvent(){this.onCommittedListeners.forEach((t=>t()))}}
/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */async function oc(t){if(t.code!==Sa.FAILED_PRECONDITION||"The current tab is not in the required state to perform this operation. It might be necessary to refresh the browser tab."!==t.message)throw t;ba("LocalStore","Unexpectedly lost primary lease")}
/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class ac{constructor(t){this.nextCallback=null,this.catchCallback=null,this.result=void 0,this.error=void 0,this.isDone=!1,this.callbackAttached=!1,t((t=>{this.isDone=!0,this.result=t,this.nextCallback&&this.nextCallback(t)}),(t=>{this.isDone=!0,this.error=t,this.catchCallback&&this.catchCallback(t)}))}catch(t){return this.next(void 0,t)}next(t,e){return this.callbackAttached&&ka(59440),this.callbackAttached=!0,this.isDone?this.error?this.wrapFailure(e,this.error):this.wrapSuccess(t,this.result):new ac(((n,i)=>{this.nextCallback=e=>{this.wrapSuccess(t,e).next(n,i)},this.catchCallback=t=>{this.wrapFailure(e,t).next(n,i)}}))}toPromise(){return new Promise(((t,e)=>{this.next(t,e)}))}wrapUserFunction(t){try{const e=t();return e instanceof ac?e:ac.resolve(e)}catch(e){return ac.reject(e)}}wrapSuccess(t,e){return t?this.wrapUserFunction((()=>t(e))):ac.resolve(e)}wrapFailure(t,e){return t?this.wrapUserFunction((()=>t(e))):ac.reject(e)}static resolve(t){return new ac(((e,n)=>{e(t)}))}static reject(t){return new ac(((e,n)=>{n(t)}))}static waitFor(t){return new ac(((e,n)=>{let i=0,r=0,s=!1;t.forEach((t=>{++i,t.next((()=>{++r,s&&r===i&&e()}),(t=>n(t)))})),s=!0,r===i&&e()}))}static or(t){let e=ac.resolve(!1);for(const n of t)e=e.next((t=>t?ac.resolve(t):n()));return e}static forEach(t,e){const n=[];return t.forEach(((t,i)=>{n.push(e.call(this,t,i))})),this.waitFor(n)}static mapArray(t,e){return new ac(((n,i)=>{const r=t.length,s=new Array(r);let o=0;for(let a=0;a<r;a++){const c=a;e(t[c]).next((t=>{s[c]=t,++o,o===r&&n(s)}),(t=>i(t)))}}))}static doWhile(t,e){return new ac(((n,i)=>{const r=()=>{!0===t()?e().next((()=>{r()}),i):n()};r()}))}}function cc(t){return"IndexedDbTransactionError"===t.name}
/**
 * @license
 * Copyright 2018 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class lc{constructor(t,e){this.previousValue=t,e&&(e.sequenceNumberHandler=t=>this.ue(t),this.ce=t=>e.writeSequenceNumber(t))}ue(t){return this.previousValue=Math.max(t,this.previousValue),this.previousValue}next(){const t=++this.previousValue;return this.ce&&this.ce(t),t}}lc.le=-1;function uc(t){return null==t}function hc(t){return 0===t&&1/t==-1/0}function dc(t,e){let n=e;const i=t.length;for(let r=0;r<i;r++){const e=t.charAt(r);switch(e){case"\0":n+="";break;case"":n+="";break;default:n+=e}}return n}function fc(t){return t+""}
/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function pc(t){let e=0;for(const n in t)Object.prototype.hasOwnProperty.call(t,n)&&e++;return e}function gc(t,e){for(const n in t)Object.prototype.hasOwnProperty.call(t,n)&&e(n,t[n])}function mc(t){for(const e in t)if(Object.prototype.hasOwnProperty.call(t,e))return!1;return!0}
/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class yc{constructor(t,e){this.comparator=t,this.root=e||bc.EMPTY}insert(t,e){return new yc(this.comparator,this.root.insert(t,e,this.comparator).copy(null,null,bc.BLACK,null,null))}remove(t){return new yc(this.comparator,this.root.remove(t,this.comparator).copy(null,null,bc.BLACK,null,null))}get(t){let e=this.root;for(;!e.isEmpty();){const n=this.comparator(t,e.key);if(0===n)return e.value;n<0?e=e.left:n>0&&(e=e.right)}return null}indexOf(t){let e=0,n=this.root;for(;!n.isEmpty();){const i=this.comparator(t,n.key);if(0===i)return e+n.left.size;i<0?n=n.left:(e+=n.left.size+1,n=n.right)}return-1}isEmpty(){return this.root.isEmpty()}get size(){return this.root.size}minKey(){return this.root.minKey()}maxKey(){return this.root.maxKey()}inorderTraversal(t){return this.root.inorderTraversal(t)}forEach(t){this.inorderTraversal(((e,n)=>(t(e,n),!1)))}toString(){const t=[];return this.inorderTraversal(((e,n)=>(t.push(`${e}:${n}`),!1))),`{${t.join(", ")}}`}reverseTraversal(t){return this.root.reverseTraversal(t)}getIterator(){return new vc(this.root,null,this.comparator,!1)}getIteratorFrom(t){return new vc(this.root,t,this.comparator,!1)}getReverseIterator(){return new vc(this.root,null,this.comparator,!0)}getReverseIteratorFrom(t){return new vc(this.root,t,this.comparator,!0)}}class vc{constructor(t,e,n,i){this.isReverse=i,this.nodeStack=[];let r=1;for(;!t.isEmpty();)if(r=e?n(t.key,e):1,e&&i&&(r*=-1),r<0)t=this.isReverse?t.left:t.right;else{if(0===r){this.nodeStack.push(t);break}this.nodeStack.push(t),t=this.isReverse?t.right:t.left}}getNext(){let t=this.nodeStack.pop();const e={key:t.key,value:t.value};if(this.isReverse)for(t=t.left;!t.isEmpty();)this.nodeStack.push(t),t=t.right;else for(t=t.right;!t.isEmpty();)this.nodeStack.push(t),t=t.left;return e}hasNext(){return this.nodeStack.length>0}peek(){if(0===this.nodeStack.length)return null;const t=this.nodeStack[this.nodeStack.length-1];return{key:t.key,value:t.value}}}class bc{constructor(t,e,n,i,r){this.key=t,this.value=e,this.color=null!=n?n:bc.RED,this.left=null!=i?i:bc.EMPTY,this.right=null!=r?r:bc.EMPTY,this.size=this.left.size+1+this.right.size}copy(t,e,n,i,r){return new bc(null!=t?t:this.key,null!=e?e:this.value,null!=n?n:this.color,null!=i?i:this.left,null!=r?r:this.right)}isEmpty(){return!1}inorderTraversal(t){return this.left.inorderTraversal(t)||t(this.key,this.value)||this.right.inorderTraversal(t)}reverseTraversal(t){return this.right.reverseTraversal(t)||t(this.key,this.value)||this.left.reverseTraversal(t)}min(){return this.left.isEmpty()?this:this.left.min()}minKey(){return this.min().key}maxKey(){return this.right.isEmpty()?this.key:this.right.maxKey()}insert(t,e,n){let i=this;const r=n(t,i.key);return i=r<0?i.copy(null,null,null,i.left.insert(t,e,n),null):0===r?i.copy(null,e,null,null,null):i.copy(null,null,null,null,i.right.insert(t,e,n)),i.fixUp()}removeMin(){if(this.left.isEmpty())return bc.EMPTY;let t=this;return t.left.isRed()||t.left.left.isRed()||(t=t.moveRedLeft()),t=t.copy(null,null,null,t.left.removeMin(),null),t.fixUp()}remove(t,e){let n,i=this;if(e(t,i.key)<0)i.left.isEmpty()||i.left.isRed()||i.left.left.isRed()||(i=i.moveRedLeft()),i=i.copy(null,null,null,i.left.remove(t,e),null);else{if(i.left.isRed()&&(i=i.rotateRight()),i.right.isEmpty()||i.right.isRed()||i.right.left.isRed()||(i=i.moveRedRight()),0===e(t,i.key)){if(i.right.isEmpty())return bc.EMPTY;n=i.right.min(),i=i.copy(n.key,n.value,null,null,i.right.removeMin())}i=i.copy(null,null,null,null,i.right.remove(t,e))}return i.fixUp()}isRed(){return this.color}fixUp(){let t=this;return t.right.isRed()&&!t.left.isRed()&&(t=t.rotateLeft()),t.left.isRed()&&t.left.left.isRed()&&(t=t.rotateRight()),t.left.isRed()&&t.right.isRed()&&(t=t.colorFlip()),t}moveRedLeft(){let t=this.colorFlip();return t.right.left.isRed()&&(t=t.copy(null,null,null,null,t.right.rotateRight()),t=t.rotateLeft(),t=t.colorFlip()),t}moveRedRight(){let t=this.colorFlip();return t.left.left.isRed()&&(t=t.rotateRight(),t=t.colorFlip()),t}rotateLeft(){const t=this.copy(null,null,bc.RED,null,this.right.left);return this.right.copy(null,null,this.color,t,null)}rotateRight(){const t=this.copy(null,null,bc.RED,this.left.right,null);return this.left.copy(null,null,this.color,null,t)}colorFlip(){const t=this.left.copy(null,null,!this.left.color,null,null),e=this.right.copy(null,null,!this.right.color,null,null);return this.copy(null,null,!this.color,t,e)}checkMaxDepth(){const t=this.check();return Math.pow(2,t)<=this.size+1}check(){if(this.isRed()&&this.left.isRed())throw ka(43730,{key:this.key,value:this.value});if(this.right.isRed())throw ka(14113,{key:this.key,value:this.value});const t=this.left.check();if(t!==this.right.check())throw ka(27949);return t+(this.isRed()?0:1)}}bc.EMPTY=null,bc.RED=!0,bc.BLACK=!1,bc.EMPTY=new class{constructor(){this.size=0}get key(){throw ka(57766)}get value(){throw ka(16141)}get color(){throw ka(16727)}get left(){throw ka(29726)}get right(){throw ka(36894)}copy(t,e,n,i,r){return this}insert(t,e,n){return new bc(t,e)}remove(t,e){return this}isEmpty(){return!0}inorderTraversal(t){return!1}reverseTraversal(t){return!1}minKey(){return null}maxKey(){return null}isRed(){return!1}checkMaxDepth(){return!0}check(){return 0}};
/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */
class wc{constructor(t){this.comparator=t,this.data=new yc(this.comparator)}has(t){return null!==this.data.get(t)}first(){return this.data.minKey()}last(){return this.data.maxKey()}get size(){return this.data.size}indexOf(t){return this.data.indexOf(t)}forEach(t){this.data.inorderTraversal(((e,n)=>(t(e),!1)))}forEachInRange(t,e){const n=this.data.getIteratorFrom(t[0]);for(;n.hasNext();){const i=n.getNext();if(this.comparator(i.key,t[1])>=0)return;e(i.key)}}forEachWhile(t,e){let n;for(n=void 0!==e?this.data.getIteratorFrom(e):this.data.getIterator();n.hasNext();)if(!t(n.getNext().key))return}firstAfterOrEqual(t){const e=this.data.getIteratorFrom(t);return e.hasNext()?e.getNext().key:null}getIterator(){return new _c(this.data.getIterator())}getIteratorFrom(t){return new _c(this.data.getIteratorFrom(t))}add(t){return this.copy(this.data.remove(t).insert(t,!0))}delete(t){return this.has(t)?this.copy(this.data.remove(t)):this}isEmpty(){return this.data.isEmpty()}unionWith(t){let e=this;return e.size<t.size&&(e=t,t=this),t.forEach((t=>{e=e.add(t)})),e}isEqual(t){if(!(t instanceof wc))return!1;if(this.size!==t.size)return!1;const e=this.data.getIterator(),n=t.data.getIterator();for(;e.hasNext();){const t=e.getNext().key,i=n.getNext().key;if(0!==this.comparator(t,i))return!1}return!0}toArray(){const t=[];return this.forEach((e=>{t.push(e)})),t}toString(){const t=[];return this.forEach((e=>t.push(e))),"SortedSet("+t.toString()+")"}copy(t){const e=new wc(this.comparator);return e.data=t,e}}class _c{constructor(t){this.iter=t}getNext(){return this.iter.getNext().key}hasNext(){return this.iter.hasNext()}}
/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class Ec{constructor(t){this.fields=t,t.sort(tc.comparator)}static empty(){return new Ec([])}unionWith(t){let e=new wc(tc.comparator);for(const n of this.fields)e=e.add(n);for(const n of t)e=e.add(n);return new Ec(e.toArray())}covers(t){for(const e of this.fields)if(e.isPrefixOf(t))return!0;return!1}isEqual(t){return $a(this.fields,t.fields,((t,e)=>t.isEqual(e)))}}
/**
 * @license
 * Copyright 2023 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class kc extends Error{constructor(){super(...arguments),this.name="Base64DecodeError"}}
/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class Cc{constructor(t){this.binaryString=t}static fromBase64String(t){const e=function(t){try{return atob(t)}catch(e){throw"undefined"!=typeof DOMException&&e instanceof DOMException?new kc("Invalid base64 string: "+e):e}}(t);return new Cc(e)}static fromUint8Array(t){const e=function(t){let e="";for(let n=0;n<t.length;++n)e+=String.fromCharCode(t[n]);return e}(t);return new Cc(e)}[Symbol.iterator](){let t=0;return{next:()=>t<this.binaryString.length?{value:this.binaryString.charCodeAt(t++),done:!1}:{value:void 0,done:!0}}}toBase64(){return t=this.binaryString,btoa(t);var t}toUint8Array(){return function(t){const e=new Uint8Array(t.length);for(let n=0;n<t.length;n++)e[n]=t.charCodeAt(n);return e}(this.binaryString)}approximateByteSize(){return 2*this.binaryString.length}compareTo(t){return Ua(this.binaryString,t.binaryString)}isEqual(t){return this.binaryString===t.binaryString}}Cc.EMPTY_BYTE_STRING=new Cc("");const xc=new RegExp(/^\d{4}-\d\d-\d\dT\d\d:\d\d:\d\d(?:\.(\d+))?Z$/);function Tc(t){if(xa(!!t,39018),"string"==typeof t){let e=0;const n=xc.exec(t);if(xa(!!n,46558,{timestamp:t}),n[1]){let t=n[1];t=(t+"000000000").substr(0,9),e=Number(t)}const i=new Date(t);return{seconds:Math.floor(i.getTime()/1e3),nanos:e}}return{seconds:Sc(t.seconds),nanos:Sc(t.nanos)}}function Sc(t){return"number"==typeof t?t:"string"==typeof t?Number(t):0}function Ic(t){return"string"==typeof t?Cc.fromBase64String(t):Cc.fromUint8Array(t)}
/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const Dc="server_timestamp",Ac="__type__",Lc="__previous_value__",Oc="__local_write_time__";function Nc(t){var e,n;return(null===(n=((null===(e=null==t?void 0:t.mapValue)||void 0===e?void 0:e.fields)||{})[Ac])||void 0===n?void 0:n.stringValue)===Dc}function Mc(t){const e=t.mapValue.fields[Lc];return Nc(e)?Mc(e):e}function Rc(t){const e=Tc(t.mapValue.fields[Oc].timestampValue);return new Wa(e.seconds,e.nanos)}
/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class Pc{constructor(t,e,n,i,r,s,o,a,c){this.databaseId=t,this.appId=e,this.persistenceKey=n,this.host=i,this.ssl=r,this.forceLongPolling=s,this.autoDetectLongPolling=o,this.longPollingOptions=a,this.useFetchStreams=c}}const Vc="(default)";class Fc{constructor(t,e){this.projectId=t,this.database=e||Vc}static empty(){return new Fc("","")}get isDefaultDatabase(){return this.database===Vc}isEqual(t){return t instanceof Fc&&t.projectId===this.projectId&&t.database===this.database}}
/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const Bc="__type__",jc="__max__",Uc={},qc="__vector__",Hc="value";function zc(t){return"nullValue"in t?0:"booleanValue"in t?1:"integerValue"in t||"doubleValue"in t?2:"timestampValue"in t?3:"stringValue"in t?5:"bytesValue"in t?6:"referenceValue"in t?7:"geoPointValue"in t?8:"arrayValue"in t?9:"mapValue"in t?Nc(t)?4:function(t){return(((t.mapValue||{}).fields||{}).__type__||{}).stringValue===jc}
/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */(t)?9007199254740991:function(t){var e,n;return(null===(n=((null===(e=null==t?void 0:t.mapValue)||void 0===e?void 0:e.fields)||{})[Bc])||void 0===n?void 0:n.stringValue)===qc}(t)?10:11:ka(28295,{value:t})}function $c(t,e){if(t===e)return!0;const n=zc(t);if(n!==zc(e))return!1;switch(n){case 0:case 9007199254740991:return!0;case 1:return t.booleanValue===e.booleanValue;case 4:return Rc(t).isEqual(Rc(e));case 3:return function(t,e){if("string"==typeof t.timestampValue&&"string"==typeof e.timestampValue&&t.timestampValue.length===e.timestampValue.length)return t.timestampValue===e.timestampValue;const n=Tc(t.timestampValue),i=Tc(e.timestampValue);return n.seconds===i.seconds&&n.nanos===i.nanos}(t,e);case 5:return t.stringValue===e.stringValue;case 6:return i=e,Ic(t.bytesValue).isEqual(Ic(i.bytesValue));case 7:return t.referenceValue===e.referenceValue;case 8:return function(t,e){return Sc(t.geoPointValue.latitude)===Sc(e.geoPointValue.latitude)&&Sc(t.geoPointValue.longitude)===Sc(e.geoPointValue.longitude)}(t,e);case 2:return function(t,e){if("integerValue"in t&&"integerValue"in e)return Sc(t.integerValue)===Sc(e.integerValue);if("doubleValue"in t&&"doubleValue"in e){const n=Sc(t.doubleValue),i=Sc(e.doubleValue);return n===i?hc(n)===hc(i):isNaN(n)&&isNaN(i)}return!1}(t,e);case 9:return $a(t.arrayValue.values||[],e.arrayValue.values||[],$c);case 10:case 11:return function(t,e){const n=t.mapValue.fields||{},i=e.mapValue.fields||{};if(pc(n)!==pc(i))return!1;for(const r in n)if(n.hasOwnProperty(r)&&(void 0===i[r]||!$c(n[r],i[r])))return!1;return!0}(t,e);default:return ka(52216,{left:t})}var i}function Kc(t,e){return void 0!==(t.values||[]).find((t=>$c(t,e)))}function Gc(t,e){if(t===e)return 0;const n=zc(t),i=zc(e);if(n!==i)return Ua(n,i);switch(n){case 0:case 9007199254740991:return 0;case 1:return Ua(t.booleanValue,e.booleanValue);case 2:return function(t,e){const n=Sc(t.integerValue||t.doubleValue),i=Sc(e.integerValue||e.doubleValue);return n<i?-1:n>i?1:n===i?0:isNaN(n)?isNaN(i)?0:-1:1}(t,e);case 3:return Wc(t.timestampValue,e.timestampValue);case 4:return Wc(Rc(t),Rc(e));case 5:return qa(t.stringValue,e.stringValue);case 6:return function(t,e){const n=Ic(t),i=Ic(e);return n.compareTo(i)}(t.bytesValue,e.bytesValue);case 7:return function(t,e){const n=t.split("/"),i=e.split("/");for(let r=0;r<n.length&&r<i.length;r++){const t=Ua(n[r],i[r]);if(0!==t)return t}return Ua(n.length,i.length)}(t.referenceValue,e.referenceValue);case 8:return function(t,e){const n=Ua(Sc(t.latitude),Sc(e.latitude));return 0!==n?n:Ua(Sc(t.longitude),Sc(e.longitude))}(t.geoPointValue,e.geoPointValue);case 9:return Qc(t.arrayValue,e.arrayValue);case 10:return function(t,e){var n,i,r,s;const o=t.fields||{},a=e.fields||{},c=null===(n=o[Hc])||void 0===n?void 0:n.arrayValue,l=null===(i=a[Hc])||void 0===i?void 0:i.arrayValue,u=Ua((null===(r=null==c?void 0:c.values)||void 0===r?void 0:r.length)||0,(null===(s=null==l?void 0:l.values)||void 0===s?void 0:s.length)||0);return 0!==u?u:Qc(c,l)}(t.mapValue,e.mapValue);case 11:return function(t,e){if(t===Uc&&e===Uc)return 0;if(t===Uc)return 1;if(e===Uc)return-1;const n=t.fields||{},i=Object.keys(n),r=e.fields||{},s=Object.keys(r);i.sort(),s.sort();for(let o=0;o<i.length&&o<s.length;++o){const t=qa(i[o],s[o]);if(0!==t)return t;const e=Gc(n[i[o]],r[s[o]]);if(0!==e)return e}return Ua(i.length,s.length)}(t.mapValue,e.mapValue);default:throw ka(23264,{Pe:n})}}function Wc(t,e){if("string"==typeof t&&"string"==typeof e&&t.length===e.length)return Ua(t,e);const n=Tc(t),i=Tc(e),r=Ua(n.seconds,i.seconds);return 0!==r?r:Ua(n.nanos,i.nanos)}function Qc(t,e){const n=t.values||[],i=e.values||[];for(let r=0;r<n.length&&r<i.length;++r){const t=Gc(n[r],i[r]);if(t)return t}return Ua(n.length,i.length)}function Yc(t){return Xc(t)}function Xc(t){return"nullValue"in t?"null":"booleanValue"in t?""+t.booleanValue:"integerValue"in t?""+t.integerValue:"doubleValue"in t?""+t.doubleValue:"timestampValue"in t?function(t){const e=Tc(t);return`time(${e.seconds},${e.nanos})`}(t.timestampValue):"stringValue"in t?t.stringValue:"bytesValue"in t?Ic(t.bytesValue).toBase64():"referenceValue"in t?function(t){return ec.fromName(t).toString()}(t.referenceValue):"geoPointValue"in t?function(t){return`geo(${t.latitude},${t.longitude})`}(t.geoPointValue):"arrayValue"in t?function(t){let e="[",n=!0;for(const i of t.values||[])n?n=!1:e+=",",e+=Xc(i);return e+"]"}(t.arrayValue):"mapValue"in t?function(t){const e=Object.keys(t.fields||{}).sort();let n="{",i=!0;for(const r of e)i?i=!1:n+=",",n+=`${r}:${Xc(t.fields[r])}`;return n+"}"}(t.mapValue):ka(61005,{value:t})}function Jc(t){switch(zc(t)){case 0:case 1:return 4;case 2:return 8;case 3:case 8:return 16;case 4:const e=Mc(t);return e?16+Jc(e):16;case 5:return 2*t.stringValue.length;case 6:return Ic(t.bytesValue).approximateByteSize();case 7:return t.referenceValue.length;case 9:return(t.arrayValue.values||[]).reduce(((t,e)=>t+Jc(e)),0);case 10:case 11:return function(t){let e=0;return gc(t.fields,((t,n)=>{e+=t.length+Jc(n)})),e}(t.mapValue);default:throw ka(13486,{value:t})}}function Zc(t){return!!t&&"integerValue"in t}function tl(t){return!!t&&"arrayValue"in t}function el(t){return!!t&&"nullValue"in t}function nl(t){return!!t&&"doubleValue"in t&&isNaN(Number(t.doubleValue))}function il(t){return!!t&&"mapValue"in t}function rl(t){if(t.geoPointValue)return{geoPointValue:Object.assign({},t.geoPointValue)};if(t.timestampValue&&"object"==typeof t.timestampValue)return{timestampValue:Object.assign({},t.timestampValue)};if(t.mapValue){const e={mapValue:{fields:{}}};return gc(t.mapValue.fields,((t,n)=>e.mapValue.fields[t]=rl(n))),e}if(t.arrayValue){const e={arrayValue:{values:[]}};for(let n=0;n<(t.arrayValue.values||[]).length;++n)e.arrayValue.values[n]=rl(t.arrayValue.values[n]);return e}return Object.assign({},t)}class sl{constructor(t){this.value=t}static empty(){return new sl({mapValue:{}})}field(t){if(t.isEmpty())return this.value;{let e=this.value;for(let n=0;n<t.length-1;++n)if(e=(e.mapValue.fields||{})[t.get(n)],!il(e))return null;return e=(e.mapValue.fields||{})[t.lastSegment()],e||null}}set(t,e){this.getFieldsMap(t.popLast())[t.lastSegment()]=rl(e)}setAll(t){let e=tc.emptyPath(),n={},i=[];t.forEach(((t,r)=>{if(!e.isImmediateParentOf(r)){const t=this.getFieldsMap(e);this.applyChanges(t,n,i),n={},i=[],e=r.popLast()}t?n[r.lastSegment()]=rl(t):i.push(r.lastSegment())}));const r=this.getFieldsMap(e);this.applyChanges(r,n,i)}delete(t){const e=this.field(t.popLast());il(e)&&e.mapValue.fields&&delete e.mapValue.fields[t.lastSegment()]}isEqual(t){return $c(this.value,t.value)}getFieldsMap(t){let e=this.value;e.mapValue.fields||(e.mapValue={fields:{}});for(let n=0;n<t.length;++n){let i=e.mapValue.fields[t.get(n)];il(i)&&i.mapValue.fields||(i={mapValue:{fields:{}}},e.mapValue.fields[t.get(n)]=i),e=i}return e.mapValue.fields}applyChanges(t,e,n){gc(e,((e,n)=>t[e]=n));for(const i of n)delete t[i]}clone(){return new sl(rl(this.value))}}function ol(t){const e=[];return gc(t.fields,((t,n)=>{const i=new tc([t]);if(il(n)){const t=ol(n.mapValue).fields;if(0===t.length)e.push(i);else for(const n of t)e.push(i.child(n))}else e.push(i)})),new Ec(e)
/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */}class al{constructor(t,e,n,i,r,s,o){this.key=t,this.documentType=e,this.version=n,this.readTime=i,this.createTime=r,this.data=s,this.documentState=o}static newInvalidDocument(t){return new al(t,0,Qa.min(),Qa.min(),Qa.min(),sl.empty(),0)}static newFoundDocument(t,e,n,i){return new al(t,1,e,Qa.min(),n,i,0)}static newNoDocument(t,e){return new al(t,2,e,Qa.min(),Qa.min(),sl.empty(),0)}static newUnknownDocument(t,e){return new al(t,3,e,Qa.min(),Qa.min(),sl.empty(),2)}convertToFoundDocument(t,e){return!this.createTime.isEqual(Qa.min())||2!==this.documentType&&0!==this.documentType||(this.createTime=t),this.version=t,this.documentType=1,this.data=e,this.documentState=0,this}convertToNoDocument(t){return this.version=t,this.documentType=2,this.data=sl.empty(),this.documentState=0,this}convertToUnknownDocument(t){return this.version=t,this.documentType=3,this.data=sl.empty(),this.documentState=2,this}setHasCommittedMutations(){return this.documentState=2,this}setHasLocalMutations(){return this.documentState=1,this.version=Qa.min(),this}setReadTime(t){return this.readTime=t,this}get hasLocalMutations(){return 1===this.documentState}get hasCommittedMutations(){return 2===this.documentState}get hasPendingWrites(){return this.hasLocalMutations||this.hasCommittedMutations}isValidDocument(){return 0!==this.documentType}isFoundDocument(){return 1===this.documentType}isNoDocument(){return 2===this.documentType}isUnknownDocument(){return 3===this.documentType}isEqual(t){return t instanceof al&&this.key.isEqual(t.key)&&this.version.isEqual(t.version)&&this.documentType===t.documentType&&this.documentState===t.documentState&&this.data.isEqual(t.data)}mutableCopy(){return new al(this.key,this.documentType,this.version,this.readTime,this.createTime,this.data.clone(),this.documentState)}toString(){return`Document(${this.key}, ${this.version}, ${JSON.stringify(this.data.value)}, {createTime: ${this.createTime}}), {documentType: ${this.documentType}}), {documentState: ${this.documentState}})`}}
/**
 * @license
 * Copyright 2022 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class cl{constructor(t,e){this.position=t,this.inclusive=e}}function ll(t,e,n){let i=0;for(let r=0;r<t.position.length;r++){const s=e[r],o=t.position[r];if(i=s.field.isKeyField()?ec.comparator(ec.fromName(o.referenceValue),n.key):Gc(o,n.data.field(s.field)),"desc"===s.dir&&(i*=-1),0!==i)break}return i}function ul(t,e){if(null===t)return null===e;if(null===e)return!1;if(t.inclusive!==e.inclusive||t.position.length!==e.position.length)return!1;for(let n=0;n<t.position.length;n++)if(!$c(t.position[n],e.position[n]))return!1;return!0}
/**
 * @license
 * Copyright 2022 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class hl{constructor(t,e="asc"){this.field=t,this.dir=e}}function dl(t,e){return t.dir===e.dir&&t.field.isEqual(e.field)}
/**
 * @license
 * Copyright 2022 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class fl{}class pl extends fl{constructor(t,e,n){super(),this.field=t,this.op=e,this.value=n}static create(t,e,n){return t.isKeyField()?"in"===e||"not-in"===e?this.createKeyFieldInFilter(t,e,n):new _l(t,e,n):"array-contains"===e?new xl(t,n):"in"===e?new Tl(t,n):"not-in"===e?new Sl(t,n):"array-contains-any"===e?new Il(t,n):new pl(t,e,n)}static createKeyFieldInFilter(t,e,n){return"in"===e?new El(t,n):new kl(t,n)}matches(t){const e=t.data.field(this.field);return"!="===this.op?null!==e&&void 0===e.nullValue&&this.matchesComparison(Gc(e,this.value)):null!==e&&zc(this.value)===zc(e)&&this.matchesComparison(Gc(e,this.value))}matchesComparison(t){switch(this.op){case"<":return t<0;case"<=":return t<=0;case"==":return 0===t;case"!=":return 0!==t;case">":return t>0;case">=":return t>=0;default:return ka(47266,{operator:this.op})}}isInequality(){return["<","<=",">",">=","!=","not-in"].indexOf(this.op)>=0}getFlattenedFilters(){return[this]}getFilters(){return[this]}}class gl extends fl{constructor(t,e){super(),this.filters=t,this.op=e,this.Te=null}static create(t,e){return new gl(t,e)}matches(t){return ml(this)?void 0===this.filters.find((e=>!e.matches(t))):void 0!==this.filters.find((e=>e.matches(t)))}getFlattenedFilters(){return null!==this.Te||(this.Te=this.filters.reduce(((t,e)=>t.concat(e.getFlattenedFilters())),[])),this.Te}getFilters(){return Object.assign([],this.filters)}}function ml(t){return"and"===t.op}function yl(t){return function(t){for(const e of t.filters)if(e instanceof gl)return!1;return!0}(t)&&ml(t)}function vl(t){if(t instanceof pl)return t.field.canonicalString()+t.op.toString()+Yc(t.value);if(yl(t))return t.filters.map((t=>vl(t))).join(",");{const e=t.filters.map((t=>vl(t))).join(",");return`${t.op}(${e})`}}function bl(t,e){return t instanceof pl?(n=t,(i=e)instanceof pl&&n.op===i.op&&n.field.isEqual(i.field)&&$c(n.value,i.value)):t instanceof gl?function(t,e){return e instanceof gl&&t.op===e.op&&t.filters.length===e.filters.length&&t.filters.reduce(((t,n,i)=>t&&bl(n,e.filters[i])),!0)}(t,e):void ka(19439);var n,i}function wl(t){return t instanceof pl?`${(e=t).field.canonicalString()} ${e.op} ${Yc(e.value)}`:t instanceof gl?function(t){return t.op.toString()+" {"+t.getFilters().map(wl).join(" ,")+"}"}(t):"Filter";var e}class _l extends pl{constructor(t,e,n){super(t,e,n),this.key=ec.fromName(n.referenceValue)}matches(t){const e=ec.comparator(t.key,this.key);return this.matchesComparison(e)}}class El extends pl{constructor(t,e){super(t,"in",e),this.keys=Cl("in",e)}matches(t){return this.keys.some((e=>e.isEqual(t.key)))}}class kl extends pl{constructor(t,e){super(t,"not-in",e),this.keys=Cl("not-in",e)}matches(t){return!this.keys.some((e=>e.isEqual(t.key)))}}function Cl(t,e){var n;return((null===(n=e.arrayValue)||void 0===n?void 0:n.values)||[]).map((t=>ec.fromName(t.referenceValue)))}class xl extends pl{constructor(t,e){super(t,"array-contains",e)}matches(t){const e=t.data.field(this.field);return tl(e)&&Kc(e.arrayValue,this.value)}}class Tl extends pl{constructor(t,e){super(t,"in",e)}matches(t){const e=t.data.field(this.field);return null!==e&&Kc(this.value.arrayValue,e)}}class Sl extends pl{constructor(t,e){super(t,"not-in",e)}matches(t){if(Kc(this.value.arrayValue,{nullValue:"NULL_VALUE"}))return!1;const e=t.data.field(this.field);return null!==e&&void 0===e.nullValue&&!Kc(this.value.arrayValue,e)}}class Il extends pl{constructor(t,e){super(t,"array-contains-any",e)}matches(t){const e=t.data.field(this.field);return!(!tl(e)||!e.arrayValue.values)&&e.arrayValue.values.some((t=>Kc(this.value.arrayValue,t)))}}
/**
 * @license
 * Copyright 2019 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class Dl{constructor(t,e=null,n=[],i=[],r=null,s=null,o=null){this.path=t,this.collectionGroup=e,this.orderBy=n,this.filters=i,this.limit=r,this.startAt=s,this.endAt=o,this.Ie=null}}function Al(t,e=null,n=[],i=[],r=null,s=null,o=null){return new Dl(t,e,n,i,r,s,o)}function Ll(t){const e=Ta(t);if(null===e.Ie){let t=e.path.canonicalString();null!==e.collectionGroup&&(t+="|cg:"+e.collectionGroup),t+="|f:",t+=e.filters.map((t=>vl(t))).join(","),t+="|ob:",t+=e.orderBy.map((t=>{return(e=t).field.canonicalString()+e.dir;var e})).join(","),uc(e.limit)||(t+="|l:",t+=e.limit),e.startAt&&(t+="|lb:",t+=e.startAt.inclusive?"b:":"a:",t+=e.startAt.position.map((t=>Yc(t))).join(",")),e.endAt&&(t+="|ub:",t+=e.endAt.inclusive?"a:":"b:",t+=e.endAt.position.map((t=>Yc(t))).join(",")),e.Ie=t}return e.Ie}function Ol(t,e){if(t.limit!==e.limit)return!1;if(t.orderBy.length!==e.orderBy.length)return!1;for(let n=0;n<t.orderBy.length;n++)if(!dl(t.orderBy[n],e.orderBy[n]))return!1;if(t.filters.length!==e.filters.length)return!1;for(let n=0;n<t.filters.length;n++)if(!bl(t.filters[n],e.filters[n]))return!1;return t.collectionGroup===e.collectionGroup&&!!t.path.isEqual(e.path)&&!!ul(t.startAt,e.startAt)&&ul(t.endAt,e.endAt)}function Nl(t){return ec.isDocumentKey(t.path)&&null===t.collectionGroup&&0===t.filters.length}
/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class Ml{constructor(t,e=null,n=[],i=[],r=null,s="F",o=null,a=null){this.path=t,this.collectionGroup=e,this.explicitOrderBy=n,this.filters=i,this.limit=r,this.limitType=s,this.startAt=o,this.endAt=a,this.Ee=null,this.de=null,this.Ae=null,this.startAt,this.endAt}}function Rl(t){return new Ml(t)}function Pl(t){return 0===t.filters.length&&null===t.limit&&null==t.startAt&&null==t.endAt&&(0===t.explicitOrderBy.length||1===t.explicitOrderBy.length&&t.explicitOrderBy[0].field.isKeyField())}function Vl(t){const e=Ta(t);if(null===e.Ee){e.Ee=[];const t=new Set;for(const i of e.explicitOrderBy)e.Ee.push(i),t.add(i.field.canonicalString());const n=e.explicitOrderBy.length>0?e.explicitOrderBy[e.explicitOrderBy.length-1].dir:"asc";(function(t){let e=new wc(tc.comparator);return t.filters.forEach((t=>{t.getFlattenedFilters().forEach((t=>{t.isInequality()&&(e=e.add(t.field))}))})),e})(e).forEach((i=>{t.has(i.canonicalString())||i.isKeyField()||e.Ee.push(new hl(i,n))})),t.has(tc.keyField().canonicalString())||e.Ee.push(new hl(tc.keyField(),n))}return e.Ee}function Fl(t){const e=Ta(t);return e.de||(e.de=function(t,e){if("F"===t.limitType)return Al(t.path,t.collectionGroup,e,t.filters,t.limit,t.startAt,t.endAt);{e=e.map((t=>{const e="desc"===t.dir?"asc":"desc";return new hl(t.field,e)}));const n=t.endAt?new cl(t.endAt.position,t.endAt.inclusive):null,i=t.startAt?new cl(t.startAt.position,t.startAt.inclusive):null;return Al(t.path,t.collectionGroup,e,t.filters,t.limit,n,i)}}(e,Vl(t))),e.de}function Bl(t,e,n){return new Ml(t.path,t.collectionGroup,t.explicitOrderBy.slice(),t.filters.slice(),e,n,t.startAt,t.endAt)}function jl(t,e){return Ol(Fl(t),Fl(e))&&t.limitType===e.limitType}function Ul(t){return`${Ll(Fl(t))}|lt:${t.limitType}`}function ql(t){return`Query(target=${function(t){let e=t.path.canonicalString();return null!==t.collectionGroup&&(e+=" collectionGroup="+t.collectionGroup),t.filters.length>0&&(e+=`, filters: [${t.filters.map((t=>wl(t))).join(", ")}]`),uc(t.limit)||(e+=", limit: "+t.limit),t.orderBy.length>0&&(e+=`, orderBy: [${t.orderBy.map((t=>{return`${(e=t).field.canonicalString()} (${e.dir})`;var e})).join(", ")}]`),t.startAt&&(e+=", startAt: ",e+=t.startAt.inclusive?"b:":"a:",e+=t.startAt.position.map((t=>Yc(t))).join(",")),t.endAt&&(e+=", endAt: ",e+=t.endAt.inclusive?"a:":"b:",e+=t.endAt.position.map((t=>Yc(t))).join(",")),`Target(${e})`}(Fl(t))}; limitType=${t.limitType})`}function Hl(t,e){return e.isFoundDocument()&&function(t,e){const n=e.key.path;return null!==t.collectionGroup?e.key.hasCollectionId(t.collectionGroup)&&t.path.isPrefixOf(n):ec.isDocumentKey(t.path)?t.path.isEqual(n):t.path.isImmediateParentOf(n)}(t,e)&&function(t,e){for(const n of Vl(t))if(!n.field.isKeyField()&&null===e.data.field(n.field))return!1;return!0}(t,e)&&function(t,e){for(const n of t.filters)if(!n.matches(e))return!1;return!0}(t,e)&&(i=e,!((n=t).startAt&&!function(t,e,n){const i=ll(t,e,n);return t.inclusive?i<=0:i<0}(n.startAt,Vl(n),i)||n.endAt&&!function(t,e,n){const i=ll(t,e,n);return t.inclusive?i>=0:i>0}(n.endAt,Vl(n),i)));var n,i}function zl(t){return(e,n)=>{let i=!1;for(const r of Vl(t)){const t=$l(r,e,n);if(0!==t)return t;i=i||r.field.isKeyField()}return 0}}function $l(t,e,n){const i=t.field.isKeyField()?ec.comparator(e.key,n.key):function(t,e,n){const i=e.data.field(t),r=n.data.field(t);return null!==i&&null!==r?Gc(i,r):ka(42886)}(t.field,e,n);switch(t.dir){case"asc":return i;case"desc":return-1*i;default:return ka(19790,{direction:t.dir})}}
/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class Kl{constructor(t,e){this.mapKeyFn=t,this.equalsFn=e,this.inner={},this.innerSize=0}get(t){const e=this.mapKeyFn(t),n=this.inner[e];if(void 0!==n)for(const[i,r]of n)if(this.equalsFn(i,t))return r}has(t){return void 0!==this.get(t)}set(t,e){const n=this.mapKeyFn(t),i=this.inner[n];if(void 0===i)return this.inner[n]=[[t,e]],void this.innerSize++;for(let r=0;r<i.length;r++)if(this.equalsFn(i[r][0],t))return void(i[r]=[t,e]);i.push([t,e]),this.innerSize++}delete(t){const e=this.mapKeyFn(t),n=this.inner[e];if(void 0===n)return!1;for(let i=0;i<n.length;i++)if(this.equalsFn(n[i][0],t))return 1===n.length?delete this.inner[e]:n.splice(i,1),this.innerSize--,!0;return!1}forEach(t){gc(this.inner,((e,n)=>{for(const[i,r]of n)t(i,r)}))}isEmpty(){return mc(this.inner)}size(){return this.innerSize}}
/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const Gl=new yc(ec.comparator);function Wl(){return Gl}const Ql=new yc(ec.comparator);function Yl(...t){let e=Ql;for(const n of t)e=e.insert(n.key,n);return e}function Xl(t){let e=Ql;return t.forEach(((t,n)=>e=e.insert(t,n.overlayedDocument))),e}function Jl(){return tu()}function Zl(){return tu()}function tu(){return new Kl((t=>t.toString()),((t,e)=>t.isEqual(e)))}const eu=new yc(ec.comparator),nu=new wc(ec.comparator);function iu(...t){let e=nu;for(const n of t)e=e.add(n);return e}const ru=new wc(Ua);
/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */
function su(t,e){if(t.useProto3Json){if(isNaN(e))return{doubleValue:"NaN"};if(e===1/0)return{doubleValue:"Infinity"};if(e===-1/0)return{doubleValue:"-Infinity"}}return{doubleValue:hc(e)?"-0":e}}function ou(t){return{integerValue:""+t}}function au(t,e){return function(t){return"number"==typeof t&&Number.isInteger(t)&&!hc(t)&&t<=Number.MAX_SAFE_INTEGER&&t>=Number.MIN_SAFE_INTEGER}
/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */(e)?ou(e):su(t,e)}
/**
 * @license
 * Copyright 2018 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class cu{constructor(){this._=void 0}}function lu(t,e,n){return t instanceof du?function(t,e){const n={fields:{[Ac]:{stringValue:Dc},[Oc]:{timestampValue:{seconds:t.seconds,nanos:t.nanoseconds}}}};return e&&Nc(e)&&(e=Mc(e)),e&&(n.fields[Lc]=e),{mapValue:n}}(n,e):t instanceof fu?pu(t,e):t instanceof gu?mu(t,e):function(t,e){const n=hu(t,e),i=vu(n)+vu(t.Re);return Zc(n)&&Zc(t.Re)?ou(i):su(t.serializer,i)}(t,e)}function uu(t,e,n){return t instanceof fu?pu(t,e):t instanceof gu?mu(t,e):n}function hu(t,e){return t instanceof yu?Zc(n=e)||(i=n)&&"doubleValue"in i?e:{integerValue:0}:null;var n,i}class du extends cu{}class fu extends cu{constructor(t){super(),this.elements=t}}function pu(t,e){const n=bu(e);for(const i of t.elements)n.some((t=>$c(t,i)))||n.push(i);return{arrayValue:{values:n}}}class gu extends cu{constructor(t){super(),this.elements=t}}function mu(t,e){let n=bu(e);for(const i of t.elements)n=n.filter((t=>!$c(t,i)));return{arrayValue:{values:n}}}class yu extends cu{constructor(t,e){super(),this.serializer=t,this.Re=e}}function vu(t){return Sc(t.integerValue||t.doubleValue)}function bu(t){return tl(t)&&t.arrayValue.values?t.arrayValue.values.slice():[]}class wu{constructor(t,e){this.version=t,this.transformResults=e}}class _u{constructor(t,e){this.updateTime=t,this.exists=e}static none(){return new _u}static exists(t){return new _u(void 0,t)}static updateTime(t){return new _u(t)}get isNone(){return void 0===this.updateTime&&void 0===this.exists}isEqual(t){return this.exists===t.exists&&(this.updateTime?!!t.updateTime&&this.updateTime.isEqual(t.updateTime):!t.updateTime)}}function Eu(t,e){return void 0!==t.updateTime?e.isFoundDocument()&&e.version.isEqual(t.updateTime):void 0===t.exists||t.exists===e.isFoundDocument()}class ku{}function Cu(t,e){if(!t.hasLocalMutations||e&&0===e.fields.length)return null;if(null===e)return t.isNoDocument()?new Mu(t.key,_u.none()):new Du(t.key,t.data,_u.none());{const n=t.data,i=sl.empty();let r=new wc(tc.comparator);for(let t of e.fields)if(!r.has(t)){let e=n.field(t);null===e&&t.length>1&&(t=t.popLast(),e=n.field(t)),null===e?i.delete(t):i.set(t,e),r=r.add(t)}return new Au(t.key,i,new Ec(r.toArray()),_u.none())}}function xu(t,e,n){var i;t instanceof Du?function(t,e,n){const i=t.value.clone(),r=Ou(t.fieldTransforms,e,n.transformResults);i.setAll(r),e.convertToFoundDocument(n.version,i).setHasCommittedMutations()}(t,e,n):t instanceof Au?function(t,e,n){if(!Eu(t.precondition,e))return void e.convertToUnknownDocument(n.version);const i=Ou(t.fieldTransforms,e,n.transformResults),r=e.data;r.setAll(Lu(t)),r.setAll(i),e.convertToFoundDocument(n.version,r).setHasCommittedMutations()}(t,e,n):(i=n,e.convertToNoDocument(i.version).setHasCommittedMutations())}function Tu(t,e,n,i){return t instanceof Du?function(t,e,n,i){if(!Eu(t.precondition,e))return n;const r=t.value.clone(),s=Nu(t.fieldTransforms,i,e);return r.setAll(s),e.convertToFoundDocument(e.version,r).setHasLocalMutations(),null}(t,e,n,i):t instanceof Au?function(t,e,n,i){if(!Eu(t.precondition,e))return n;const r=Nu(t.fieldTransforms,i,e),s=e.data;return s.setAll(Lu(t)),s.setAll(r),e.convertToFoundDocument(e.version,s).setHasLocalMutations(),null===n?null:n.unionWith(t.fieldMask.fields).unionWith(t.fieldTransforms.map((t=>t.field)))}(t,e,n,i):(r=e,s=n,Eu(t.precondition,r)?(r.convertToNoDocument(r.version).setHasLocalMutations(),null):s);var r,s}function Su(t,e){let n=null;for(const i of t.fieldTransforms){const t=e.data.field(i.field),r=hu(i.transform,t||null);null!=r&&(null===n&&(n=sl.empty()),n.set(i.field,r))}return n||null}function Iu(t,e){return t.type===e.type&&!!t.key.isEqual(e.key)&&!!t.precondition.isEqual(e.precondition)&&(n=t.fieldTransforms,i=e.fieldTransforms,!!(void 0===n&&void 0===i||n&&i&&$a(n,i,((t,e)=>function(t,e){return t.field.isEqual(e.field)&&(n=t.transform,i=e.transform,n instanceof fu&&i instanceof fu||n instanceof gu&&i instanceof gu?$a(n.elements,i.elements,$c):n instanceof yu&&i instanceof yu?$c(n.Re,i.Re):n instanceof du&&i instanceof du);var n,i}(t,e))))&&(0===t.type?t.value.isEqual(e.value):1!==t.type||t.data.isEqual(e.data)&&t.fieldMask.isEqual(e.fieldMask)));var n,i}class Du extends ku{constructor(t,e,n,i=[]){super(),this.key=t,this.value=e,this.precondition=n,this.fieldTransforms=i,this.type=0}getFieldMask(){return null}}class Au extends ku{constructor(t,e,n,i,r=[]){super(),this.key=t,this.data=e,this.fieldMask=n,this.precondition=i,this.fieldTransforms=r,this.type=1}getFieldMask(){return this.fieldMask}}function Lu(t){const e=new Map;return t.fieldMask.fields.forEach((n=>{if(!n.isEmpty()){const i=t.data.field(n);e.set(n,i)}})),e}function Ou(t,e,n){const i=new Map;xa(t.length===n.length,32656,{Ve:n.length,me:t.length});for(let r=0;r<n.length;r++){const s=t[r],o=s.transform,a=e.data.field(s.field);i.set(s.field,uu(o,a,n[r]))}return i}function Nu(t,e,n){const i=new Map;for(const r of t){const t=r.transform,s=n.data.field(r.field);i.set(r.field,lu(t,s,e))}return i}class Mu extends ku{constructor(t,e){super(),this.key=t,this.precondition=e,this.type=2,this.fieldTransforms=[]}getFieldMask(){return null}}class Ru extends ku{constructor(t,e){super(),this.key=t,this.precondition=e,this.type=3,this.fieldTransforms=[]}getFieldMask(){return null}}
/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class Pu{constructor(t,e,n,i){this.batchId=t,this.localWriteTime=e,this.baseMutations=n,this.mutations=i}applyToRemoteDocument(t,e){const n=e.mutationResults;for(let i=0;i<this.mutations.length;i++){const e=this.mutations[i];e.key.isEqual(t.key)&&xu(e,t,n[i])}}applyToLocalView(t,e){for(const n of this.baseMutations)n.key.isEqual(t.key)&&(e=Tu(n,t,e,this.localWriteTime));for(const n of this.mutations)n.key.isEqual(t.key)&&(e=Tu(n,t,e,this.localWriteTime));return e}applyToLocalDocumentSet(t,e){const n=Zl();return this.mutations.forEach((i=>{const r=t.get(i.key),s=r.overlayedDocument;let o=this.applyToLocalView(s,r.mutatedFields);o=e.has(i.key)?null:o;const a=Cu(s,o);null!==a&&n.set(i.key,a),s.isValidDocument()||s.convertToNoDocument(Qa.min())})),n}keys(){return this.mutations.reduce(((t,e)=>t.add(e.key)),iu())}isEqual(t){return this.batchId===t.batchId&&$a(this.mutations,t.mutations,((t,e)=>Iu(t,e)))&&$a(this.baseMutations,t.baseMutations,((t,e)=>Iu(t,e)))}}class Vu{constructor(t,e,n,i){this.batch=t,this.commitVersion=e,this.mutationResults=n,this.docVersions=i}static from(t,e,n){xa(t.mutations.length===n.length,58842,{fe:t.mutations.length,ge:n.length});let i=function(){return eu}();const r=t.mutations;for(let s=0;s<r.length;s++)i=i.insert(r[s].key,n[s].version);return new Vu(t,e,n,i)}}
/**
 * @license
 * Copyright 2022 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class Fu{constructor(t,e){this.largestBatchId=t,this.mutation=e}getKey(){return this.mutation.key}isEqual(t){return null!==t&&this.mutation===t.mutation}toString(){return`Overlay{\n      largestBatchId: ${this.largestBatchId},\n      mutation: ${this.mutation.toString()}\n    }`}}
/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class Bu{constructor(t,e){this.count=t,this.unchangedNames=e}}
/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */var ju,Uu;function qu(t){if(void 0===t)return wa("GRPC error has no .code"),Sa.UNKNOWN;switch(t){case ju.OK:return Sa.OK;case ju.CANCELLED:return Sa.CANCELLED;case ju.UNKNOWN:return Sa.UNKNOWN;case ju.DEADLINE_EXCEEDED:return Sa.DEADLINE_EXCEEDED;case ju.RESOURCE_EXHAUSTED:return Sa.RESOURCE_EXHAUSTED;case ju.INTERNAL:return Sa.INTERNAL;case ju.UNAVAILABLE:return Sa.UNAVAILABLE;case ju.UNAUTHENTICATED:return Sa.UNAUTHENTICATED;case ju.INVALID_ARGUMENT:return Sa.INVALID_ARGUMENT;case ju.NOT_FOUND:return Sa.NOT_FOUND;case ju.ALREADY_EXISTS:return Sa.ALREADY_EXISTS;case ju.PERMISSION_DENIED:return Sa.PERMISSION_DENIED;case ju.FAILED_PRECONDITION:return Sa.FAILED_PRECONDITION;case ju.ABORTED:return Sa.ABORTED;case ju.OUT_OF_RANGE:return Sa.OUT_OF_RANGE;case ju.UNIMPLEMENTED:return Sa.UNIMPLEMENTED;case ju.DATA_LOSS:return Sa.DATA_LOSS;default:return ka(39323,{code:t})}}(Uu=ju||(ju={}))[Uu.OK=0]="OK",Uu[Uu.CANCELLED=1]="CANCELLED",Uu[Uu.UNKNOWN=2]="UNKNOWN",Uu[Uu.INVALID_ARGUMENT=3]="INVALID_ARGUMENT",Uu[Uu.DEADLINE_EXCEEDED=4]="DEADLINE_EXCEEDED",Uu[Uu.NOT_FOUND=5]="NOT_FOUND",Uu[Uu.ALREADY_EXISTS=6]="ALREADY_EXISTS",Uu[Uu.PERMISSION_DENIED=7]="PERMISSION_DENIED",Uu[Uu.UNAUTHENTICATED=16]="UNAUTHENTICATED",Uu[Uu.RESOURCE_EXHAUSTED=8]="RESOURCE_EXHAUSTED",Uu[Uu.FAILED_PRECONDITION=9]="FAILED_PRECONDITION",Uu[Uu.ABORTED=10]="ABORTED",Uu[Uu.OUT_OF_RANGE=11]="OUT_OF_RANGE",Uu[Uu.UNIMPLEMENTED=12]="UNIMPLEMENTED",Uu[Uu.INTERNAL=13]="INTERNAL",Uu[Uu.UNAVAILABLE=14]="UNAVAILABLE",Uu[Uu.DATA_LOSS=15]="DATA_LOSS";
/**
 * @license
 * Copyright 2022 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */
const Hu=new ea([4294967295,4294967295],0);function zu(t){const e=Ba().encode(t),n=new na;return n.update(e),new Uint8Array(n.digest())}function $u(t){const e=new DataView(t.buffer),n=e.getUint32(0,!0),i=e.getUint32(4,!0),r=e.getUint32(8,!0),s=e.getUint32(12,!0);return[new ea([n,i],0),new ea([r,s],0)]}class Ku{constructor(t,e,n){if(this.bitmap=t,this.padding=e,this.hashCount=n,e<0||e>=8)throw new Gu(`Invalid padding: ${e}`);if(n<0)throw new Gu(`Invalid hash count: ${n}`);if(t.length>0&&0===this.hashCount)throw new Gu(`Invalid hash count: ${n}`);if(0===t.length&&0!==e)throw new Gu(`Invalid padding when bitmap length is 0: ${e}`);this.pe=8*t.length-e,this.ye=ea.fromNumber(this.pe)}we(t,e,n){let i=t.add(e.multiply(ea.fromNumber(n)));return 1===i.compare(Hu)&&(i=new ea([i.getBits(0),i.getBits(1)],0)),i.modulo(this.ye).toNumber()}be(t){return!!(this.bitmap[Math.floor(t/8)]&1<<t%8)}mightContain(t){if(0===this.pe)return!1;const e=zu(t),[n,i]=$u(e);for(let r=0;r<this.hashCount;r++){const t=this.we(n,i,r);if(!this.be(t))return!1}return!0}static create(t,e,n){const i=t%8==0?0:8-t%8,r=new Uint8Array(Math.ceil(t/8)),s=new Ku(r,i,e);return n.forEach((t=>s.insert(t))),s}insert(t){if(0===this.pe)return;const e=zu(t),[n,i]=$u(e);for(let r=0;r<this.hashCount;r++){const t=this.we(n,i,r);this.Se(t)}}Se(t){const e=Math.floor(t/8),n=t%8;this.bitmap[e]|=1<<n}}class Gu extends Error{constructor(){super(...arguments),this.name="BloomFilterError"}}
/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class Wu{constructor(t,e,n,i,r){this.snapshotVersion=t,this.targetChanges=e,this.targetMismatches=n,this.documentUpdates=i,this.resolvedLimboDocuments=r}static createSynthesizedRemoteEventForCurrentChange(t,e,n){const i=new Map;return i.set(t,Qu.createSynthesizedTargetChangeForCurrentChange(t,e,n)),new Wu(Qa.min(),i,new yc(Ua),Wl(),iu())}}class Qu{constructor(t,e,n,i,r){this.resumeToken=t,this.current=e,this.addedDocuments=n,this.modifiedDocuments=i,this.removedDocuments=r}static createSynthesizedTargetChangeForCurrentChange(t,e,n){return new Qu(n,e,iu(),iu(),iu())}}
/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class Yu{constructor(t,e,n,i){this.De=t,this.removedTargetIds=e,this.key=n,this.ve=i}}class Xu{constructor(t,e){this.targetId=t,this.Ce=e}}class Ju{constructor(t,e,n=Cc.EMPTY_BYTE_STRING,i=null){this.state=t,this.targetIds=e,this.resumeToken=n,this.cause=i}}class Zu{constructor(){this.Fe=0,this.Me=nh(),this.xe=Cc.EMPTY_BYTE_STRING,this.Oe=!1,this.Ne=!0}get current(){return this.Oe}get resumeToken(){return this.xe}get Be(){return 0!==this.Fe}get Le(){return this.Ne}ke(t){t.approximateByteSize()>0&&(this.Ne=!0,this.xe=t)}qe(){let t=iu(),e=iu(),n=iu();return this.Me.forEach(((i,r)=>{switch(r){case 0:t=t.add(i);break;case 2:e=e.add(i);break;case 1:n=n.add(i);break;default:ka(38017,{changeType:r})}})),new Qu(this.xe,this.Oe,t,e,n)}Qe(){this.Ne=!1,this.Me=nh()}$e(t,e){this.Ne=!0,this.Me=this.Me.insert(t,e)}Ue(t){this.Ne=!0,this.Me=this.Me.remove(t)}Ke(){this.Fe+=1}We(){this.Fe-=1,xa(this.Fe>=0,3241,{Fe:this.Fe})}Ge(){this.Ne=!0,this.Oe=!0}}class th{constructor(t){this.ze=t,this.je=new Map,this.He=Wl(),this.Je=eh(),this.Ye=eh(),this.Ze=new yc(Ua)}Xe(t){for(const e of t.De)t.ve&&t.ve.isFoundDocument()?this.et(e,t.ve):this.tt(e,t.key,t.ve);for(const e of t.removedTargetIds)this.tt(e,t.key,t.ve)}nt(t){this.forEachTarget(t,(e=>{const n=this.rt(e);switch(t.state){case 0:this.it(e)&&n.ke(t.resumeToken);break;case 1:n.We(),n.Be||n.Qe(),n.ke(t.resumeToken);break;case 2:n.We(),n.Be||this.removeTarget(e);break;case 3:this.it(e)&&(n.Ge(),n.ke(t.resumeToken));break;case 4:this.it(e)&&(this.st(e),n.ke(t.resumeToken));break;default:ka(56790,{state:t.state})}}))}forEachTarget(t,e){t.targetIds.length>0?t.targetIds.forEach(e):this.je.forEach(((t,n)=>{this.it(n)&&e(n)}))}ot(t){const e=t.targetId,n=t.Ce.count,i=this._t(e);if(i){const r=i.target;if(Nl(r))if(0===n){const t=new ec(r.path);this.tt(e,t,al.newNoDocument(t,Qa.min()))}else xa(1===n,20013,{expectedCount:n});else{const i=this.ut(e);if(i!==n){const n=this.ct(t),r=n?this.lt(n,t,i):1;if(0!==r){this.st(e);const t=2===r?"TargetPurposeExistenceFilterMismatchBloom":"TargetPurposeExistenceFilterMismatch";this.Ze=this.Ze.insert(e,t)}}}}}ct(t){const e=t.Ce.unchangedNames;if(!e||!e.bits)return null;const{bits:{bitmap:n="",padding:i=0},hashCount:r=0}=e;let s,o;try{s=Ic(n).toUint8Array()}catch(a){if(a instanceof kc)return _a("Decoding the base64 bloom filter in existence filter failed ("+a.message+"); ignoring the bloom filter and falling back to full re-query."),null;throw a}try{o=new Ku(s,i,r)}catch(a){return _a(a instanceof Gu?"BloomFilter error: ":"Applying bloom filter failed: ",a),null}return 0===o.pe?null:o}lt(t,e,n){return e.Ce.count===n-this.Tt(t,e.targetId)?0:2}Tt(t,e){const n=this.ze.getRemoteKeysForTarget(e);let i=0;return n.forEach((n=>{const r=this.ze.Pt(),s=`projects/${r.projectId}/databases/${r.database}/documents/${n.path.canonicalString()}`;t.mightContain(s)||(this.tt(e,n,null),i++)})),i}It(t){const e=new Map;this.je.forEach(((n,i)=>{const r=this._t(i);if(r){if(n.current&&Nl(r.target)){const e=new ec(r.target.path);this.Et(e).has(i)||this.dt(i,e)||this.tt(i,e,al.newNoDocument(e,t))}n.Le&&(e.set(i,n.qe()),n.Qe())}}));let n=iu();this.Ye.forEach(((t,e)=>{let i=!0;e.forEachWhile((t=>{const e=this._t(t);return!e||"TargetPurposeLimboResolution"===e.purpose||(i=!1,!1)})),i&&(n=n.add(t))})),this.He.forEach(((e,n)=>n.setReadTime(t)));const i=new Wu(t,e,this.Ze,this.He,n);return this.He=Wl(),this.Je=eh(),this.Ye=eh(),this.Ze=new yc(Ua),i}et(t,e){if(!this.it(t))return;const n=this.dt(t,e.key)?2:0;this.rt(t).$e(e.key,n),this.He=this.He.insert(e.key,e),this.Je=this.Je.insert(e.key,this.Et(e.key).add(t)),this.Ye=this.Ye.insert(e.key,this.At(e.key).add(t))}tt(t,e,n){if(!this.it(t))return;const i=this.rt(t);this.dt(t,e)?i.$e(e,1):i.Ue(e),this.Ye=this.Ye.insert(e,this.At(e).delete(t)),this.Ye=this.Ye.insert(e,this.At(e).add(t)),n&&(this.He=this.He.insert(e,n))}removeTarget(t){this.je.delete(t)}ut(t){const e=this.rt(t).qe();return this.ze.getRemoteKeysForTarget(t).size+e.addedDocuments.size-e.removedDocuments.size}Ke(t){this.rt(t).Ke()}rt(t){let e=this.je.get(t);return e||(e=new Zu,this.je.set(t,e)),e}At(t){let e=this.Ye.get(t);return e||(e=new wc(Ua),this.Ye=this.Ye.insert(t,e)),e}Et(t){let e=this.Je.get(t);return e||(e=new wc(Ua),this.Je=this.Je.insert(t,e)),e}it(t){const e=null!==this._t(t);return e||ba("WatchChangeAggregator","Detected inactive target",t),e}_t(t){const e=this.je.get(t);return e&&e.Be?null:this.ze.Rt(t)}st(t){this.je.set(t,new Zu),this.ze.getRemoteKeysForTarget(t).forEach((e=>{this.tt(t,e,null)}))}dt(t,e){return this.ze.getRemoteKeysForTarget(t).has(e)}}function eh(){return new yc(ec.comparator)}function nh(){return new yc(ec.comparator)}const ih=(()=>({asc:"ASCENDING",desc:"DESCENDING"}))(),rh=(()=>({"<":"LESS_THAN","<=":"LESS_THAN_OR_EQUAL",">":"GREATER_THAN",">=":"GREATER_THAN_OR_EQUAL","==":"EQUAL","!=":"NOT_EQUAL","array-contains":"ARRAY_CONTAINS",in:"IN","not-in":"NOT_IN","array-contains-any":"ARRAY_CONTAINS_ANY"}))(),sh=(()=>({and:"AND",or:"OR"}))();class oh{constructor(t,e){this.databaseId=t,this.useProto3Json=e}}function ah(t,e){return t.useProto3Json||uc(e)?e:{value:e}}function ch(t,e){return t.useProto3Json?`${new Date(1e3*e.seconds).toISOString().replace(/\.\d*/,"").replace("Z","")}.${("000000000"+e.nanoseconds).slice(-9)}Z`:{seconds:""+e.seconds,nanos:e.nanoseconds}}function lh(t,e){return t.useProto3Json?e.toBase64():e.toUint8Array()}function uh(t,e){return ch(t,e.toTimestamp())}function hh(t){return xa(!!t,49232),Qa.fromTimestamp(function(t){const e=Tc(t);return new Wa(e.seconds,e.nanos)}(t))}function dh(t,e){return fh(t,e).canonicalString()}function fh(t,e){const n=(i=t,new Ja(["projects",i.projectId,"databases",i.database])).child("documents");var i;return void 0===e?n:n.child(e)}function ph(t){const e=Ja.fromString(t);return xa(Oh(e),10190,{key:e.toString()}),e}function gh(t,e){return dh(t.databaseId,e.path)}function mh(t,e){const n=ph(e);if(n.get(1)!==t.databaseId.projectId)throw new Ia(Sa.INVALID_ARGUMENT,"Tried to deserialize key from different project: "+n.get(1)+" vs "+t.databaseId.projectId);if(n.get(3)!==t.databaseId.database)throw new Ia(Sa.INVALID_ARGUMENT,"Tried to deserialize key from different database: "+n.get(3)+" vs "+t.databaseId.database);return new ec(bh(n))}function yh(t,e){return dh(t.databaseId,e)}function vh(t){return new Ja(["projects",t.databaseId.projectId,"databases",t.databaseId.database]).canonicalString()}function bh(t){return xa(t.length>4&&"documents"===t.get(4),29091,{key:t.toString()}),t.popFirst(5)}function wh(t,e,n){return{name:gh(t,e),fields:n.value.mapValue.fields}}function _h(t,e){return{documents:[yh(t,e.path)]}}function Eh(t,e){const n={structuredQuery:{}},i=e.path;let r;null!==e.collectionGroup?(r=i,n.structuredQuery.from=[{collectionId:e.collectionGroup,allDescendants:!0}]):(r=i.popLast(),n.structuredQuery.from=[{collectionId:i.lastSegment()}]),n.parent=yh(t,r);const s=function(t){if(0!==t.length)return Ah(gl.create(t,"and"))}(e.filters);s&&(n.structuredQuery.where=s);const o=function(t){if(0!==t.length)return t.map((t=>{return{field:Ih((e=t).field),direction:xh(e.dir)};var e}))}(e.orderBy);o&&(n.structuredQuery.orderBy=o);const a=ah(t,e.limit);return null!==a&&(n.structuredQuery.limit=a),e.startAt&&(n.structuredQuery.startAt={before:(c=e.startAt).inclusive,values:c.position}),e.endAt&&(n.structuredQuery.endAt=function(t){return{before:!t.inclusive,values:t.position}}(e.endAt)),{gt:n,parent:r};var c}function kh(t){let e=function(t){const e=ph(t);return 4===e.length?Ja.emptyPath():bh(e)}(t.parent);const n=t.structuredQuery,i=n.from?n.from.length:0;let r=null;if(i>0){xa(1===i,65062);const t=n.from[0];t.allDescendants?r=t.collectionId:e=e.child(t.collectionId)}let s=[];n.where&&(s=function(t){const e=Ch(t);return e instanceof gl&&yl(e)?e.getFilters():[e]}(n.where));let o=[];n.orderBy&&(o=n.orderBy.map((t=>{return new hl(Dh((e=t).field),function(t){switch(t){case"ASCENDING":return"asc";case"DESCENDING":return"desc";default:return}}(e.direction));var e})));let a=null;n.limit&&(a=function(t){let e;return e="object"==typeof t?t.value:t,uc(e)?null:e}(n.limit));let c=null;n.startAt&&(c=function(t){const e=!!t.before,n=t.values||[];return new cl(n,e)}(n.startAt));let l=null;return n.endAt&&(l=function(t){const e=!t.before,n=t.values||[];return new cl(n,e)}(n.endAt)),function(t,e,n,i,r,s,o,a){return new Ml(t,e,n,i,r,s,o,a)}(e,r,o,s,a,"F",c,l)}function Ch(t){return void 0!==t.unaryFilter?function(t){switch(t.unaryFilter.op){case"IS_NAN":const e=Dh(t.unaryFilter.field);return pl.create(e,"==",{doubleValue:NaN});case"IS_NULL":const n=Dh(t.unaryFilter.field);return pl.create(n,"==",{nullValue:"NULL_VALUE"});case"IS_NOT_NAN":const i=Dh(t.unaryFilter.field);return pl.create(i,"!=",{doubleValue:NaN});case"IS_NOT_NULL":const r=Dh(t.unaryFilter.field);return pl.create(r,"!=",{nullValue:"NULL_VALUE"});case"OPERATOR_UNSPECIFIED":return ka(61313);default:return ka(60726)}}(t):void 0!==t.fieldFilter?(e=t,pl.create(Dh(e.fieldFilter.field),function(t){switch(t){case"EQUAL":return"==";case"NOT_EQUAL":return"!=";case"GREATER_THAN":return">";case"GREATER_THAN_OR_EQUAL":return">=";case"LESS_THAN":return"<";case"LESS_THAN_OR_EQUAL":return"<=";case"ARRAY_CONTAINS":return"array-contains";case"IN":return"in";case"NOT_IN":return"not-in";case"ARRAY_CONTAINS_ANY":return"array-contains-any";case"OPERATOR_UNSPECIFIED":return ka(58110);default:return ka(50506)}}(e.fieldFilter.op),e.fieldFilter.value)):void 0!==t.compositeFilter?function(t){return gl.create(t.compositeFilter.filters.map((t=>Ch(t))),function(t){switch(t){case"AND":return"and";case"OR":return"or";default:return ka(1026)}}(t.compositeFilter.op))}(t):ka(30097,{filter:t});var e}function xh(t){return ih[t]}function Th(t){return rh[t]}function Sh(t){return sh[t]}function Ih(t){return{fieldPath:t.canonicalString()}}function Dh(t){return tc.fromServerFormat(t.fieldPath)}function Ah(t){return t instanceof pl?function(t){if("=="===t.op){if(nl(t.value))return{unaryFilter:{field:Ih(t.field),op:"IS_NAN"}};if(el(t.value))return{unaryFilter:{field:Ih(t.field),op:"IS_NULL"}}}else if("!="===t.op){if(nl(t.value))return{unaryFilter:{field:Ih(t.field),op:"IS_NOT_NAN"}};if(el(t.value))return{unaryFilter:{field:Ih(t.field),op:"IS_NOT_NULL"}}}return{fieldFilter:{field:Ih(t.field),op:Th(t.op),value:t.value}}}(t):t instanceof gl?function(t){const e=t.getFilters().map((t=>Ah(t)));return 1===e.length?e[0]:{compositeFilter:{op:Sh(t.op),filters:e}}}(t):ka(54877,{filter:t})}function Lh(t){const e=[];return t.fields.forEach((t=>e.push(t.canonicalString()))),{fieldPaths:e}}function Oh(t){return t.length>=4&&"projects"===t.get(0)&&"databases"===t.get(2)}
/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class Nh{constructor(t,e,n,i,r=Qa.min(),s=Qa.min(),o=Cc.EMPTY_BYTE_STRING,a=null){this.target=t,this.targetId=e,this.purpose=n,this.sequenceNumber=i,this.snapshotVersion=r,this.lastLimboFreeSnapshotVersion=s,this.resumeToken=o,this.expectedCount=a}withSequenceNumber(t){return new Nh(this.target,this.targetId,this.purpose,t,this.snapshotVersion,this.lastLimboFreeSnapshotVersion,this.resumeToken,this.expectedCount)}withResumeToken(t,e){return new Nh(this.target,this.targetId,this.purpose,this.sequenceNumber,e,this.lastLimboFreeSnapshotVersion,t,null)}withExpectedCount(t){return new Nh(this.target,this.targetId,this.purpose,this.sequenceNumber,this.snapshotVersion,this.lastLimboFreeSnapshotVersion,this.resumeToken,t)}withLastLimboFreeSnapshotVersion(t){return new Nh(this.target,this.targetId,this.purpose,this.sequenceNumber,this.snapshotVersion,t,this.resumeToken,this.expectedCount)}}
/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class Mh{constructor(t){this.wt=t}}function Rh(t){const e=kh({parent:t.parent,structuredQuery:t.structuredQuery});return"LAST"===t.limitType?Bl(e,e.limit,"L"):e}
/**
 * @license
 * Copyright 2019 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class Ph{constructor(){this.yn=new Vh}addToCollectionParentIndex(t,e){return this.yn.add(e),ac.resolve()}getCollectionParents(t,e){return ac.resolve(this.yn.getEntries(e))}addFieldIndex(t,e){return ac.resolve()}deleteFieldIndex(t,e){return ac.resolve()}deleteAllFieldIndexes(t){return ac.resolve()}createTargetIndexes(t,e){return ac.resolve()}getDocumentsMatchingTarget(t,e){return ac.resolve(null)}getIndexType(t,e){return ac.resolve(0)}getFieldIndexes(t,e){return ac.resolve([])}getNextCollectionGroupToUpdate(t){return ac.resolve(null)}getMinOffset(t,e){return ac.resolve(ic.min())}getMinOffsetFromCollectionGroup(t,e){return ac.resolve(ic.min())}updateCollectionGroup(t,e,n){return ac.resolve()}updateIndexEntries(t,e){return ac.resolve()}}class Vh{constructor(){this.index={}}add(t){const e=t.lastSegment(),n=t.popLast(),i=this.index[e]||new wc(Ja.comparator),r=!i.has(n);return this.index[e]=i.add(n),r}has(t){const e=t.lastSegment(),n=t.popLast(),i=this.index[e];return i&&i.has(n)}getEntries(t){return(this.index[t]||new wc(Ja.comparator)).toArray()}}
/**
 * @license
 * Copyright 2018 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const Fh={didRun:!1,sequenceNumbersCollected:0,targetsRemoved:0,documentsRemoved:0},Bh=41943040;class jh{static withCacheSize(t){return new jh(t,jh.DEFAULT_COLLECTION_PERCENTILE,jh.DEFAULT_MAX_SEQUENCE_NUMBERS_TO_COLLECT)}constructor(t,e,n){this.cacheSizeCollectionThreshold=t,this.percentileToCollect=e,this.maximumSequenceNumbersToCollect=n}}
/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */jh.DEFAULT_COLLECTION_PERCENTILE=10,jh.DEFAULT_MAX_SEQUENCE_NUMBERS_TO_COLLECT=1e3,jh.DEFAULT=new jh(Bh,jh.DEFAULT_COLLECTION_PERCENTILE,jh.DEFAULT_MAX_SEQUENCE_NUMBERS_TO_COLLECT),jh.DISABLED=new jh(-1,0,0);
/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */
class Uh{constructor(t){this.nr=t}next(){return this.nr+=2,this.nr}static rr(){return new Uh(0)}static ir(){return new Uh(-1)}}
/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const qh="LruGarbageCollector";function Hh([t,e],[n,i]){const r=Ua(t,n);return 0===r?Ua(e,i):r}class zh{constructor(t){this.cr=t,this.buffer=new wc(Hh),this.lr=0}hr(){return++this.lr}Pr(t){const e=[t,this.hr()];if(this.buffer.size<this.cr)this.buffer=this.buffer.add(e);else{const t=this.buffer.last();Hh(e,t)<0&&(this.buffer=this.buffer.delete(t).add(e))}}get maxValue(){return this.buffer.last()[0]}}class $h{constructor(t,e,n){this.garbageCollector=t,this.asyncQueue=e,this.localStore=n,this.Tr=null}start(){-1!==this.garbageCollector.params.cacheSizeCollectionThreshold&&this.Ir(6e4)}stop(){this.Tr&&(this.Tr.cancel(),this.Tr=null)}get started(){return null!==this.Tr}Ir(t){ba(qh,`Garbage collection scheduled in ${t}ms`),this.Tr=this.asyncQueue.enqueueAfterDelay("lru_garbage_collection",t,(async()=>{this.Tr=null;try{await this.localStore.collectGarbage(this.garbageCollector)}catch(t){cc(t)?ba(qh,"Ignoring IndexedDB error during garbage collection: ",t):await oc(t)}await this.Ir(3e5)}))}}class Kh{constructor(t,e){this.Er=t,this.params=e}calculateTargetCount(t,e){return this.Er.dr(t).next((t=>Math.floor(e/100*t)))}nthSequenceNumber(t,e){if(0===e)return ac.resolve(lc.le);const n=new zh(e);return this.Er.forEachTarget(t,(t=>n.Pr(t.sequenceNumber))).next((()=>this.Er.Ar(t,(t=>n.Pr(t))))).next((()=>n.maxValue))}removeTargets(t,e,n){return this.Er.removeTargets(t,e,n)}removeOrphanedDocuments(t,e){return this.Er.removeOrphanedDocuments(t,e)}collect(t,e){return-1===this.params.cacheSizeCollectionThreshold?(ba("LruGarbageCollector","Garbage collection skipped; disabled"),ac.resolve(Fh)):this.getCacheSize(t).next((n=>n<this.params.cacheSizeCollectionThreshold?(ba("LruGarbageCollector",`Garbage collection skipped; Cache size ${n} is lower than threshold ${this.params.cacheSizeCollectionThreshold}`),Fh):this.Rr(t,e)))}getCacheSize(t){return this.Er.getCacheSize(t)}Rr(t,e){let n,i,r,s,o,a,c;const l=Date.now();return this.calculateTargetCount(t,this.params.percentileToCollect).next((e=>(e>this.params.maximumSequenceNumbersToCollect?(ba("LruGarbageCollector",`Capping sequence numbers to collect down to the maximum of ${this.params.maximumSequenceNumbersToCollect} from ${e}`),i=this.params.maximumSequenceNumbersToCollect):i=e,s=Date.now(),this.nthSequenceNumber(t,i)))).next((i=>(n=i,o=Date.now(),this.removeTargets(t,n,e)))).next((e=>(r=e,a=Date.now(),this.removeOrphanedDocuments(t,n)))).next((t=>(c=Date.now(),va()<=Ms.DEBUG&&ba("LruGarbageCollector",`LRU Garbage Collection\n\tCounted targets in ${s-l}ms\n\tDetermined least recently used ${i} in `+(o-s)+`ms\n\tRemoved ${r} targets in `+(a-o)+`ms\n\tRemoved ${t} documents in `+(c-a)+`ms\nTotal Duration: ${c-l}ms`),ac.resolve({didRun:!0,sequenceNumbersCollected:i,targetsRemoved:r,documentsRemoved:t}))))}}
/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */
class Gh{constructor(){this.changes=new Kl((t=>t.toString()),((t,e)=>t.isEqual(e))),this.changesApplied=!1}addEntry(t){this.assertNotApplied(),this.changes.set(t.key,t)}removeEntry(t,e){this.assertNotApplied(),this.changes.set(t,al.newInvalidDocument(t).setReadTime(e))}getEntry(t,e){this.assertNotApplied();const n=this.changes.get(e);return void 0!==n?ac.resolve(n):this.getFromCache(t,e)}getEntries(t,e){return this.getAllFromCache(t,e)}apply(t){return this.assertNotApplied(),this.changesApplied=!0,this.applyChanges(t)}assertNotApplied(){}}
/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */
/**
 * @license
 * Copyright 2022 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class Wh{constructor(t,e){this.overlayedDocument=t,this.mutatedFields=e}}
/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class Qh{constructor(t,e,n,i){this.remoteDocumentCache=t,this.mutationQueue=e,this.documentOverlayCache=n,this.indexManager=i}getDocument(t,e){let n=null;return this.documentOverlayCache.getOverlay(t,e).next((i=>(n=i,this.remoteDocumentCache.getEntry(t,e)))).next((t=>(null!==n&&Tu(n.mutation,t,Ec.empty(),Wa.now()),t)))}getDocuments(t,e){return this.remoteDocumentCache.getEntries(t,e).next((e=>this.getLocalViewOfDocuments(t,e,iu()).next((()=>e))))}getLocalViewOfDocuments(t,e,n=iu()){const i=Jl();return this.populateOverlays(t,i,e).next((()=>this.computeViews(t,e,i,n).next((t=>{let e=Yl();return t.forEach(((t,n)=>{e=e.insert(t,n.overlayedDocument)})),e}))))}getOverlayedDocuments(t,e){const n=Jl();return this.populateOverlays(t,n,e).next((()=>this.computeViews(t,e,n,iu())))}populateOverlays(t,e,n){const i=[];return n.forEach((t=>{e.has(t)||i.push(t)})),this.documentOverlayCache.getOverlays(t,i).next((t=>{t.forEach(((t,n)=>{e.set(t,n)}))}))}computeViews(t,e,n,i){let r=Wl();const s=tu(),o=tu();return e.forEach(((t,e)=>{const o=n.get(e.key);i.has(e.key)&&(void 0===o||o.mutation instanceof Au)?r=r.insert(e.key,e):void 0!==o?(s.set(e.key,o.mutation.getFieldMask()),Tu(o.mutation,e,o.mutation.getFieldMask(),Wa.now())):s.set(e.key,Ec.empty())})),this.recalculateAndSaveOverlays(t,r).next((t=>(t.forEach(((t,e)=>s.set(t,e))),e.forEach(((t,e)=>{var n;return o.set(t,new Wh(e,null!==(n=s.get(t))&&void 0!==n?n:null))})),o)))}recalculateAndSaveOverlays(t,e){const n=tu();let i=new yc(((t,e)=>t-e)),r=iu();return this.mutationQueue.getAllMutationBatchesAffectingDocumentKeys(t,e).next((t=>{for(const r of t)r.keys().forEach((t=>{const s=e.get(t);if(null===s)return;let o=n.get(t)||Ec.empty();o=r.applyToLocalView(s,o),n.set(t,o);const a=(i.get(r.batchId)||iu()).add(t);i=i.insert(r.batchId,a)}))})).next((()=>{const s=[],o=i.getReverseIterator();for(;o.hasNext();){const i=o.getNext(),a=i.key,c=i.value,l=Zl();c.forEach((t=>{if(!r.has(t)){const i=Cu(e.get(t),n.get(t));null!==i&&l.set(t,i),r=r.add(t)}})),s.push(this.documentOverlayCache.saveOverlays(t,a,l))}return ac.waitFor(s)})).next((()=>n))}recalculateAndSaveOverlaysForDocumentKeys(t,e){return this.remoteDocumentCache.getEntries(t,e).next((e=>this.recalculateAndSaveOverlays(t,e)))}getDocumentsMatchingQuery(t,e,n,i){return r=e,ec.isDocumentKey(r.path)&&null===r.collectionGroup&&0===r.filters.length?this.getDocumentsMatchingDocumentQuery(t,e.path):function(t){return null!==t.collectionGroup}(e)?this.getDocumentsMatchingCollectionGroupQuery(t,e,n,i):this.getDocumentsMatchingCollectionQuery(t,e,n,i);var r}getNextDocuments(t,e,n,i){return this.remoteDocumentCache.getAllFromCollectionGroup(t,e,n,i).next((r=>{const s=i-r.size>0?this.documentOverlayCache.getOverlaysForCollectionGroup(t,e,n.largestBatchId,i-r.size):ac.resolve(Jl());let o=-1,a=r;return s.next((e=>ac.forEach(e,((e,n)=>(o<n.largestBatchId&&(o=n.largestBatchId),r.get(e)?ac.resolve():this.remoteDocumentCache.getEntry(t,e).next((t=>{a=a.insert(e,t)}))))).next((()=>this.populateOverlays(t,e,r))).next((()=>this.computeViews(t,a,e,iu()))).next((t=>({batchId:o,changes:Xl(t)})))))}))}getDocumentsMatchingDocumentQuery(t,e){return this.getDocument(t,new ec(e)).next((t=>{let e=Yl();return t.isFoundDocument()&&(e=e.insert(t.key,t)),e}))}getDocumentsMatchingCollectionGroupQuery(t,e,n,i){const r=e.collectionGroup;let s=Yl();return this.indexManager.getCollectionParents(t,r).next((o=>ac.forEach(o,(o=>{const a=(c=e,l=o.child(r),new Ml(l,null,c.explicitOrderBy.slice(),c.filters.slice(),c.limit,c.limitType,c.startAt,c.endAt));var c,l;return this.getDocumentsMatchingCollectionQuery(t,a,n,i).next((t=>{t.forEach(((t,e)=>{s=s.insert(t,e)}))}))})).next((()=>s))))}getDocumentsMatchingCollectionQuery(t,e,n,i){let r;return this.documentOverlayCache.getOverlaysForCollection(t,e.path,n.largestBatchId).next((s=>(r=s,this.remoteDocumentCache.getDocumentsMatchingQuery(t,e,n,r,i)))).next((t=>{r.forEach(((e,n)=>{const i=n.getKey();null===t.get(i)&&(t=t.insert(i,al.newInvalidDocument(i)))}));let n=Yl();return t.forEach(((t,i)=>{const s=r.get(t);void 0!==s&&Tu(s.mutation,i,Ec.empty(),Wa.now()),Hl(e,i)&&(n=n.insert(t,i))})),n}))}}
/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class Yh{constructor(t){this.serializer=t,this.Fr=new Map,this.Mr=new Map}getBundleMetadata(t,e){return ac.resolve(this.Fr.get(e))}saveBundleMetadata(t,e){return this.Fr.set(e.id,{id:(n=e).id,version:n.version,createTime:hh(n.createTime)}),ac.resolve();var n}getNamedQuery(t,e){return ac.resolve(this.Mr.get(e))}saveNamedQuery(t,e){return this.Mr.set(e.name,{name:(n=e).name,query:Rh(n.bundledQuery),readTime:hh(n.readTime)}),ac.resolve();var n}}
/**
 * @license
 * Copyright 2022 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class Xh{constructor(){this.overlays=new yc(ec.comparator),this.Or=new Map}getOverlay(t,e){return ac.resolve(this.overlays.get(e))}getOverlays(t,e){const n=Jl();return ac.forEach(e,(e=>this.getOverlay(t,e).next((t=>{null!==t&&n.set(e,t)})))).next((()=>n))}saveOverlays(t,e,n){return n.forEach(((n,i)=>{this.St(t,e,i)})),ac.resolve()}removeOverlaysForBatchId(t,e,n){const i=this.Or.get(n);return void 0!==i&&(i.forEach((t=>this.overlays=this.overlays.remove(t))),this.Or.delete(n)),ac.resolve()}getOverlaysForCollection(t,e,n){const i=Jl(),r=e.length+1,s=new ec(e.child("")),o=this.overlays.getIteratorFrom(s);for(;o.hasNext();){const t=o.getNext().value,s=t.getKey();if(!e.isPrefixOf(s.path))break;s.path.length===r&&t.largestBatchId>n&&i.set(t.getKey(),t)}return ac.resolve(i)}getOverlaysForCollectionGroup(t,e,n,i){let r=new yc(((t,e)=>t-e));const s=this.overlays.getIterator();for(;s.hasNext();){const t=s.getNext().value;if(t.getKey().getCollectionGroup()===e&&t.largestBatchId>n){let e=r.get(t.largestBatchId);null===e&&(e=Jl(),r=r.insert(t.largestBatchId,e)),e.set(t.getKey(),t)}}const o=Jl(),a=r.getIterator();for(;a.hasNext()&&(a.getNext().value.forEach(((t,e)=>o.set(t,e))),!(o.size()>=i)););return ac.resolve(o)}St(t,e,n){const i=this.overlays.get(n.key);if(null!==i){const t=this.Or.get(i.largestBatchId).delete(n.key);this.Or.set(i.largestBatchId,t)}this.overlays=this.overlays.insert(n.key,new Fu(e,n));let r=this.Or.get(e);void 0===r&&(r=iu(),this.Or.set(e,r)),this.Or.set(e,r.add(n.key))}}
/**
 * @license
 * Copyright 2024 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class Jh{constructor(){this.sessionToken=Cc.EMPTY_BYTE_STRING}getSessionToken(t){return ac.resolve(this.sessionToken)}setSessionToken(t,e){return this.sessionToken=e,ac.resolve()}}
/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class Zh{constructor(){this.Nr=new wc(td.Br),this.Lr=new wc(td.kr)}isEmpty(){return this.Nr.isEmpty()}addReference(t,e){const n=new td(t,e);this.Nr=this.Nr.add(n),this.Lr=this.Lr.add(n)}qr(t,e){t.forEach((t=>this.addReference(t,e)))}removeReference(t,e){this.Qr(new td(t,e))}$r(t,e){t.forEach((t=>this.removeReference(t,e)))}Ur(t){const e=new ec(new Ja([])),n=new td(e,t),i=new td(e,t+1),r=[];return this.Lr.forEachInRange([n,i],(t=>{this.Qr(t),r.push(t.key)})),r}Kr(){this.Nr.forEach((t=>this.Qr(t)))}Qr(t){this.Nr=this.Nr.delete(t),this.Lr=this.Lr.delete(t)}Wr(t){const e=new ec(new Ja([])),n=new td(e,t),i=new td(e,t+1);let r=iu();return this.Lr.forEachInRange([n,i],(t=>{r=r.add(t.key)})),r}containsKey(t){const e=new td(t,0),n=this.Nr.firstAfterOrEqual(e);return null!==n&&t.isEqual(n.key)}}class td{constructor(t,e){this.key=t,this.Gr=e}static Br(t,e){return ec.comparator(t.key,e.key)||Ua(t.Gr,e.Gr)}static kr(t,e){return Ua(t.Gr,e.Gr)||ec.comparator(t.key,e.key)}}
/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class ed{constructor(t,e){this.indexManager=t,this.referenceDelegate=e,this.mutationQueue=[],this.Jn=1,this.zr=new wc(td.Br)}checkEmpty(t){return ac.resolve(0===this.mutationQueue.length)}addMutationBatch(t,e,n,i){const r=this.Jn;this.Jn++,this.mutationQueue.length>0&&this.mutationQueue[this.mutationQueue.length-1];const s=new Pu(r,e,n,i);this.mutationQueue.push(s);for(const o of i)this.zr=this.zr.add(new td(o.key,r)),this.indexManager.addToCollectionParentIndex(t,o.key.path.popLast());return ac.resolve(s)}lookupMutationBatch(t,e){return ac.resolve(this.jr(e))}getNextMutationBatchAfterBatchId(t,e){const n=e+1,i=this.Hr(n),r=i<0?0:i;return ac.resolve(this.mutationQueue.length>r?this.mutationQueue[r]:null)}getHighestUnacknowledgedBatchId(){return ac.resolve(0===this.mutationQueue.length?-1:this.Jn-1)}getAllMutationBatches(t){return ac.resolve(this.mutationQueue.slice())}getAllMutationBatchesAffectingDocumentKey(t,e){const n=new td(e,0),i=new td(e,Number.POSITIVE_INFINITY),r=[];return this.zr.forEachInRange([n,i],(t=>{const e=this.jr(t.Gr);r.push(e)})),ac.resolve(r)}getAllMutationBatchesAffectingDocumentKeys(t,e){let n=new wc(Ua);return e.forEach((t=>{const e=new td(t,0),i=new td(t,Number.POSITIVE_INFINITY);this.zr.forEachInRange([e,i],(t=>{n=n.add(t.Gr)}))})),ac.resolve(this.Jr(n))}getAllMutationBatchesAffectingQuery(t,e){const n=e.path,i=n.length+1;let r=n;ec.isDocumentKey(r)||(r=r.child(""));const s=new td(new ec(r),0);let o=new wc(Ua);return this.zr.forEachWhile((t=>{const e=t.key.path;return!!n.isPrefixOf(e)&&(e.length===i&&(o=o.add(t.Gr)),!0)}),s),ac.resolve(this.Jr(o))}Jr(t){const e=[];return t.forEach((t=>{const n=this.jr(t);null!==n&&e.push(n)})),e}removeMutationBatch(t,e){xa(0===this.Yr(e.batchId,"removed"),55003),this.mutationQueue.shift();let n=this.zr;return ac.forEach(e.mutations,(i=>{const r=new td(i.key,e.batchId);return n=n.delete(r),this.referenceDelegate.markPotentiallyOrphaned(t,i.key)})).next((()=>{this.zr=n}))}Xn(t){}containsKey(t,e){const n=new td(e,0),i=this.zr.firstAfterOrEqual(n);return ac.resolve(e.isEqual(i&&i.key))}performConsistencyCheck(t){return this.mutationQueue.length,ac.resolve()}Yr(t,e){return this.Hr(t)}Hr(t){return 0===this.mutationQueue.length?0:t-this.mutationQueue[0].batchId}jr(t){const e=this.Hr(t);return e<0||e>=this.mutationQueue.length?null:this.mutationQueue[e]}}
/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class nd{constructor(t){this.Zr=t,this.docs=new yc(ec.comparator),this.size=0}setIndexManager(t){this.indexManager=t}addEntry(t,e){const n=e.key,i=this.docs.get(n),r=i?i.size:0,s=this.Zr(e);return this.docs=this.docs.insert(n,{document:e.mutableCopy(),size:s}),this.size+=s-r,this.indexManager.addToCollectionParentIndex(t,n.path.popLast())}removeEntry(t){const e=this.docs.get(t);e&&(this.docs=this.docs.remove(t),this.size-=e.size)}getEntry(t,e){const n=this.docs.get(e);return ac.resolve(n?n.document.mutableCopy():al.newInvalidDocument(e))}getEntries(t,e){let n=Wl();return e.forEach((t=>{const e=this.docs.get(t);n=n.insert(t,e?e.document.mutableCopy():al.newInvalidDocument(t))})),ac.resolve(n)}getDocumentsMatchingQuery(t,e,n,i){let r=Wl();const s=e.path,o=new ec(s.child("__id-9223372036854775808__")),a=this.docs.getIteratorFrom(o);for(;a.hasNext();){const{key:t,value:{document:o}}=a.getNext();if(!s.isPrefixOf(t.path))break;t.path.length>s.length+1||rc(nc(o),n)<=0||(i.has(o.key)||Hl(e,o))&&(r=r.insert(o.key,o.mutableCopy()))}return ac.resolve(r)}getAllFromCollectionGroup(t,e,n,i){ka(9500)}Xr(t,e){return ac.forEach(this.docs,(t=>e(t)))}newChangeBuffer(t){return new id(this)}getSize(t){return ac.resolve(this.size)}}class id extends Gh{constructor(t){super(),this.vr=t}applyChanges(t){const e=[];return this.changes.forEach(((n,i)=>{i.isValidDocument()?e.push(this.vr.addEntry(t,i)):this.vr.removeEntry(n)})),ac.waitFor(e)}getFromCache(t,e){return this.vr.getEntry(t,e)}getAllFromCache(t,e){return this.vr.getEntries(t,e)}}
/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class rd{constructor(t){this.persistence=t,this.ei=new Kl((t=>Ll(t)),Ol),this.lastRemoteSnapshotVersion=Qa.min(),this.highestTargetId=0,this.ti=0,this.ni=new Zh,this.targetCount=0,this.ri=Uh.rr()}forEachTarget(t,e){return this.ei.forEach(((t,n)=>e(n))),ac.resolve()}getLastRemoteSnapshotVersion(t){return ac.resolve(this.lastRemoteSnapshotVersion)}getHighestSequenceNumber(t){return ac.resolve(this.ti)}allocateTargetId(t){return this.highestTargetId=this.ri.next(),ac.resolve(this.highestTargetId)}setTargetsMetadata(t,e,n){return n&&(this.lastRemoteSnapshotVersion=n),e>this.ti&&(this.ti=e),ac.resolve()}ar(t){this.ei.set(t.target,t);const e=t.targetId;e>this.highestTargetId&&(this.ri=new Uh(e),this.highestTargetId=e),t.sequenceNumber>this.ti&&(this.ti=t.sequenceNumber)}addTargetData(t,e){return this.ar(e),this.targetCount+=1,ac.resolve()}updateTargetData(t,e){return this.ar(e),ac.resolve()}removeTargetData(t,e){return this.ei.delete(e.target),this.ni.Ur(e.targetId),this.targetCount-=1,ac.resolve()}removeTargets(t,e,n){let i=0;const r=[];return this.ei.forEach(((s,o)=>{o.sequenceNumber<=e&&null===n.get(o.targetId)&&(this.ei.delete(s),r.push(this.removeMatchingKeysForTargetId(t,o.targetId)),i++)})),ac.waitFor(r).next((()=>i))}getTargetCount(t){return ac.resolve(this.targetCount)}getTargetData(t,e){const n=this.ei.get(e)||null;return ac.resolve(n)}addMatchingKeys(t,e,n){return this.ni.qr(e,n),ac.resolve()}removeMatchingKeys(t,e,n){this.ni.$r(e,n);const i=this.persistence.referenceDelegate,r=[];return i&&e.forEach((e=>{r.push(i.markPotentiallyOrphaned(t,e))})),ac.waitFor(r)}removeMatchingKeysForTargetId(t,e){return this.ni.Ur(e),ac.resolve()}getMatchingKeysForTargetId(t,e){const n=this.ni.Wr(e);return ac.resolve(n)}containsKey(t,e){return ac.resolve(this.ni.containsKey(e))}}
/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class sd{constructor(t,e){this.ii={},this.overlays={},this.si=new lc(0),this.oi=!1,this.oi=!0,this._i=new Jh,this.referenceDelegate=t(this),this.ai=new rd(this),this.indexManager=new Ph,this.remoteDocumentCache=new nd((t=>this.referenceDelegate.ui(t))),this.serializer=new Mh(e),this.ci=new Yh(this.serializer)}start(){return Promise.resolve()}shutdown(){return this.oi=!1,Promise.resolve()}get started(){return this.oi}setDatabaseDeletedListener(){}setNetworkEnabled(){}getIndexManager(t){return this.indexManager}getDocumentOverlayCache(t){let e=this.overlays[t.toKey()];return e||(e=new Xh,this.overlays[t.toKey()]=e),e}getMutationQueue(t,e){let n=this.ii[t.toKey()];return n||(n=new ed(e,this.referenceDelegate),this.ii[t.toKey()]=n),n}getGlobalsCache(){return this._i}getTargetCache(){return this.ai}getRemoteDocumentCache(){return this.remoteDocumentCache}getBundleCache(){return this.ci}runTransaction(t,e,n){ba("MemoryPersistence","Starting transaction:",t);const i=new od(this.si.next());return this.referenceDelegate.li(),n(i).next((t=>this.referenceDelegate.hi(i).next((()=>t)))).toPromise().then((t=>(i.raiseOnCommittedEvent(),t)))}Pi(t,e){return ac.or(Object.values(this.ii).map((n=>()=>n.containsKey(t,e))))}}class od extends sc{constructor(t){super(),this.currentSequenceNumber=t}}class ad{constructor(t){this.persistence=t,this.Ti=new Zh,this.Ii=null}static Ei(t){return new ad(t)}get di(){if(this.Ii)return this.Ii;throw ka(60996)}addReference(t,e,n){return this.Ti.addReference(n,e),this.di.delete(n.toString()),ac.resolve()}removeReference(t,e,n){return this.Ti.removeReference(n,e),this.di.add(n.toString()),ac.resolve()}markPotentiallyOrphaned(t,e){return this.di.add(e.toString()),ac.resolve()}removeTarget(t,e){this.Ti.Ur(e.targetId).forEach((t=>this.di.add(t.toString())));const n=this.persistence.getTargetCache();return n.getMatchingKeysForTargetId(t,e.targetId).next((t=>{t.forEach((t=>this.di.add(t.toString())))})).next((()=>n.removeTargetData(t,e)))}li(){this.Ii=new Set}hi(t){const e=this.persistence.getRemoteDocumentCache().newChangeBuffer();return ac.forEach(this.di,(n=>{const i=ec.fromPath(n);return this.Ai(t,i).next((t=>{t||e.removeEntry(i,Qa.min())}))})).next((()=>(this.Ii=null,e.apply(t))))}updateLimboDocument(t,e){return this.Ai(t,e).next((t=>{t?this.di.delete(e.toString()):this.di.add(e.toString())}))}ui(t){return 0}Ai(t,e){return ac.or([()=>ac.resolve(this.Ti.containsKey(e)),()=>this.persistence.getTargetCache().containsKey(t,e),()=>this.persistence.Pi(t,e)])}}class cd{constructor(t,e){this.persistence=t,this.Ri=new Kl((t=>function(t){let e="";for(let n=0;n<t.length;n++)e.length>0&&(e=fc(e)),e=dc(t.get(n),e);return fc(e)}(t.path)),((t,e)=>t.isEqual(e))),this.garbageCollector=function(t,e){return new Kh(t,e)}(this,e)}static Ei(t,e){return new cd(t,e)}li(){}hi(t){return ac.resolve()}forEachTarget(t,e){return this.persistence.getTargetCache().forEachTarget(t,e)}dr(t){const e=this.Vr(t);return this.persistence.getTargetCache().getTargetCount(t).next((t=>e.next((e=>t+e))))}Vr(t){let e=0;return this.Ar(t,(t=>{e++})).next((()=>e))}Ar(t,e){return ac.forEach(this.Ri,((n,i)=>this.gr(t,n,i).next((t=>t?ac.resolve():e(i)))))}removeTargets(t,e,n){return this.persistence.getTargetCache().removeTargets(t,e,n)}removeOrphanedDocuments(t,e){let n=0;const i=this.persistence.getRemoteDocumentCache(),r=i.newChangeBuffer();return i.Xr(t,(i=>this.gr(t,i,e).next((t=>{t||(n++,r.removeEntry(i,Qa.min()))})))).next((()=>r.apply(t))).next((()=>n))}markPotentiallyOrphaned(t,e){return this.Ri.set(e,t.currentSequenceNumber),ac.resolve()}removeTarget(t,e){const n=e.withSequenceNumber(t.currentSequenceNumber);return this.persistence.getTargetCache().updateTargetData(t,n)}addReference(t,e,n){return this.Ri.set(n,t.currentSequenceNumber),ac.resolve()}removeReference(t,e,n){return this.Ri.set(n,t.currentSequenceNumber),ac.resolve()}updateLimboDocument(t,e){return this.Ri.set(e,t.currentSequenceNumber),ac.resolve()}ui(t){let e=t.key.toString().length;return t.isFoundDocument()&&(e+=Jc(t.data.value)),e}gr(t,e,n){return ac.or([()=>this.persistence.Pi(t,e),()=>this.persistence.getTargetCache().containsKey(t,e),()=>{const t=this.Ri.get(e);return ac.resolve(void 0!==t&&t>n)}])}getCacheSize(t){return this.persistence.getRemoteDocumentCache().getSize(t)}}
/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class ld{constructor(t,e,n,i){this.targetId=t,this.fromCache=e,this.ls=n,this.hs=i}static Ps(t,e){let n=iu(),i=iu();for(const r of e.docChanges)switch(r.type){case 0:n=n.add(r.doc.key);break;case 1:i=i.add(r.doc.key)}return new ld(t,e.fromCache,n,i)}}
/**
 * @license
 * Copyright 2023 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class ud{constructor(){this._documentReadCount=0}get documentReadCount(){return this._documentReadCount}incrementDocumentReadCount(t){this._documentReadCount+=t}}
/**
 * @license
 * Copyright 2019 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class hd{constructor(){this.Ts=!1,this.Is=!1,this.Es=100,this.ds=ks()?8:function(t){const e=t.match(/Android ([\d.]+)/i),n=e?e[1].split(".").slice(0,2).join("."):"-1";return Number(n)}("undefined"!=typeof navigator&&"string"==typeof navigator.userAgent?navigator.userAgent:"")>0?6:4}initialize(t,e){this.As=t,this.indexManager=e,this.Ts=!0}getDocumentsMatchingQuery(t,e,n,i){const r={result:null};return this.Rs(t,e).next((t=>{r.result=t})).next((()=>{if(!r.result)return this.Vs(t,e,i,n).next((t=>{r.result=t}))})).next((()=>{if(r.result)return;const n=new ud;return this.fs(t,e,n).next((i=>{if(r.result=i,this.Is)return this.gs(t,e,n,i.size)}))})).next((()=>r.result))}gs(t,e,n,i){return n.documentReadCount<this.Es?(va()<=Ms.DEBUG&&ba("QueryEngine","SDK will not create cache indexes for query:",ql(e),"since it only creates cache indexes for collection contains","more than or equal to",this.Es,"documents"),ac.resolve()):(va()<=Ms.DEBUG&&ba("QueryEngine","Query:",ql(e),"scans",n.documentReadCount,"local documents and returns",i,"documents as results."),n.documentReadCount>this.ds*i?(va()<=Ms.DEBUG&&ba("QueryEngine","The SDK decides to create cache indexes for query:",ql(e),"as using cache indexes may help improve performance."),this.indexManager.createTargetIndexes(t,Fl(e))):ac.resolve())}Rs(t,e){if(Pl(e))return ac.resolve(null);let n=Fl(e);return this.indexManager.getIndexType(t,n).next((i=>0===i?null:(null!==e.limit&&1===i&&(e=Bl(e,null,"F"),n=Fl(e)),this.indexManager.getDocumentsMatchingTarget(t,n).next((i=>{const r=iu(...i);return this.As.getDocuments(t,r).next((i=>this.indexManager.getMinOffset(t,n).next((n=>{const s=this.ps(e,i);return this.ys(e,s,r,n.readTime)?this.Rs(t,Bl(e,null,"F")):this.ws(t,s,e,n)}))))})))))}Vs(t,e,n,i){return Pl(e)||i.isEqual(Qa.min())?ac.resolve(null):this.As.getDocuments(t,n).next((r=>{const s=this.ps(e,r);return this.ys(e,s,n,i)?ac.resolve(null):(va()<=Ms.DEBUG&&ba("QueryEngine","Re-using previous result from %s to execute query: %s",i.toString(),ql(e)),this.ws(t,s,e,function(t,e){const n=t.toTimestamp().seconds,i=t.toTimestamp().nanoseconds+1,r=Qa.fromTimestamp(1e9===i?new Wa(n+1,0):new Wa(n,i));return new ic(r,ec.empty(),e)}(i,-1)).next((t=>t)))}))}ps(t,e){let n=new wc(zl(t));return e.forEach(((e,i)=>{Hl(t,i)&&(n=n.add(i))})),n}ys(t,e,n,i){if(null===t.limit)return!1;if(n.size!==e.size)return!0;const r="F"===t.limitType?e.last():e.first();return!!r&&(r.hasPendingWrites||r.version.compareTo(i)>0)}fs(t,e,n){return va()<=Ms.DEBUG&&ba("QueryEngine","Using full collection scan to execute query:",ql(e)),this.As.getDocumentsMatchingQuery(t,e,ic.min(),n)}ws(t,e,n,i){return this.As.getDocumentsMatchingQuery(t,n,i).next((t=>(e.forEach((e=>{t=t.insert(e.key,e)})),t)))}}
/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const dd="LocalStore";class fd{constructor(t,e,n,i){this.persistence=t,this.bs=e,this.serializer=i,this.Ss=new yc(Ua),this.Ds=new Kl((t=>Ll(t)),Ol),this.vs=new Map,this.Cs=t.getRemoteDocumentCache(),this.ai=t.getTargetCache(),this.ci=t.getBundleCache(),this.Fs(n)}Fs(t){this.documentOverlayCache=this.persistence.getDocumentOverlayCache(t),this.indexManager=this.persistence.getIndexManager(t),this.mutationQueue=this.persistence.getMutationQueue(t,this.indexManager),this.localDocuments=new Qh(this.Cs,this.mutationQueue,this.documentOverlayCache,this.indexManager),this.Cs.setIndexManager(this.indexManager),this.bs.initialize(this.localDocuments,this.indexManager)}collectGarbage(t){return this.persistence.runTransaction("Collect garbage","readwrite-primary",(e=>t.collect(e,this.Ss)))}}async function pd(t,e){const n=Ta(t);return await n.persistence.runTransaction("Handle user change","readonly",(t=>{let i;return n.mutationQueue.getAllMutationBatches(t).next((r=>(i=r,n.Fs(e),n.mutationQueue.getAllMutationBatches(t)))).next((e=>{const r=[],s=[];let o=iu();for(const t of i){r.push(t.batchId);for(const e of t.mutations)o=o.add(e.key)}for(const t of e){s.push(t.batchId);for(const e of t.mutations)o=o.add(e.key)}return n.localDocuments.getDocuments(t,o).next((t=>({Ms:t,removedBatchIds:r,addedBatchIds:s})))}))}))}function gd(t){const e=Ta(t);return e.persistence.runTransaction("Get last remote snapshot version","readonly",(t=>e.ai.getLastRemoteSnapshotVersion(t)))}function md(t,e){const n=Ta(t),i=e.snapshotVersion;let r=n.Ss;return n.persistence.runTransaction("Apply remote event","readwrite-primary",(t=>{const s=n.Cs.newChangeBuffer({trackRemovals:!0});r=n.Ss;const o=[];e.targetChanges.forEach(((s,a)=>{const c=r.get(a);if(!c)return;o.push(n.ai.removeMatchingKeys(t,s.removedDocuments,a).next((()=>n.ai.addMatchingKeys(t,s.addedDocuments,a))));let l=c.withSequenceNumber(t.currentSequenceNumber);null!==e.targetMismatches.get(a)?l=l.withResumeToken(Cc.EMPTY_BYTE_STRING,Qa.min()).withLastLimboFreeSnapshotVersion(Qa.min()):s.resumeToken.approximateByteSize()>0&&(l=l.withResumeToken(s.resumeToken,i)),r=r.insert(a,l),function(t,e,n){if(0===t.resumeToken.approximateByteSize())return!0;if(e.snapshotVersion.toMicroseconds()-t.snapshotVersion.toMicroseconds()>=3e8)return!0;return n.addedDocuments.size+n.modifiedDocuments.size+n.removedDocuments.size>0}(c,l,s)&&o.push(n.ai.updateTargetData(t,l))}));let a=Wl(),c=iu();if(e.documentUpdates.forEach((i=>{e.resolvedLimboDocuments.has(i)&&o.push(n.persistence.referenceDelegate.updateLimboDocument(t,i))})),o.push(function(t,e,n){let i=iu(),r=iu();return n.forEach((t=>i=i.add(t))),e.getEntries(t,i).next((t=>{let i=Wl();return n.forEach(((n,s)=>{const o=t.get(n);s.isFoundDocument()!==o.isFoundDocument()&&(r=r.add(n)),s.isNoDocument()&&s.version.isEqual(Qa.min())?(e.removeEntry(n,s.readTime),i=i.insert(n,s)):!o.isValidDocument()||s.version.compareTo(o.version)>0||0===s.version.compareTo(o.version)&&o.hasPendingWrites?(e.addEntry(s),i=i.insert(n,s)):ba(dd,"Ignoring outdated watch update for ",n,". Current version:",o.version," Watch version:",s.version)})),{xs:i,Os:r}}))}(t,s,e.documentUpdates).next((t=>{a=t.xs,c=t.Os}))),!i.isEqual(Qa.min())){const e=n.ai.getLastRemoteSnapshotVersion(t).next((e=>n.ai.setTargetsMetadata(t,t.currentSequenceNumber,i)));o.push(e)}return ac.waitFor(o).next((()=>s.apply(t))).next((()=>n.localDocuments.getLocalViewOfDocuments(t,a,c))).next((()=>a))})).then((t=>(n.Ss=r,t)))}function yd(t,e){const n=Ta(t);return n.persistence.runTransaction("Get next mutation batch","readonly",(t=>(void 0===e&&(e=-1),n.mutationQueue.getNextMutationBatchAfterBatchId(t,e))))}async function vd(t,e,n){const i=Ta(t),r=i.Ss.get(e),s=n?"readwrite":"readwrite-primary";try{n||await i.persistence.runTransaction("Release target",s,(t=>i.persistence.referenceDelegate.removeTarget(t,r)))}catch(o){if(!cc(o))throw o;ba(dd,`Failed to update sequence numbers for target ${e}: ${o}`)}i.Ss=i.Ss.remove(e),i.Ds.delete(r.target)}function bd(t,e,n){const i=Ta(t);let r=Qa.min(),s=iu();return i.persistence.runTransaction("Execute query","readwrite",(t=>function(t,e,n){const i=Ta(t),r=i.Ds.get(n);return void 0!==r?ac.resolve(i.Ss.get(r)):i.ai.getTargetData(e,n)}(i,t,Fl(e)).next((e=>{if(e)return r=e.lastLimboFreeSnapshotVersion,i.ai.getMatchingKeysForTargetId(t,e.targetId).next((t=>{s=t}))})).next((()=>i.bs.getDocumentsMatchingQuery(t,e,n?r:Qa.min(),n?s:iu()))).next((t=>(function(t,e,n){let i=t.vs.get(e)||Qa.min();n.forEach(((t,e)=>{e.readTime.compareTo(i)>0&&(i=e.readTime)})),t.vs.set(e,i)}(i,function(t){return t.collectionGroup||(t.path.length%2==1?t.path.lastSegment():t.path.get(t.path.length-2))}(e),t),{documents:t,Ns:s})))))}class wd{constructor(){this.activeTargetIds=ru}$s(t){this.activeTargetIds=this.activeTargetIds.add(t)}Us(t){this.activeTargetIds=this.activeTargetIds.delete(t)}Qs(){const t={activeTargetIds:this.activeTargetIds.toArray(),updateTimeMs:Date.now()};return JSON.stringify(t)}}class _d{constructor(){this.So=new wd,this.Do={},this.onlineStateHandler=null,this.sequenceNumberHandler=null}addPendingMutation(t){}updateMutationState(t,e,n){}addLocalQueryTarget(t,e=!0){return e&&this.So.$s(t),this.Do[t]||"not-current"}updateQueryState(t,e,n){this.Do[t]=e}removeLocalQueryTarget(t){this.So.Us(t)}isLocalQueryTarget(t){return this.So.activeTargetIds.has(t)}clearQueryState(t){delete this.Do[t]}getAllActiveQueryTargets(){return this.So.activeTargetIds}isActiveQueryTarget(t){return this.So.activeTargetIds.has(t)}start(){return this.So=new wd,Promise.resolve()}handleUserChange(t,e,n){}setOnlineState(t){}shutdown(){}writeSequenceNumber(t){}notifyBundleLoaded(t){}}
/**
 * @license
 * Copyright 2019 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class Ed{vo(t){}shutdown(){}}
/**
 * @license
 * Copyright 2019 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const kd="ConnectivityMonitor";class Cd{constructor(){this.Co=()=>this.Fo(),this.Mo=()=>this.xo(),this.Oo=[],this.No()}vo(t){this.Oo.push(t)}shutdown(){window.removeEventListener("online",this.Co),window.removeEventListener("offline",this.Mo)}No(){window.addEventListener("online",this.Co),window.addEventListener("offline",this.Mo)}Fo(){ba(kd,"Network connectivity changed: AVAILABLE");for(const t of this.Oo)t(0)}xo(){ba(kd,"Network connectivity changed: UNAVAILABLE");for(const t of this.Oo)t(1)}static C(){return"undefined"!=typeof window&&void 0!==window.addEventListener&&void 0!==window.removeEventListener}}
/**
 * @license
 * Copyright 2023 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */let xd=null;function Td(){return null===xd?xd=268435456+Math.round(2147483648*Math.random()):xd++,"0x"+xd.toString(16)
/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */}const Sd="RestConnection",Id={BatchGetDocuments:"batchGet",Commit:"commit",RunQuery:"runQuery",RunAggregationQuery:"runAggregationQuery"};class Dd{get Bo(){return!1}constructor(t){this.databaseInfo=t,this.databaseId=t.databaseId;const e=t.ssl?"https":"http",n=encodeURIComponent(this.databaseId.projectId),i=encodeURIComponent(this.databaseId.database);this.Lo=e+"://"+t.host,this.ko=`projects/${n}/databases/${i}`,this.qo=this.databaseId.database===Vc?`project_id=${n}`:`project_id=${n}&database_id=${i}`}Qo(t,e,n,i,r){const s=Td(),o=this.$o(t,e.toUriEncodedString());ba(Sd,`Sending RPC '${t}' ${s}:`,o,n);const a={"google-cloud-resource-prefix":this.ko,"x-goog-request-params":this.qo};return this.Uo(a,i,r),this.Ko(t,o,a,n).then((e=>(ba(Sd,`Received RPC '${t}' ${s}: `,e),e)),(e=>{throw _a(Sd,`RPC '${t}' ${s} failed with error: `,e,"url: ",o,"request:",n),e}))}Wo(t,e,n,i,r,s){return this.Qo(t,e,n,i,r)}Uo(t,e,n){t["X-Goog-Api-Client"]="gl-js/ fire/"+ma,t["Content-Type"]="text/plain",this.databaseInfo.appId&&(t["X-Firebase-GMPID"]=this.databaseInfo.appId),e&&e.headers.forEach(((e,n)=>t[n]=e)),n&&n.headers.forEach(((e,n)=>t[n]=e))}$o(t,e){const n=Id[t];return`${this.Lo}/v1/${e}:${n}`}terminate(){}}
/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class Ad{constructor(t){this.Go=t.Go,this.zo=t.zo}jo(t){this.Ho=t}Jo(t){this.Yo=t}Zo(t){this.Xo=t}onMessage(t){this.e_=t}close(){this.zo()}send(t){this.Go(t)}t_(){this.Ho()}n_(){this.Yo()}r_(t){this.Xo(t)}i_(t){this.e_(t)}}
/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const Ld="WebChannelConnection";class Od extends Dd{constructor(t){super(t),this.forceLongPolling=t.forceLongPolling,this.autoDetectLongPolling=t.autoDetectLongPolling,this.useFetchStreams=t.useFetchStreams,this.longPollingOptions=t.longPollingOptions}Ko(t,e,n,i){const r=Td();return new Promise(((s,o)=>{const a=new ra;a.setWithCredentials(!0),a.listenOnce(oa.COMPLETE,(()=>{try{switch(a.getLastErrorCode()){case aa.NO_ERROR:const e=a.getResponseJson();ba(Ld,`XHR for RPC '${t}' ${r} received:`,JSON.stringify(e)),s(e);break;case aa.TIMEOUT:ba(Ld,`RPC '${t}' ${r} timed out`),o(new Ia(Sa.DEADLINE_EXCEEDED,"Request time out"));break;case aa.HTTP_ERROR:const n=a.getStatus();if(ba(Ld,`RPC '${t}' ${r} failed with status:`,n,"response text:",a.getResponseText()),n>0){let t=a.getResponseJson();Array.isArray(t)&&(t=t[0]);const e=null==t?void 0:t.error;if(e&&e.status&&e.message){const t=function(t){const e=t.toLowerCase().replace(/_/g,"-");return Object.values(Sa).indexOf(e)>=0?e:Sa.UNKNOWN}(e.status);o(new Ia(t,e.message))}else o(new Ia(Sa.UNKNOWN,"Server responded with status "+a.getStatus()))}else o(new Ia(Sa.UNAVAILABLE,"Connection failed."));break;default:ka(9055,{s_:t,streamId:r,o_:a.getLastErrorCode(),__:a.getLastError()})}}finally{ba(Ld,`RPC '${t}' ${r} completed.`)}}));const c=JSON.stringify(i);ba(Ld,`RPC '${t}' ${r} sending request:`,i),a.send(e,"POST",c,n,15)}))}a_(t,e,n){const i=Td(),r=[this.Lo,"/","google.firestore.v1.Firestore","/",t,"/channel"],s=ha(),o=ua(),a={httpSessionIdParam:"gsessionid",initMessageHeaders:{},messageUrlParams:{database:`projects/${this.databaseId.projectId}/databases/${this.databaseId.database}`},sendRawJson:!0,supportsCrossDomainXhr:!0,internalChannelParams:{forwardChannelRequestTimeoutMs:6e5},forceLongPolling:this.forceLongPolling,detectBufferingProxy:this.autoDetectLongPolling},c=this.longPollingOptions.timeoutSeconds;void 0!==c&&(a.longPollingTimeout=Math.round(1e3*c)),this.useFetchStreams&&(a.useFetchStreams=!0),this.Uo(a.initMessageHeaders,e,n),a.encodeInitMessageHeaders=!0;const l=r.join("");ba(Ld,`Creating RPC '${t}' stream ${i}: ${l}`,a);const u=s.createWebChannel(l,a);let h=!1,d=!1;const f=new Ad({Go:e=>{d?ba(Ld,`Not sending because RPC '${t}' stream ${i} is closed:`,e):(h||(ba(Ld,`Opening RPC '${t}' stream ${i} transport.`),u.open(),h=!0),ba(Ld,`RPC '${t}' stream ${i} sending:`,e),u.send(e))},zo:()=>u.close()}),p=(t,e,n)=>{t.listen(e,(t=>{try{n(t)}catch(e){setTimeout((()=>{throw e}),0)}}))};return p(u,sa.EventType.OPEN,(()=>{d||(ba(Ld,`RPC '${t}' stream ${i} transport opened.`),f.t_())})),p(u,sa.EventType.CLOSE,(()=>{d||(d=!0,ba(Ld,`RPC '${t}' stream ${i} transport closed`),f.r_())})),p(u,sa.EventType.ERROR,(e=>{d||(d=!0,_a(Ld,`RPC '${t}' stream ${i} transport errored. Name:`,e.name,"Message:",e.message),f.r_(new Ia(Sa.UNAVAILABLE,"The operation could not be completed")))})),p(u,sa.EventType.MESSAGE,(e=>{var n;if(!d){const r=e.data[0];xa(!!r,16349);const s=r,o=(null==s?void 0:s.error)||(null===(n=s[0])||void 0===n?void 0:n.error);if(o){ba(Ld,`RPC '${t}' stream ${i} received error:`,o);const e=o.status;let n=function(t){const e=ju[t];if(void 0!==e)return qu(e)}(e),r=o.message;void 0===n&&(n=Sa.INTERNAL,r="Unknown error status: "+e+" with message "+o.message),d=!0,f.r_(new Ia(n,r)),u.close()}else ba(Ld,`RPC '${t}' stream ${i} received:`,r),f.i_(r)}})),p(o,la.STAT_EVENT,(e=>{e.stat===ca.PROXY?ba(Ld,`RPC '${t}' stream ${i} detected buffering proxy`):e.stat===ca.NOPROXY&&ba(Ld,`RPC '${t}' stream ${i} detected no buffering proxy`)})),setTimeout((()=>{f.n_()}),0),f}}function Nd(){return"undefined"!=typeof document?document:null}
/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function Md(t){return new oh(t,!0)}
/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class Rd{constructor(t,e,n=1e3,i=1.5,r=6e4){this.bi=t,this.timerId=e,this.u_=n,this.c_=i,this.l_=r,this.h_=0,this.P_=null,this.T_=Date.now(),this.reset()}reset(){this.h_=0}I_(){this.h_=this.l_}E_(t){this.cancel();const e=Math.floor(this.h_+this.d_()),n=Math.max(0,Date.now()-this.T_),i=Math.max(0,e-n);i>0&&ba("ExponentialBackoff",`Backing off for ${i} ms (base delay: ${this.h_} ms, delay with jitter: ${e} ms, last attempt: ${n} ms ago)`),this.P_=this.bi.enqueueAfterDelay(this.timerId,i,(()=>(this.T_=Date.now(),t()))),this.h_*=this.c_,this.h_<this.u_&&(this.h_=this.u_),this.h_>this.l_&&(this.h_=this.l_)}A_(){null!==this.P_&&(this.P_.skipDelay(),this.P_=null)}cancel(){null!==this.P_&&(this.P_.cancel(),this.P_=null)}d_(){return(Math.random()-.5)*this.h_}}
/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const Pd="PersistentStream";class Vd{constructor(t,e,n,i,r,s,o,a){this.bi=t,this.R_=n,this.V_=i,this.connection=r,this.authCredentialsProvider=s,this.appCheckCredentialsProvider=o,this.listener=a,this.state=0,this.m_=0,this.f_=null,this.g_=null,this.stream=null,this.p_=0,this.y_=new Rd(t,e)}w_(){return 1===this.state||5===this.state||this.b_()}b_(){return 2===this.state||3===this.state}start(){this.p_=0,4!==this.state?this.auth():this.S_()}async stop(){this.w_()&&await this.close(0)}D_(){this.state=0,this.y_.reset()}v_(){this.b_()&&null===this.f_&&(this.f_=this.bi.enqueueAfterDelay(this.R_,6e4,(()=>this.C_())))}F_(t){this.M_(),this.stream.send(t)}async C_(){if(this.b_())return this.close(0)}M_(){this.f_&&(this.f_.cancel(),this.f_=null)}x_(){this.g_&&(this.g_.cancel(),this.g_=null)}async close(t,e){this.M_(),this.x_(),this.y_.cancel(),this.m_++,4!==t?this.y_.reset():e&&e.code===Sa.RESOURCE_EXHAUSTED?(wa(e.toString()),wa("Using maximum backoff delay to prevent overloading the backend."),this.y_.I_()):e&&e.code===Sa.UNAUTHENTICATED&&3!==this.state&&(this.authCredentialsProvider.invalidateToken(),this.appCheckCredentialsProvider.invalidateToken()),null!==this.stream&&(this.O_(),this.stream.close(),this.stream=null),this.state=t,await this.listener.Zo(e)}O_(){}auth(){this.state=1;const t=this.N_(this.m_),e=this.m_;Promise.all([this.authCredentialsProvider.getToken(),this.appCheckCredentialsProvider.getToken()]).then((([t,n])=>{this.m_===e&&this.B_(t,n)}),(e=>{t((()=>{const t=new Ia(Sa.UNKNOWN,"Fetching auth token failed: "+e.message);return this.L_(t)}))}))}B_(t,e){const n=this.N_(this.m_);this.stream=this.k_(t,e),this.stream.jo((()=>{n((()=>this.listener.jo()))})),this.stream.Jo((()=>{n((()=>(this.state=2,this.g_=this.bi.enqueueAfterDelay(this.V_,1e4,(()=>(this.b_()&&(this.state=3),Promise.resolve()))),this.listener.Jo())))})),this.stream.Zo((t=>{n((()=>this.L_(t)))})),this.stream.onMessage((t=>{n((()=>1==++this.p_?this.q_(t):this.onNext(t)))}))}S_(){this.state=5,this.y_.E_((async()=>{this.state=0,this.start()}))}L_(t){return ba(Pd,`close with error: ${t}`),this.stream=null,this.close(4,t)}N_(t){return e=>{this.bi.enqueueAndForget((()=>this.m_===t?e():(ba(Pd,"stream callback skipped by getCloseGuardedDispatcher."),Promise.resolve())))}}}class Fd extends Vd{constructor(t,e,n,i,r,s){super(t,"listen_stream_connection_backoff","listen_stream_idle","health_check_timeout",e,n,i,s),this.serializer=r}k_(t,e){return this.connection.a_("Listen",t,e)}q_(t){return this.onNext(t)}onNext(t){this.y_.reset();const e=function(t,e){let n;if("targetChange"in e){e.targetChange;const r="NO_CHANGE"===(i=e.targetChange.targetChangeType||"NO_CHANGE")?0:"ADD"===i?1:"REMOVE"===i?2:"CURRENT"===i?3:"RESET"===i?4:ka(39313,{state:i}),s=e.targetChange.targetIds||[],o=function(t,e){return t.useProto3Json?(xa(void 0===e||"string"==typeof e,58123),Cc.fromBase64String(e||"")):(xa(void 0===e||e instanceof Buffer||e instanceof Uint8Array,16193),Cc.fromUint8Array(e||new Uint8Array))}(t,e.targetChange.resumeToken),a=e.targetChange.cause,c=a&&function(t){const e=void 0===t.code?Sa.UNKNOWN:qu(t.code);return new Ia(e,t.message||"")}(a);n=new Ju(r,s,o,c||null)}else if("documentChange"in e){e.documentChange;const i=e.documentChange;i.document,i.document.name,i.document.updateTime;const r=mh(t,i.document.name),s=hh(i.document.updateTime),o=i.document.createTime?hh(i.document.createTime):Qa.min(),a=new sl({mapValue:{fields:i.document.fields}}),c=al.newFoundDocument(r,s,o,a),l=i.targetIds||[],u=i.removedTargetIds||[];n=new Yu(l,u,c.key,c)}else if("documentDelete"in e){e.documentDelete;const i=e.documentDelete;i.document;const r=mh(t,i.document),s=i.readTime?hh(i.readTime):Qa.min(),o=al.newNoDocument(r,s),a=i.removedTargetIds||[];n=new Yu([],a,o.key,o)}else if("documentRemove"in e){e.documentRemove;const i=e.documentRemove;i.document;const r=mh(t,i.document),s=i.removedTargetIds||[];n=new Yu([],s,r,null)}else{if(!("filter"in e))return ka(11601,{Vt:e});{e.filter;const t=e.filter;t.targetId;const{count:i=0,unchangedNames:r}=t,s=new Bu(i,r),o=t.targetId;n=new Xu(o,s)}}var i;return n}(this.serializer,t),n=function(t){if(!("targetChange"in t))return Qa.min();const e=t.targetChange;return e.targetIds&&e.targetIds.length?Qa.min():e.readTime?hh(e.readTime):Qa.min()}(t);return this.listener.Q_(e,n)}U_(t){const e={};e.database=vh(this.serializer),e.addTarget=function(t,e){let n;const i=e.target;if(n=Nl(i)?{documents:_h(t,i)}:{query:Eh(t,i).gt},n.targetId=e.targetId,e.resumeToken.approximateByteSize()>0){n.resumeToken=lh(t,e.resumeToken);const i=ah(t,e.expectedCount);null!==i&&(n.expectedCount=i)}else if(e.snapshotVersion.compareTo(Qa.min())>0){n.readTime=ch(t,e.snapshotVersion.toTimestamp());const i=ah(t,e.expectedCount);null!==i&&(n.expectedCount=i)}return n}(this.serializer,t);const n=function(t,e){const n=function(t){switch(t){case"TargetPurposeListen":return null;case"TargetPurposeExistenceFilterMismatch":return"existence-filter-mismatch";case"TargetPurposeExistenceFilterMismatchBloom":return"existence-filter-mismatch-bloom";case"TargetPurposeLimboResolution":return"limbo-document";default:return ka(28987,{purpose:t})}}(e.purpose);return null==n?null:{"goog-listen-tags":n}}(this.serializer,t);n&&(e.labels=n),this.F_(e)}K_(t){const e={};e.database=vh(this.serializer),e.removeTarget=t,this.F_(e)}}class Bd extends Vd{constructor(t,e,n,i,r,s){super(t,"write_stream_connection_backoff","write_stream_idle","health_check_timeout",e,n,i,s),this.serializer=r}get W_(){return this.p_>0}start(){this.lastStreamToken=void 0,super.start()}O_(){this.W_&&this.G_([])}k_(t,e){return this.connection.a_("Write",t,e)}q_(t){return xa(!!t.streamToken,31322),this.lastStreamToken=t.streamToken,xa(!t.writeResults||0===t.writeResults.length,55816),this.listener.z_()}onNext(t){xa(!!t.streamToken,12678),this.lastStreamToken=t.streamToken,this.y_.reset();const e=function(t,e){return t&&t.length>0?(xa(void 0!==e,14353),t.map((t=>function(t,e){let n=t.updateTime?hh(t.updateTime):hh(e);return n.isEqual(Qa.min())&&(n=hh(e)),new wu(n,t.transformResults||[])}(t,e)))):[]}(t.writeResults,t.commitTime),n=hh(t.commitTime);return this.listener.j_(n,e)}H_(){const t={};t.database=vh(this.serializer),this.F_(t)}G_(t){const e={streamToken:this.lastStreamToken,writes:t.map((t=>function(t,e){let n;if(e instanceof Du)n={update:wh(t,e.key,e.value)};else if(e instanceof Mu)n={delete:gh(t,e.key)};else if(e instanceof Au)n={update:wh(t,e.key,e.data),updateMask:Lh(e.fieldMask)};else{if(!(e instanceof Ru))return ka(16599,{ft:e.type});n={verify:gh(t,e.key)}}return e.fieldTransforms.length>0&&(n.updateTransforms=e.fieldTransforms.map((t=>function(t,e){const n=e.transform;if(n instanceof du)return{fieldPath:e.field.canonicalString(),setToServerValue:"REQUEST_TIME"};if(n instanceof fu)return{fieldPath:e.field.canonicalString(),appendMissingElements:{values:n.elements}};if(n instanceof gu)return{fieldPath:e.field.canonicalString(),removeAllFromArray:{values:n.elements}};if(n instanceof yu)return{fieldPath:e.field.canonicalString(),increment:n.Re};throw ka(20930,{transform:e.transform})}(0,t)))),e.precondition.isNone||(n.currentDocument=(i=t,void 0!==(r=e.precondition).updateTime?{updateTime:uh(i,r.updateTime)}:void 0!==r.exists?{exists:r.exists}:ka(27497))),n;var i,r}(this.serializer,t)))};this.F_(e)}}
/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class jd{}class Ud extends jd{constructor(t,e,n,i){super(),this.authCredentials=t,this.appCheckCredentials=e,this.connection=n,this.serializer=i,this.J_=!1}Y_(){if(this.J_)throw new Ia(Sa.FAILED_PRECONDITION,"The client has already been terminated.")}Qo(t,e,n,i){return this.Y_(),Promise.all([this.authCredentials.getToken(),this.appCheckCredentials.getToken()]).then((([r,s])=>this.connection.Qo(t,fh(e,n),i,r,s))).catch((t=>{throw"FirebaseError"===t.name?(t.code===Sa.UNAUTHENTICATED&&(this.authCredentials.invalidateToken(),this.appCheckCredentials.invalidateToken()),t):new Ia(Sa.UNKNOWN,t.toString())}))}Wo(t,e,n,i,r){return this.Y_(),Promise.all([this.authCredentials.getToken(),this.appCheckCredentials.getToken()]).then((([s,o])=>this.connection.Wo(t,fh(e,n),i,s,o,r))).catch((t=>{throw"FirebaseError"===t.name?(t.code===Sa.UNAUTHENTICATED&&(this.authCredentials.invalidateToken(),this.appCheckCredentials.invalidateToken()),t):new Ia(Sa.UNKNOWN,t.toString())}))}terminate(){this.J_=!0,this.connection.terminate()}}class qd{constructor(t,e){this.asyncQueue=t,this.onlineStateHandler=e,this.state="Unknown",this.Z_=0,this.X_=null,this.ea=!0}ta(){0===this.Z_&&(this.na("Unknown"),this.X_=this.asyncQueue.enqueueAfterDelay("online_state_timeout",1e4,(()=>(this.X_=null,this.ra("Backend didn't respond within 10 seconds."),this.na("Offline"),Promise.resolve()))))}ia(t){"Online"===this.state?this.na("Unknown"):(this.Z_++,this.Z_>=1&&(this.sa(),this.ra(`Connection failed 1 times. Most recent error: ${t.toString()}`),this.na("Offline")))}set(t){this.sa(),this.Z_=0,"Online"===t&&(this.ea=!1),this.na(t)}na(t){t!==this.state&&(this.state=t,this.onlineStateHandler(t))}ra(t){const e=`Could not reach Cloud Firestore backend. ${t}\nThis typically indicates that your device does not have a healthy Internet connection at the moment. The client will operate in offline mode until it is able to successfully connect to the backend.`;this.ea?(wa(e),this.ea=!1):ba("OnlineStateTracker",e)}sa(){null!==this.X_&&(this.X_.cancel(),this.X_=null)}}
/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const Hd="RemoteStore";class zd{constructor(t,e,n,i,r){this.localStore=t,this.datastore=e,this.asyncQueue=n,this.remoteSyncer={},this.oa=[],this._a=new Map,this.aa=new Set,this.ua=[],this.ca=r,this.ca.vo((t=>{n.enqueueAndForget((async()=>{Zd(this)&&(ba(Hd,"Restarting streams for network reachability change."),await async function(t){const e=Ta(t);e.aa.add(4),await Kd(e),e.la.set("Unknown"),e.aa.delete(4),await $d(e)}(this))}))})),this.la=new qd(n,i)}}async function $d(t){if(Zd(t))for(const e of t.ua)await e(!0)}async function Kd(t){for(const e of t.ua)await e(!1)}function Gd(t,e){const n=Ta(t);n._a.has(e.targetId)||(n._a.set(e.targetId,e),Jd(n)?Xd(n):vf(n).b_()&&Qd(n,e))}function Wd(t,e){const n=Ta(t),i=vf(n);n._a.delete(e),i.b_()&&Yd(n,e),0===n._a.size&&(i.b_()?i.v_():Zd(n)&&n.la.set("Unknown"))}function Qd(t,e){if(t.ha.Ke(e.targetId),e.resumeToken.approximateByteSize()>0||e.snapshotVersion.compareTo(Qa.min())>0){const n=t.remoteSyncer.getRemoteKeysForTarget(e.targetId).size;e=e.withExpectedCount(n)}vf(t).U_(e)}function Yd(t,e){t.ha.Ke(e),vf(t).K_(e)}function Xd(t){t.ha=new th({getRemoteKeysForTarget:e=>t.remoteSyncer.getRemoteKeysForTarget(e),Rt:e=>t._a.get(e)||null,Pt:()=>t.datastore.serializer.databaseId}),vf(t).start(),t.la.ta()}function Jd(t){return Zd(t)&&!vf(t).w_()&&t._a.size>0}function Zd(t){return 0===Ta(t).aa.size}function tf(t){t.ha=void 0}async function ef(t){t.la.set("Online")}async function nf(t){t._a.forEach(((e,n)=>{Qd(t,e)}))}async function rf(t,e){tf(t),Jd(t)?(t.la.ia(e),Xd(t)):t.la.set("Unknown")}async function sf(t,e,n){if(t.la.set("Online"),e instanceof Ju&&2===e.state&&e.cause)try{await async function(t,e){const n=e.cause;for(const i of e.targetIds)t._a.has(i)&&(await t.remoteSyncer.rejectListen(i,n),t._a.delete(i),t.ha.removeTarget(i))}(t,e)}catch(i){ba(Hd,"Failed to remove targets %s: %s ",e.targetIds.join(","),i),await of(t,i)}else if(e instanceof Yu?t.ha.Xe(e):e instanceof Xu?t.ha.ot(e):t.ha.nt(e),!n.isEqual(Qa.min()))try{const e=await gd(t.localStore);n.compareTo(e)>=0&&await function(t,e){const n=t.ha.It(e);return n.targetChanges.forEach(((n,i)=>{if(n.resumeToken.approximateByteSize()>0){const r=t._a.get(i);r&&t._a.set(i,r.withResumeToken(n.resumeToken,e))}})),n.targetMismatches.forEach(((e,n)=>{const i=t._a.get(e);if(!i)return;t._a.set(e,i.withResumeToken(Cc.EMPTY_BYTE_STRING,i.snapshotVersion)),Yd(t,e);const r=new Nh(i.target,e,n,i.sequenceNumber);Qd(t,r)})),t.remoteSyncer.applyRemoteEvent(n)}(t,n)}catch(r){ba(Hd,"Failed to raise snapshot:",r),await of(t,r)}}async function of(t,e,n){if(!cc(e))throw e;t.aa.add(1),await Kd(t),t.la.set("Offline"),n||(n=()=>gd(t.localStore)),t.asyncQueue.enqueueRetryable((async()=>{ba(Hd,"Retrying IndexedDB access"),await n(),t.aa.delete(1),await $d(t)}))}function af(t,e){return e().catch((n=>of(t,n,e)))}async function cf(t){const e=Ta(t),n=bf(e);let i=e.oa.length>0?e.oa[e.oa.length-1].batchId:-1;for(;lf(e);)try{const t=await yd(e.localStore,i);if(null===t){0===e.oa.length&&n.v_();break}i=t.batchId,uf(e,t)}catch(r){await of(e,r)}hf(e)&&df(e)}function lf(t){return Zd(t)&&t.oa.length<10}function uf(t,e){t.oa.push(e);const n=bf(t);n.b_()&&n.W_&&n.G_(e.mutations)}function hf(t){return Zd(t)&&!bf(t).w_()&&t.oa.length>0}function df(t){bf(t).start()}async function ff(t){bf(t).H_()}async function pf(t){const e=bf(t);for(const n of t.oa)e.G_(n.mutations)}async function gf(t,e,n){const i=t.oa.shift(),r=Vu.from(i,e,n);await af(t,(()=>t.remoteSyncer.applySuccessfulWrite(r))),await cf(t)}async function mf(t,e){e&&bf(t).W_&&await async function(t,e){if(function(t){switch(t){case Sa.OK:return ka(64938);case Sa.CANCELLED:case Sa.UNKNOWN:case Sa.DEADLINE_EXCEEDED:case Sa.RESOURCE_EXHAUSTED:case Sa.INTERNAL:case Sa.UNAVAILABLE:case Sa.UNAUTHENTICATED:return!1;case Sa.INVALID_ARGUMENT:case Sa.NOT_FOUND:case Sa.ALREADY_EXISTS:case Sa.PERMISSION_DENIED:case Sa.FAILED_PRECONDITION:case Sa.ABORTED:case Sa.OUT_OF_RANGE:case Sa.UNIMPLEMENTED:case Sa.DATA_LOSS:return!0;default:return ka(15467,{code:t})}}(n=e.code)&&n!==Sa.ABORTED){const n=t.oa.shift();bf(t).D_(),await af(t,(()=>t.remoteSyncer.rejectFailedWrite(n.batchId,e))),await cf(t)}var n}(t,e),hf(t)&&df(t)}async function yf(t,e){const n=Ta(t);n.asyncQueue.verifyOperationInProgress(),ba(Hd,"RemoteStore received new credentials");const i=Zd(n);n.aa.add(3),await Kd(n),i&&n.la.set("Unknown"),await n.remoteSyncer.handleCredentialChange(e),n.aa.delete(3),await $d(n)}function vf(t){return t.Pa||(t.Pa=function(t,e,n){const i=Ta(t);return i.Y_(),new Fd(e,i.connection,i.authCredentials,i.appCheckCredentials,i.serializer,n)}(t.datastore,t.asyncQueue,{jo:ef.bind(null,t),Jo:nf.bind(null,t),Zo:rf.bind(null,t),Q_:sf.bind(null,t)}),t.ua.push((async e=>{e?(t.Pa.D_(),Jd(t)?Xd(t):t.la.set("Unknown")):(await t.Pa.stop(),tf(t))}))),t.Pa}function bf(t){return t.Ta||(t.Ta=function(t,e,n){const i=Ta(t);return i.Y_(),new Bd(e,i.connection,i.authCredentials,i.appCheckCredentials,i.serializer,n)}(t.datastore,t.asyncQueue,{jo:()=>Promise.resolve(),Jo:ff.bind(null,t),Zo:mf.bind(null,t),z_:pf.bind(null,t),j_:gf.bind(null,t)}),t.ua.push((async e=>{e?(t.Ta.D_(),await cf(t)):(await t.Ta.stop(),t.oa.length>0&&(ba(Hd,`Stopping write stream with ${t.oa.length} pending writes`),t.oa=[]))}))),t.Ta
/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */}class wf{constructor(t,e,n,i,r){this.asyncQueue=t,this.timerId=e,this.targetTimeMs=n,this.op=i,this.removalCallback=r,this.deferred=new Da,this.then=this.deferred.promise.then.bind(this.deferred.promise),this.deferred.promise.catch((t=>{}))}get promise(){return this.deferred.promise}static createAndSchedule(t,e,n,i,r){const s=Date.now()+n,o=new wf(t,e,s,i,r);return o.start(n),o}start(t){this.timerHandle=setTimeout((()=>this.handleDelayElapsed()),t)}skipDelay(){return this.handleDelayElapsed()}cancel(t){null!==this.timerHandle&&(this.clearTimeout(),this.deferred.reject(new Ia(Sa.CANCELLED,"Operation cancelled"+(t?": "+t:""))))}handleDelayElapsed(){this.asyncQueue.enqueueAndForget((()=>null!==this.timerHandle?(this.clearTimeout(),this.op().then((t=>this.deferred.resolve(t)))):Promise.resolve()))}clearTimeout(){null!==this.timerHandle&&(this.removalCallback(this),clearTimeout(this.timerHandle),this.timerHandle=null)}}function _f(t,e){if(wa("AsyncQueue",`${e}: ${t}`),cc(t))return new Ia(Sa.UNAVAILABLE,`${e}: ${t}`);throw t}
/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class Ef{static emptySet(t){return new Ef(t.comparator)}constructor(t){this.comparator=t?(e,n)=>t(e,n)||ec.comparator(e.key,n.key):(t,e)=>ec.comparator(t.key,e.key),this.keyedMap=Yl(),this.sortedSet=new yc(this.comparator)}has(t){return null!=this.keyedMap.get(t)}get(t){return this.keyedMap.get(t)}first(){return this.sortedSet.minKey()}last(){return this.sortedSet.maxKey()}isEmpty(){return this.sortedSet.isEmpty()}indexOf(t){const e=this.keyedMap.get(t);return e?this.sortedSet.indexOf(e):-1}get size(){return this.sortedSet.size}forEach(t){this.sortedSet.inorderTraversal(((e,n)=>(t(e),!1)))}add(t){const e=this.delete(t.key);return e.copy(e.keyedMap.insert(t.key,t),e.sortedSet.insert(t,null))}delete(t){const e=this.get(t);return e?this.copy(this.keyedMap.remove(t),this.sortedSet.remove(e)):this}isEqual(t){if(!(t instanceof Ef))return!1;if(this.size!==t.size)return!1;const e=this.sortedSet.getIterator(),n=t.sortedSet.getIterator();for(;e.hasNext();){const t=e.getNext().key,i=n.getNext().key;if(!t.isEqual(i))return!1}return!0}toString(){const t=[];return this.forEach((e=>{t.push(e.toString())})),0===t.length?"DocumentSet ()":"DocumentSet (\n  "+t.join("  \n")+"\n)"}copy(t,e){const n=new Ef;return n.comparator=this.comparator,n.keyedMap=t,n.sortedSet=e,n}}
/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class kf{constructor(){this.Ia=new yc(ec.comparator)}track(t){const e=t.doc.key,n=this.Ia.get(e);n?0!==t.type&&3===n.type?this.Ia=this.Ia.insert(e,t):3===t.type&&1!==n.type?this.Ia=this.Ia.insert(e,{type:n.type,doc:t.doc}):2===t.type&&2===n.type?this.Ia=this.Ia.insert(e,{type:2,doc:t.doc}):2===t.type&&0===n.type?this.Ia=this.Ia.insert(e,{type:0,doc:t.doc}):1===t.type&&0===n.type?this.Ia=this.Ia.remove(e):1===t.type&&2===n.type?this.Ia=this.Ia.insert(e,{type:1,doc:n.doc}):0===t.type&&1===n.type?this.Ia=this.Ia.insert(e,{type:2,doc:t.doc}):ka(63341,{Vt:t,Ea:n}):this.Ia=this.Ia.insert(e,t)}da(){const t=[];return this.Ia.inorderTraversal(((e,n)=>{t.push(n)})),t}}class Cf{constructor(t,e,n,i,r,s,o,a,c){this.query=t,this.docs=e,this.oldDocs=n,this.docChanges=i,this.mutatedKeys=r,this.fromCache=s,this.syncStateChanged=o,this.excludesMetadataChanges=a,this.hasCachedResults=c}static fromInitialDocuments(t,e,n,i,r){const s=[];return e.forEach((t=>{s.push({type:0,doc:t})})),new Cf(t,e,Ef.emptySet(e),s,n,i,!0,!1,r)}get hasPendingWrites(){return!this.mutatedKeys.isEmpty()}isEqual(t){if(!(this.fromCache===t.fromCache&&this.hasCachedResults===t.hasCachedResults&&this.syncStateChanged===t.syncStateChanged&&this.mutatedKeys.isEqual(t.mutatedKeys)&&jl(this.query,t.query)&&this.docs.isEqual(t.docs)&&this.oldDocs.isEqual(t.oldDocs)))return!1;const e=this.docChanges,n=t.docChanges;if(e.length!==n.length)return!1;for(let i=0;i<e.length;i++)if(e[i].type!==n[i].type||!e[i].doc.isEqual(n[i].doc))return!1;return!0}}
/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class xf{constructor(){this.Aa=void 0,this.Ra=[]}Va(){return this.Ra.some((t=>t.ma()))}}class Tf{constructor(){this.queries=Sf(),this.onlineState="Unknown",this.fa=new Set}terminate(){!function(t,e){const n=Ta(t),i=n.queries;n.queries=Sf(),i.forEach(((t,n)=>{for(const i of n.Ra)i.onError(e)}))}(this,new Ia(Sa.ABORTED,"Firestore shutting down"))}}function Sf(){return new Kl((t=>Ul(t)),jl)}function If(t,e){const n=Ta(t);let i=!1;for(const r of e){const t=r.query,e=n.queries.get(t);if(e){for(const t of e.Ra)t.pa(r)&&(i=!0);e.Aa=r}}i&&Af(n)}function Df(t,e,n){const i=Ta(t),r=i.queries.get(e);if(r)for(const s of r.Ra)s.onError(n);i.queries.delete(e)}function Af(t){t.fa.forEach((t=>{t.next()}))}var Lf,Of;(Of=Lf||(Lf={})).ya="default",Of.Cache="cache";class Nf{constructor(t,e,n){this.query=t,this.wa=e,this.ba=!1,this.Sa=null,this.onlineState="Unknown",this.options=n||{}}pa(t){if(!this.options.includeMetadataChanges){const e=[];for(const n of t.docChanges)3!==n.type&&e.push(n);t=new Cf(t.query,t.docs,t.oldDocs,e,t.mutatedKeys,t.fromCache,t.syncStateChanged,!0,t.hasCachedResults)}let e=!1;return this.ba?this.Da(t)&&(this.wa.next(t),e=!0):this.va(t,this.onlineState)&&(this.Ca(t),e=!0),this.Sa=t,e}onError(t){this.wa.error(t)}ga(t){this.onlineState=t;let e=!1;return this.Sa&&!this.ba&&this.va(this.Sa,t)&&(this.Ca(this.Sa),e=!0),e}va(t,e){if(!t.fromCache)return!0;if(!this.ma())return!0;const n="Offline"!==e;return(!this.options.Fa||!n)&&(!t.docs.isEmpty()||t.hasCachedResults||"Offline"===e)}Da(t){if(t.docChanges.length>0)return!0;const e=this.Sa&&this.Sa.hasPendingWrites!==t.hasPendingWrites;return!(!t.syncStateChanged&&!e)&&!0===this.options.includeMetadataChanges}Ca(t){t=Cf.fromInitialDocuments(t.query,t.docs,t.mutatedKeys,t.fromCache,t.hasCachedResults),this.ba=!0,this.wa.next(t)}ma(){return this.options.source!==Lf.Cache}}
/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class Mf{constructor(t){this.key=t}}class Rf{constructor(t){this.key=t}}class Pf{constructor(t,e){this.query=t,this.qa=e,this.Qa=null,this.hasCachedResults=!1,this.current=!1,this.$a=iu(),this.mutatedKeys=iu(),this.Ua=zl(t),this.Ka=new Ef(this.Ua)}get Wa(){return this.qa}Ga(t,e){const n=e?e.za:new kf,i=e?e.Ka:this.Ka;let r=e?e.mutatedKeys:this.mutatedKeys,s=i,o=!1;const a="F"===this.query.limitType&&i.size===this.query.limit?i.last():null,c="L"===this.query.limitType&&i.size===this.query.limit?i.first():null;if(t.inorderTraversal(((t,e)=>{const l=i.get(t),u=Hl(this.query,e)?e:null,h=!!l&&this.mutatedKeys.has(l.key),d=!!u&&(u.hasLocalMutations||this.mutatedKeys.has(u.key)&&u.hasCommittedMutations);let f=!1;l&&u?l.data.isEqual(u.data)?h!==d&&(n.track({type:3,doc:u}),f=!0):this.ja(l,u)||(n.track({type:2,doc:u}),f=!0,(a&&this.Ua(u,a)>0||c&&this.Ua(u,c)<0)&&(o=!0)):!l&&u?(n.track({type:0,doc:u}),f=!0):l&&!u&&(n.track({type:1,doc:l}),f=!0,(a||c)&&(o=!0)),f&&(u?(s=s.add(u),r=d?r.add(t):r.delete(t)):(s=s.delete(t),r=r.delete(t)))})),null!==this.query.limit)for(;s.size>this.query.limit;){const t="F"===this.query.limitType?s.last():s.first();s=s.delete(t.key),r=r.delete(t.key),n.track({type:1,doc:t})}return{Ka:s,za:n,ys:o,mutatedKeys:r}}ja(t,e){return t.hasLocalMutations&&e.hasCommittedMutations&&!e.hasLocalMutations}applyChanges(t,e,n,i){const r=this.Ka;this.Ka=t.Ka,this.mutatedKeys=t.mutatedKeys;const s=t.za.da();s.sort(((t,e)=>function(t,e){const n=t=>{switch(t){case 0:return 1;case 2:case 3:return 2;case 1:return 0;default:return ka(20277,{Vt:t})}};return n(t)-n(e)}(t.type,e.type)||this.Ua(t.doc,e.doc))),this.Ha(n),i=null!=i&&i;const o=e&&!i?this.Ja():[],a=0===this.$a.size&&this.current&&!i?1:0,c=a!==this.Qa;return this.Qa=a,0!==s.length||c?{snapshot:new Cf(this.query,t.Ka,r,s,t.mutatedKeys,0===a,c,!1,!!n&&n.resumeToken.approximateByteSize()>0),Ya:o}:{Ya:o}}ga(t){return this.current&&"Offline"===t?(this.current=!1,this.applyChanges({Ka:this.Ka,za:new kf,mutatedKeys:this.mutatedKeys,ys:!1},!1)):{Ya:[]}}Za(t){return!this.qa.has(t)&&!!this.Ka.has(t)&&!this.Ka.get(t).hasLocalMutations}Ha(t){t&&(t.addedDocuments.forEach((t=>this.qa=this.qa.add(t))),t.modifiedDocuments.forEach((t=>{})),t.removedDocuments.forEach((t=>this.qa=this.qa.delete(t))),this.current=t.current)}Ja(){if(!this.current)return[];const t=this.$a;this.$a=iu(),this.Ka.forEach((t=>{this.Za(t.key)&&(this.$a=this.$a.add(t.key))}));const e=[];return t.forEach((t=>{this.$a.has(t)||e.push(new Rf(t))})),this.$a.forEach((n=>{t.has(n)||e.push(new Mf(n))})),e}Xa(t){this.qa=t.Ns,this.$a=iu();const e=this.Ga(t.documents);return this.applyChanges(e,!0)}eu(){return Cf.fromInitialDocuments(this.query,this.Ka,this.mutatedKeys,0===this.Qa,this.hasCachedResults)}}const Vf="SyncEngine";class Ff{constructor(t,e,n){this.query=t,this.targetId=e,this.view=n}}class Bf{constructor(t){this.key=t,this.tu=!1}}class jf{constructor(t,e,n,i,r,s){this.localStore=t,this.remoteStore=e,this.eventManager=n,this.sharedClientState=i,this.currentUser=r,this.maxConcurrentLimboResolutions=s,this.nu={},this.ru=new Kl((t=>Ul(t)),jl),this.iu=new Map,this.su=new Set,this.ou=new yc(ec.comparator),this._u=new Map,this.au=new Zh,this.uu={},this.cu=new Map,this.lu=Uh.ir(),this.onlineState="Unknown",this.hu=void 0}get isPrimaryClient(){return!0===this.hu}}async function Uf(t,e,n=!0){const i=cp(t);let r;const s=i.ru.get(e);return s?(i.sharedClientState.addLocalQueryTarget(s.targetId),r=s.view.eu()):r=await Hf(i,e,n,!0),r}async function qf(t,e){const n=cp(t);await Hf(n,e,!0,!1)}async function Hf(t,e,n,i){const r=await function(t,e){const n=Ta(t);return n.persistence.runTransaction("Allocate target","readwrite",(t=>{let i;return n.ai.getTargetData(t,e).next((r=>r?(i=r,ac.resolve(i)):n.ai.allocateTargetId(t).next((r=>(i=new Nh(e,r,"TargetPurposeListen",t.currentSequenceNumber),n.ai.addTargetData(t,i).next((()=>i)))))))})).then((t=>{const i=n.Ss.get(t.targetId);return(null===i||t.snapshotVersion.compareTo(i.snapshotVersion)>0)&&(n.Ss=n.Ss.insert(t.targetId,t),n.Ds.set(e,t.targetId)),t}))}(t.localStore,Fl(e)),s=r.targetId,o=t.sharedClientState.addLocalQueryTarget(s,n);let a;return i&&(a=await async function(t,e,n,i,r){t.Pu=(e,n,i)=>async function(t,e,n,i){let r=e.view.Ga(n);r.ys&&(r=await bd(t.localStore,e.query,!1).then((({documents:t})=>e.view.Ga(t,r))));const s=i&&i.targetChanges.get(e.targetId),o=i&&null!=i.targetMismatches.get(e.targetId),a=e.view.applyChanges(r,t.isPrimaryClient,s,o);return np(t,e.targetId,a.Ya),a.snapshot}(t,e,n,i);const s=await bd(t.localStore,e,!0),o=new Pf(e,s.Ns),a=o.Ga(s.documents),c=Qu.createSynthesizedTargetChangeForCurrentChange(n,i&&"Offline"!==t.onlineState,r),l=o.applyChanges(a,t.isPrimaryClient,c);np(t,n,l.Ya);const u=new Ff(e,n,o);return t.ru.set(e,u),t.iu.has(n)?t.iu.get(n).push(e):t.iu.set(n,[e]),l.snapshot}(t,e,s,"current"===o,r.resumeToken)),t.isPrimaryClient&&n&&Gd(t.remoteStore,r),a}async function zf(t,e,n){const i=Ta(t),r=i.ru.get(e),s=i.iu.get(r.targetId);if(s.length>1)return i.iu.set(r.targetId,s.filter((t=>!jl(t,e)))),void i.ru.delete(e);i.isPrimaryClient?(i.sharedClientState.removeLocalQueryTarget(r.targetId),i.sharedClientState.isActiveQueryTarget(r.targetId)||await vd(i.localStore,r.targetId,!1).then((()=>{i.sharedClientState.clearQueryState(r.targetId),n&&Wd(i.remoteStore,r.targetId),tp(i,r.targetId)})).catch(oc)):(tp(i,r.targetId),await vd(i.localStore,r.targetId,!0))}async function $f(t,e){const n=Ta(t),i=n.ru.get(e),r=n.iu.get(i.targetId);n.isPrimaryClient&&1===r.length&&(n.sharedClientState.removeLocalQueryTarget(i.targetId),Wd(n.remoteStore,i.targetId))}async function Kf(t,e,n){const i=function(t){const e=Ta(t);return e.remoteStore.remoteSyncer.applySuccessfulWrite=Yf.bind(null,e),e.remoteStore.remoteSyncer.rejectFailedWrite=Xf.bind(null,e),e}(t);try{const t=await function(t,e){const n=Ta(t),i=Wa.now(),r=e.reduce(((t,e)=>t.add(e.key)),iu());let s,o;return n.persistence.runTransaction("Locally write mutations","readwrite",(t=>{let a=Wl(),c=iu();return n.Cs.getEntries(t,r).next((t=>{a=t,a.forEach(((t,e)=>{e.isValidDocument()||(c=c.add(t))}))})).next((()=>n.localDocuments.getOverlayedDocuments(t,a))).next((r=>{s=r;const o=[];for(const t of e){const e=Su(t,s.get(t.key).overlayedDocument);null!=e&&o.push(new Au(t.key,e,ol(e.value.mapValue),_u.exists(!0)))}return n.mutationQueue.addMutationBatch(t,i,o,e)})).next((e=>{o=e;const i=e.applyToLocalDocumentSet(s,c);return n.documentOverlayCache.saveOverlays(t,e.batchId,i)}))})).then((()=>({batchId:o.batchId,changes:Xl(s)})))}(i.localStore,e);i.sharedClientState.addPendingMutation(t.batchId),function(t,e,n){let i=t.uu[t.currentUser.toKey()];i||(i=new yc(Ua)),i=i.insert(e,n),t.uu[t.currentUser.toKey()]=i}(i,t.batchId,n),await sp(i,t.changes),await cf(i.remoteStore)}catch(r){const t=_f(r,"Failed to persist write");n.reject(t)}}async function Gf(t,e){const n=Ta(t);try{const t=await md(n.localStore,e);e.targetChanges.forEach(((t,e)=>{const i=n._u.get(e);i&&(xa(t.addedDocuments.size+t.modifiedDocuments.size+t.removedDocuments.size<=1,22616),t.addedDocuments.size>0?i.tu=!0:t.modifiedDocuments.size>0?xa(i.tu,14607):t.removedDocuments.size>0&&(xa(i.tu,42227),i.tu=!1))})),await sp(n,t,e)}catch(i){await oc(i)}}function Wf(t,e,n){const i=Ta(t);if(i.isPrimaryClient&&0===n||!i.isPrimaryClient&&1===n){const t=[];i.ru.forEach(((n,i)=>{const r=i.view.ga(e);r.snapshot&&t.push(r.snapshot)})),function(t,e){const n=Ta(t);n.onlineState=e;let i=!1;n.queries.forEach(((t,n)=>{for(const r of n.Ra)r.ga(e)&&(i=!0)})),i&&Af(n)}(i.eventManager,e),t.length&&i.nu.Q_(t),i.onlineState=e,i.isPrimaryClient&&i.sharedClientState.setOnlineState(e)}}async function Qf(t,e,n){const i=Ta(t);i.sharedClientState.updateQueryState(e,"rejected",n);const r=i._u.get(e),s=r&&r.key;if(s){let t=new yc(ec.comparator);t=t.insert(s,al.newNoDocument(s,Qa.min()));const n=iu().add(s),r=new Wu(Qa.min(),new Map,new yc(Ua),t,n);await Gf(i,r),i.ou=i.ou.remove(s),i._u.delete(e),rp(i)}else await vd(i.localStore,e,!1).then((()=>tp(i,e,n))).catch(oc)}async function Yf(t,e){const n=Ta(t),i=e.batch.batchId;try{const t=await function(t,e){const n=Ta(t);return n.persistence.runTransaction("Acknowledge batch","readwrite-primary",(t=>{const i=e.batch.keys(),r=n.Cs.newChangeBuffer({trackRemovals:!0});return function(t,e,n,i){const r=n.batch,s=r.keys();let o=ac.resolve();return s.forEach((t=>{o=o.next((()=>i.getEntry(e,t))).next((e=>{const s=n.docVersions.get(t);xa(null!==s,48541),e.version.compareTo(s)<0&&(r.applyToRemoteDocument(e,n),e.isValidDocument()&&(e.setReadTime(n.commitVersion),i.addEntry(e)))}))})),o.next((()=>t.mutationQueue.removeMutationBatch(e,r)))}(n,t,e,r).next((()=>r.apply(t))).next((()=>n.mutationQueue.performConsistencyCheck(t))).next((()=>n.documentOverlayCache.removeOverlaysForBatchId(t,i,e.batch.batchId))).next((()=>n.localDocuments.recalculateAndSaveOverlaysForDocumentKeys(t,function(t){let e=iu();for(let n=0;n<t.mutationResults.length;++n)t.mutationResults[n].transformResults.length>0&&(e=e.add(t.batch.mutations[n].key));return e}(e)))).next((()=>n.localDocuments.getDocuments(t,i)))}))}(n.localStore,e);Zf(n,i,null),Jf(n,i),n.sharedClientState.updateMutationState(i,"acknowledged"),await sp(n,t)}catch(r){await oc(r)}}async function Xf(t,e,n){const i=Ta(t);try{const t=await function(t,e){const n=Ta(t);return n.persistence.runTransaction("Reject batch","readwrite-primary",(t=>{let i;return n.mutationQueue.lookupMutationBatch(t,e).next((e=>(xa(null!==e,37113),i=e.keys(),n.mutationQueue.removeMutationBatch(t,e)))).next((()=>n.mutationQueue.performConsistencyCheck(t))).next((()=>n.documentOverlayCache.removeOverlaysForBatchId(t,i,e))).next((()=>n.localDocuments.recalculateAndSaveOverlaysForDocumentKeys(t,i))).next((()=>n.localDocuments.getDocuments(t,i)))}))}(i.localStore,e);Zf(i,e,n),Jf(i,e),i.sharedClientState.updateMutationState(e,"rejected",n),await sp(i,t)}catch(r){await oc(r)}}function Jf(t,e){(t.cu.get(e)||[]).forEach((t=>{t.resolve()})),t.cu.delete(e)}function Zf(t,e,n){const i=Ta(t);let r=i.uu[i.currentUser.toKey()];if(r){const t=r.get(e);t&&(n?t.reject(n):t.resolve(),r=r.remove(e)),i.uu[i.currentUser.toKey()]=r}}function tp(t,e,n=null){t.sharedClientState.removeLocalQueryTarget(e);for(const i of t.iu.get(e))t.ru.delete(i),n&&t.nu.Tu(i,n);t.iu.delete(e),t.isPrimaryClient&&t.au.Ur(e).forEach((e=>{t.au.containsKey(e)||ep(t,e)}))}function ep(t,e){t.su.delete(e.path.canonicalString());const n=t.ou.get(e);null!==n&&(Wd(t.remoteStore,n),t.ou=t.ou.remove(e),t._u.delete(n),rp(t))}function np(t,e,n){for(const i of n)i instanceof Mf?(t.au.addReference(i.key,e),ip(t,i)):i instanceof Rf?(ba(Vf,"Document no longer in limbo: "+i.key),t.au.removeReference(i.key,e),t.au.containsKey(i.key)||ep(t,i.key)):ka(19791,{Iu:i})}function ip(t,e){const n=e.key,i=n.path.canonicalString();t.ou.get(n)||t.su.has(i)||(ba(Vf,"New document in limbo: "+n),t.su.add(i),rp(t))}function rp(t){for(;t.su.size>0&&t.ou.size<t.maxConcurrentLimboResolutions;){const e=t.su.values().next().value;t.su.delete(e);const n=new ec(Ja.fromString(e)),i=t.lu.next();t._u.set(i,new Bf(n)),t.ou=t.ou.insert(n,i),Gd(t.remoteStore,new Nh(Fl(Rl(n.path)),i,"TargetPurposeLimboResolution",lc.le))}}async function sp(t,e,n){const i=Ta(t),r=[],s=[],o=[];i.ru.isEmpty()||(i.ru.forEach(((t,a)=>{o.push(i.Pu(a,e,n).then((t=>{var e;if((t||n)&&i.isPrimaryClient){const r=t?!t.fromCache:null===(e=null==n?void 0:n.targetChanges.get(a.targetId))||void 0===e?void 0:e.current;i.sharedClientState.updateQueryState(a.targetId,r?"current":"not-current")}if(t){r.push(t);const e=ld.Ps(a.targetId,t);s.push(e)}})))})),await Promise.all(o),i.nu.Q_(r),await async function(t,e){const n=Ta(t);try{await n.persistence.runTransaction("notifyLocalViewChanges","readwrite",(t=>ac.forEach(e,(e=>ac.forEach(e.ls,(i=>n.persistence.referenceDelegate.addReference(t,e.targetId,i))).next((()=>ac.forEach(e.hs,(i=>n.persistence.referenceDelegate.removeReference(t,e.targetId,i)))))))))}catch(i){if(!cc(i))throw i;ba(dd,"Failed to update sequence numbers: "+i)}for(const r of e){const t=r.targetId;if(!r.fromCache){const e=n.Ss.get(t),i=e.snapshotVersion,r=e.withLastLimboFreeSnapshotVersion(i);n.Ss=n.Ss.insert(t,r)}}}(i.localStore,s))}async function op(t,e){const n=Ta(t);if(!n.currentUser.isEqual(e)){ba(Vf,"User change. New user:",e.toKey());const t=await pd(n.localStore,e);n.currentUser=e,r="'waitForPendingWrites' promise is rejected due to a user change.",(i=n).cu.forEach((t=>{t.forEach((t=>{t.reject(new Ia(Sa.CANCELLED,r))}))})),i.cu.clear(),n.sharedClientState.handleUserChange(e,t.removedBatchIds,t.addedBatchIds),await sp(n,t.Ms)}var i,r}function ap(t,e){const n=Ta(t),i=n._u.get(e);if(i&&i.tu)return iu().add(i.key);{let t=iu();const i=n.iu.get(e);if(!i)return t;for(const e of i){const i=n.ru.get(e);t=t.unionWith(i.view.Wa)}return t}}function cp(t){const e=Ta(t);return e.remoteStore.remoteSyncer.applyRemoteEvent=Gf.bind(null,e),e.remoteStore.remoteSyncer.getRemoteKeysForTarget=ap.bind(null,e),e.remoteStore.remoteSyncer.rejectListen=Qf.bind(null,e),e.nu.Q_=If.bind(null,e.eventManager),e.nu.Tu=Df.bind(null,e.eventManager),e}class lp{constructor(){this.kind="memory",this.synchronizeTabs=!1}async initialize(t){this.serializer=Md(t.databaseInfo.databaseId),this.sharedClientState=this.Au(t),this.persistence=this.Ru(t),await this.persistence.start(),this.localStore=this.Vu(t),this.gcScheduler=this.mu(t,this.localStore),this.indexBackfillerScheduler=this.fu(t,this.localStore)}mu(t,e){return null}fu(t,e){return null}Vu(t){return function(t,e,n,i){return new fd(t,e,n,i)}(this.persistence,new hd,t.initialUser,this.serializer)}Ru(t){return new sd(ad.Ei,this.serializer)}Au(t){return new _d}async terminate(){var t,e;null===(t=this.gcScheduler)||void 0===t||t.stop(),null===(e=this.indexBackfillerScheduler)||void 0===e||e.stop(),this.sharedClientState.shutdown(),await this.persistence.shutdown()}}lp.provider={build:()=>new lp};class up extends lp{constructor(t){super(),this.cacheSizeBytes=t}mu(t,e){xa(this.persistence.referenceDelegate instanceof cd,46915);const n=this.persistence.referenceDelegate.garbageCollector;return new $h(n,t.asyncQueue,e)}Ru(t){const e=void 0!==this.cacheSizeBytes?jh.withCacheSize(this.cacheSizeBytes):jh.DEFAULT;return new sd((t=>cd.Ei(t,e)),this.serializer)}}class hp{async initialize(t,e){this.localStore||(this.localStore=t.localStore,this.sharedClientState=t.sharedClientState,this.datastore=this.createDatastore(e),this.remoteStore=this.createRemoteStore(e),this.eventManager=this.createEventManager(e),this.syncEngine=this.createSyncEngine(e,!t.synchronizeTabs),this.sharedClientState.onlineStateHandler=t=>Wf(this.syncEngine,t,1),this.remoteStore.remoteSyncer.handleCredentialChange=op.bind(null,this.syncEngine),await async function(t,e){const n=Ta(t);e?(n.aa.delete(2),await $d(n)):e||(n.aa.add(2),await Kd(n),n.la.set("Unknown"))}(this.remoteStore,this.syncEngine.isPrimaryClient))}createEventManager(t){return new Tf}createDatastore(t){const e=Md(t.databaseInfo.databaseId),n=(i=t.databaseInfo,new Od(i));var i;return function(t,e,n,i){return new Ud(t,e,n,i)}(t.authCredentials,t.appCheckCredentials,n,e)}createRemoteStore(t){return e=this.localStore,n=this.datastore,i=t.asyncQueue,r=t=>Wf(this.syncEngine,t,0),s=Cd.C()?new Cd:new Ed,new zd(e,n,i,r,s);var e,n,i,r,s}createSyncEngine(t,e){return function(t,e,n,i,r,s,o){const a=new jf(t,e,n,i,r,s);return o&&(a.hu=!0),a}(this.localStore,this.remoteStore,this.eventManager,this.sharedClientState,t.initialUser,t.maxConcurrentLimboResolutions,e)}async terminate(){var t,e;await async function(t){const e=Ta(t);ba(Hd,"RemoteStore shutting down."),e.aa.add(5),await Kd(e),e.ca.shutdown(),e.la.set("Unknown")}(this.remoteStore),null===(t=this.datastore)||void 0===t||t.terminate(),null===(e=this.eventManager)||void 0===e||e.terminate()}}hp.provider={build:()=>new hp};
/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */
/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */
class dp{constructor(t){this.observer=t,this.muted=!1}next(t){this.muted||this.observer.next&&this.pu(this.observer.next,t)}error(t){this.muted||(this.observer.error?this.pu(this.observer.error,t):wa("Uncaught Error in snapshot listener:",t.toString()))}yu(){this.muted=!0}pu(t,e){setTimeout((()=>{this.muted||t(e)}),0)}}
/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const fp="FirestoreClient";class pp{constructor(t,e,n,i,r){this.authCredentials=t,this.appCheckCredentials=e,this.asyncQueue=n,this.databaseInfo=i,this.user=ga.UNAUTHENTICATED,this.clientId=ja.newId(),this.authCredentialListener=()=>Promise.resolve(),this.appCheckCredentialListener=()=>Promise.resolve(),this._uninitializedComponentsProvider=r,this.authCredentials.start(n,(async t=>{ba(fp,"Received user=",t.uid),await this.authCredentialListener(t),this.user=t})),this.appCheckCredentials.start(n,(t=>(ba(fp,"Received new app check token=",t),this.appCheckCredentialListener(t,this.user))))}get configuration(){return{asyncQueue:this.asyncQueue,databaseInfo:this.databaseInfo,clientId:this.clientId,authCredentials:this.authCredentials,appCheckCredentials:this.appCheckCredentials,initialUser:this.user,maxConcurrentLimboResolutions:100}}setCredentialChangeListener(t){this.authCredentialListener=t}setAppCheckTokenChangeListener(t){this.appCheckCredentialListener=t}terminate(){this.asyncQueue.enterRestrictedMode();const t=new Da;return this.asyncQueue.enqueueAndForgetEvenWhileRestricted((async()=>{try{this._onlineComponents&&await this._onlineComponents.terminate(),this._offlineComponents&&await this._offlineComponents.terminate(),this.authCredentials.shutdown(),this.appCheckCredentials.shutdown(),t.resolve()}catch(e){const n=_f(e,"Failed to shutdown persistence");t.reject(n)}})),t.promise}}async function gp(t,e){t.asyncQueue.verifyOperationInProgress(),ba(fp,"Initializing OfflineComponentProvider");const n=t.configuration;await e.initialize(n);let i=n.initialUser;t.setCredentialChangeListener((async t=>{i.isEqual(t)||(await pd(e.localStore,t),i=t)})),e.persistence.setDatabaseDeletedListener((()=>t.terminate())),t._offlineComponents=e}async function mp(t,e){t.asyncQueue.verifyOperationInProgress();const n=await async function(t){if(!t._offlineComponents)if(t._uninitializedComponentsProvider){ba(fp,"Using user provided OfflineComponentProvider");try{await gp(t,t._uninitializedComponentsProvider._offline)}catch(e){const r=e;if(!("FirebaseError"===(n=r).name?n.code===Sa.FAILED_PRECONDITION||n.code===Sa.UNIMPLEMENTED:!("undefined"!=typeof DOMException&&n instanceof DOMException)||22===n.code||20===n.code||11===n.code))throw r;_a("Error using user provided cache. Falling back to memory cache: "+r),await gp(t,new lp)}}else ba(fp,"Using default OfflineComponentProvider"),await gp(t,new up(void 0));var n;return t._offlineComponents}(t);ba(fp,"Initializing OnlineComponentProvider"),await e.initialize(n,t.configuration),t.setCredentialChangeListener((t=>yf(e.remoteStore,t))),t.setAppCheckTokenChangeListener(((t,n)=>yf(e.remoteStore,n))),t._onlineComponents=e}async function yp(t){return t._onlineComponents||(t._uninitializedComponentsProvider?(ba(fp,"Using user provided OnlineComponentProvider"),await mp(t,t._uninitializedComponentsProvider._online)):(ba(fp,"Using default OnlineComponentProvider"),await mp(t,new hp))),t._onlineComponents}async function vp(t){const e=await yp(t),n=e.eventManager;return n.onListen=Uf.bind(null,e.syncEngine),n.onUnlisten=zf.bind(null,e.syncEngine),n.onFirstRemoteStoreListen=qf.bind(null,e.syncEngine),n.onLastRemoteStoreUnlisten=$f.bind(null,e.syncEngine),n}function bp(t,e,n={}){const i=new Da;return t.asyncQueue.enqueueAndForget((async()=>function(t,e,n,i,r){const s=new dp({next:n=>{s.yu(),e.enqueueAndForget((()=>async function(t,e){const n=Ta(t),i=e.query;let r=3;const s=n.queries.get(i);if(s){const t=s.Ra.indexOf(e);t>=0&&(s.Ra.splice(t,1),0===s.Ra.length?r=e.ma()?0:1:!s.Va()&&e.ma()&&(r=2))}switch(r){case 0:return n.queries.delete(i),n.onUnlisten(i,!0);case 1:return n.queries.delete(i),n.onUnlisten(i,!1);case 2:return n.onLastRemoteStoreUnlisten(i);default:return}}(t,o))),n.fromCache&&"server"===i.source?r.reject(new Ia(Sa.UNAVAILABLE,'Failed to get documents from server. (However, these documents may exist in the local cache. Run again without setting source to "server" to retrieve the cached documents.)')):r.resolve(n)},error:t=>r.reject(t)}),o=new Nf(n,s,{includeMetadataChanges:!0,Fa:!0});return async function(e,n){const i=Ta(e);let r=3;const s=n.query;let o=i.queries.get(s);o?!o.Va()&&n.ma()&&(r=2):(o=new xf,r=n.ma()?0:1);try{switch(r){case 0:o.Aa=await i.onListen(s,!0);break;case 1:o.Aa=await i.onListen(s,!1);break;case 2:await i.onFirstRemoteStoreListen(s)}}catch(t){const i=_f(t,`Initialization of query '${ql(n.query)}' failed`);return void n.onError(i)}i.queries.set(s,o),o.Ra.push(n),n.ga(i.onlineState),o.Aa&&n.pa(o.Aa)&&Af(i)}(t,o)}(await vp(t),t.asyncQueue,e,n,i))),i.promise
/**
 * @license
 * Copyright 2023 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */}function wp(t){const e={};return void 0!==t.timeoutSeconds&&(e.timeoutSeconds=t.timeoutSeconds),e
/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */}const _p=new Map;
/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function Ep(t,e,n){if(!n)throw new Ia(Sa.INVALID_ARGUMENT,`Function ${t}() cannot be called with an empty ${e}.`)}function kp(t){if(!ec.isDocumentKey(t))throw new Ia(Sa.INVALID_ARGUMENT,`Invalid document reference. Document references must have an even number of segments, but ${t} has ${t.length}.`)}function Cp(t){if(ec.isDocumentKey(t))throw new Ia(Sa.INVALID_ARGUMENT,`Invalid collection reference. Collection references must have an odd number of segments, but ${t} has ${t.length}.`)}function xp(t){if(void 0===t)return"undefined";if(null===t)return"null";if("string"==typeof t)return t.length>20&&(t=`${t.substring(0,20)}...`),JSON.stringify(t);if("number"==typeof t||"boolean"==typeof t)return""+t;if("object"==typeof t){if(t instanceof Array)return"an array";{const n=(e=t).constructor?e.constructor.name:null;return n?`a custom ${n} object`:"an object"}}var e;return"function"==typeof t?"a function":ka(12329,{type:typeof t})}function Tp(t,e){if("_delegate"in t&&(t=t._delegate),!(t instanceof e)){if(e.name===t.constructor.name)throw new Ia(Sa.INVALID_ARGUMENT,"Type does not match the expected instance. Did you pass a reference from a different Firestore SDK?");{const n=xp(t);throw new Ia(Sa.INVALID_ARGUMENT,`Expected type '${e.name}', but it was: ${n}`)}}return t}
/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const Sp="firestore.googleapis.com",Ip=!0;class Dp{constructor(t){var e,n;if(void 0===t.host){if(void 0!==t.ssl)throw new Ia(Sa.INVALID_ARGUMENT,"Can't provide ssl option if host option is not set");this.host=Sp,this.ssl=Ip}else this.host=t.host,this.ssl=null!==(e=t.ssl)&&void 0!==e?e:Ip;if(this.credentials=t.credentials,this.ignoreUndefinedProperties=!!t.ignoreUndefinedProperties,this.localCache=t.localCache,void 0===t.cacheSizeBytes)this.cacheSizeBytes=Bh;else{if(-1!==t.cacheSizeBytes&&t.cacheSizeBytes<1048576)throw new Ia(Sa.INVALID_ARGUMENT,"cacheSizeBytes must be at least 1048576");this.cacheSizeBytes=t.cacheSizeBytes}(function(t,e,n,i){if(!0===e&&!0===i)throw new Ia(Sa.INVALID_ARGUMENT,`${t} and ${n} cannot be used together.`)})("experimentalForceLongPolling",t.experimentalForceLongPolling,"experimentalAutoDetectLongPolling",t.experimentalAutoDetectLongPolling),this.experimentalForceLongPolling=!!t.experimentalForceLongPolling,this.experimentalForceLongPolling?this.experimentalAutoDetectLongPolling=!1:void 0===t.experimentalAutoDetectLongPolling?this.experimentalAutoDetectLongPolling=!0:this.experimentalAutoDetectLongPolling=!!t.experimentalAutoDetectLongPolling,this.experimentalLongPollingOptions=wp(null!==(n=t.experimentalLongPollingOptions)&&void 0!==n?n:{}),function(t){if(void 0!==t.timeoutSeconds){if(isNaN(t.timeoutSeconds))throw new Ia(Sa.INVALID_ARGUMENT,`invalid long polling timeout: ${t.timeoutSeconds} (must not be NaN)`);if(t.timeoutSeconds<5)throw new Ia(Sa.INVALID_ARGUMENT,`invalid long polling timeout: ${t.timeoutSeconds} (minimum allowed value is 5)`);if(t.timeoutSeconds>30)throw new Ia(Sa.INVALID_ARGUMENT,`invalid long polling timeout: ${t.timeoutSeconds} (maximum allowed value is 30)`)}}(this.experimentalLongPollingOptions),this.useFetchStreams=!!t.useFetchStreams}isEqual(t){return this.host===t.host&&this.ssl===t.ssl&&this.credentials===t.credentials&&this.cacheSizeBytes===t.cacheSizeBytes&&this.experimentalForceLongPolling===t.experimentalForceLongPolling&&this.experimentalAutoDetectLongPolling===t.experimentalAutoDetectLongPolling&&(e=this.experimentalLongPollingOptions,n=t.experimentalLongPollingOptions,e.timeoutSeconds===n.timeoutSeconds)&&this.ignoreUndefinedProperties===t.ignoreUndefinedProperties&&this.useFetchStreams===t.useFetchStreams;var e,n}}class Ap{constructor(t,e,n,i){this._authCredentials=t,this._appCheckCredentials=e,this._databaseId=n,this._app=i,this.type="firestore-lite",this._persistenceKey="(lite)",this._settings=new Dp({}),this._settingsFrozen=!1,this._emulatorOptions={},this._terminateTask="notTerminated"}get app(){if(!this._app)throw new Ia(Sa.FAILED_PRECONDITION,"Firestore was not initialized using the Firebase SDK. 'app' is not available");return this._app}get _initialized(){return this._settingsFrozen}get _terminated(){return"notTerminated"!==this._terminateTask}_setSettings(t){if(this._settingsFrozen)throw new Ia(Sa.FAILED_PRECONDITION,"Firestore has already been started and its settings can no longer be changed. You can only modify settings before calling any other methods on a Firestore object.");this._settings=new Dp(t),this._emulatorOptions=t.emulatorOptions||{},void 0!==t.credentials&&(this._authCredentials=function(t){if(!t)return new La;switch(t.type){case"firstParty":return new Ra(t.sessionIndex||"0",t.iamToken||null,t.authTokenFactory||null);case"provider":return t.client;default:throw new Ia(Sa.INVALID_ARGUMENT,"makeAuthCredentialsProvider failed due to invalid credential type")}}(t.credentials))}_getSettings(){return this._settings}_getEmulatorOptions(){return this._emulatorOptions}_freezeSettings(){return this._settingsFrozen=!0,this._settings}_delete(){return"notTerminated"===this._terminateTask&&(this._terminateTask=this._terminate()),this._terminateTask}async _restart(){"notTerminated"===this._terminateTask?await this._terminate():this._terminateTask="notTerminated"}toJSON(){return{app:this._app,databaseId:this._databaseId,settings:this._settings}}_terminate(){return function(t){const e=_p.get(t);e&&(ba("ComponentProvider","Removing Datastore"),_p.delete(t),e.terminate())}(this),Promise.resolve()}}function Lp(t,e,n,i={}){var r;const s=(t=Tp(t,Ap))._getSettings(),o=Object.assign(Object.assign({},s),{emulatorOptions:t._getEmulatorOptions()}),a=`${e}:${n}`;s.host!==Sp&&s.host!==a&&_a("Host has been set in both settings() and connectFirestoreEmulator(), emulator host will be used.");const c=Object.assign(Object.assign({},s),{host:a,ssl:!1,emulatorOptions:i});if(!Ss(c,o)&&(t._setSettings(c),i.mockUserToken)){let e,n;if("string"==typeof i.mockUserToken)e=i.mockUserToken,n=ga.MOCK_USER;else{e=function(t,e){if(t.uid)throw new Error('The "uid" field is no longer supported by mockUserToken. Please use "sub" instead for Firebase Auth User ID.');const n=e||"demo-project",i=t.iat||0,r=t.sub||t.user_id;if(!r)throw new Error("mockUserToken must contain 'sub' or 'user_id' field!");const s=Object.assign({iss:`https://securetoken.google.com/${n}`,aud:n,iat:i,exp:i+3600,auth_time:i,sub:r,user_id:r,firebase:{sign_in_provider:"custom",identities:{}}},t);return[ms(JSON.stringify({alg:"none",type:"JWT"})),ms(JSON.stringify(s)),""].join(".")}
/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */(i.mockUserToken,null===(r=t._app)||void 0===r?void 0:r.options.projectId);const s=i.mockUserToken.sub||i.mockUserToken.user_id;if(!s)throw new Ia(Sa.INVALID_ARGUMENT,"mockUserToken must contain 'sub' or 'user_id' field!");n=new ga(s)}t._authCredentials=new Oa(new Aa(e,n))}}
/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class Op{constructor(t,e,n){this.converter=e,this._query=n,this.type="query",this.firestore=t}withConverter(t){return new Op(this.firestore,t,this._query)}}class Np{constructor(t,e,n){this.converter=e,this._key=n,this.type="document",this.firestore=t}get _path(){return this._key.path}get id(){return this._key.path.lastSegment()}get path(){return this._key.path.canonicalString()}get parent(){return new Mp(this.firestore,this.converter,this._key.path.popLast())}withConverter(t){return new Np(this.firestore,t,this._key)}}class Mp extends Op{constructor(t,e,n){super(t,e,Rl(n)),this._path=n,this.type="collection"}get id(){return this._query.path.lastSegment()}get path(){return this._query.path.canonicalString()}get parent(){const t=this._path.popLast();return t.isEmpty()?null:new Np(this.firestore,null,new ec(t))}withConverter(t){return new Mp(this.firestore,t,this._path)}}function Rp(t,e,...n){if(t=Ds(t),Ep("collection","path",e),t instanceof Ap){const i=Ja.fromString(e,...n);return Cp(i),new Mp(t,null,i)}{if(!(t instanceof Np||t instanceof Mp))throw new Ia(Sa.INVALID_ARGUMENT,"Expected first argument to collection() to be a CollectionReference, a DocumentReference or FirebaseFirestore");const i=t._path.child(Ja.fromString(e,...n));return Cp(i),new Mp(t.firestore,null,i)}}
/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */
const Pp="AsyncQueue";class Vp{constructor(t=Promise.resolve()){this.Qu=[],this.$u=!1,this.Uu=[],this.Ku=null,this.Wu=!1,this.Gu=!1,this.zu=[],this.y_=new Rd(this,"async_queue_retry"),this.ju=()=>{const t=Nd();t&&ba(Pp,"Visibility state changed to "+t.visibilityState),this.y_.A_()},this.Hu=t;const e=Nd();e&&"function"==typeof e.addEventListener&&e.addEventListener("visibilitychange",this.ju)}get isShuttingDown(){return this.$u}enqueueAndForget(t){this.enqueue(t)}enqueueAndForgetEvenWhileRestricted(t){this.Ju(),this.Yu(t)}enterRestrictedMode(t){if(!this.$u){this.$u=!0,this.Gu=t||!1;const e=Nd();e&&"function"==typeof e.removeEventListener&&e.removeEventListener("visibilitychange",this.ju)}}enqueue(t){if(this.Ju(),this.$u)return new Promise((()=>{}));const e=new Da;return this.Yu((()=>this.$u&&this.Gu?Promise.resolve():(t().then(e.resolve,e.reject),e.promise))).then((()=>e.promise))}enqueueRetryable(t){this.enqueueAndForget((()=>(this.Qu.push(t),this.Zu())))}async Zu(){if(0!==this.Qu.length){try{await this.Qu[0](),this.Qu.shift(),this.y_.reset()}catch(t){if(!cc(t))throw t;ba(Pp,"Operation failed with retryable error: "+t)}this.Qu.length>0&&this.y_.E_((()=>this.Zu()))}}Yu(t){const e=this.Hu.then((()=>(this.Wu=!0,t().catch((t=>{throw this.Ku=t,this.Wu=!1,wa("INTERNAL UNHANDLED ERROR: ",Fp(t)),t})).then((t=>(this.Wu=!1,t))))));return this.Hu=e,e}enqueueAfterDelay(t,e,n){this.Ju(),this.zu.indexOf(t)>-1&&(e=0);const i=wf.createAndSchedule(this,t,e,n,(t=>this.Xu(t)));return this.Uu.push(i),i}Ju(){this.Ku&&ka(47125,{ec:Fp(this.Ku)})}verifyOperationInProgress(){}async tc(){let t;do{t=this.Hu,await t}while(t!==this.Hu)}nc(t){for(const e of this.Uu)if(e.timerId===t)return!0;return!1}rc(t){return this.tc().then((()=>{this.Uu.sort(((t,e)=>t.targetTimeMs-e.targetTimeMs));for(const e of this.Uu)if(e.skipDelay(),"all"!==t&&e.timerId===t)break;return this.tc()}))}sc(t){this.zu.push(t)}Xu(t){const e=this.Uu.indexOf(t);this.Uu.splice(e,1)}}function Fp(t){let e=t.message||"";return t.stack&&(e=t.stack.includes(t.message)?t.stack:t.message+"\n"+t.stack),e}class Bp extends Ap{constructor(t,e,n,i){super(t,e,n,i),this.type="firestore",this._queue=new Vp,this._persistenceKey=(null==i?void 0:i.name)||"[DEFAULT]"}async _terminate(){if(this._firestoreClient){const t=this._firestoreClient.terminate();this._queue=new Vp(t),this._firestoreClient=void 0,await t}}}function jp(t,e){const n="object"==typeof t?t:function(t=Mo){const e=Po.get(t);if(!e&&t===Mo&&_s())return Ho();if(!e)throw Uo.create("no-app",{appName:t});return e}(),i="string"==typeof t?t:Vc,r=function(t,e){const n=t.container.getProvider("heartbeat").getImmediate({optional:!0});return n&&n.triggerHeartbeat(),t.container.getProvider(e)}(n,"firestore").getImmediate({identifier:i});if(!r._initialized){const t=ws("firestore");t&&Lp(r,...t)}return r}function Up(t){if(t._terminated)throw new Ia(Sa.FAILED_PRECONDITION,"The client has already been terminated.");return t._firestoreClient||function(t){var e,n,i;const r=t._freezeSettings(),s=(o=t._databaseId,a=(null===(e=t._app)||void 0===e?void 0:e.options.appId)||"",c=t._persistenceKey,l=r,new Pc(o,a,c,l.host,l.ssl,l.experimentalForceLongPolling,l.experimentalAutoDetectLongPolling,wp(l.experimentalLongPollingOptions),l.useFetchStreams));var o,a,c,l;t._componentsProvider||(null===(n=r.localCache)||void 0===n?void 0:n._offlineComponentProvider)&&(null===(i=r.localCache)||void 0===i?void 0:i._onlineComponentProvider)&&(t._componentsProvider={_offline:r.localCache._offlineComponentProvider,_online:r.localCache._onlineComponentProvider}),t._firestoreClient=new pp(t._authCredentials,t._appCheckCredentials,t._queue,s,t._componentsProvider&&function(t){const e=null==t?void 0:t._online.build();return{_offline:null==t?void 0:t._offline.build(e),_online:e}}(t._componentsProvider))}
/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */(t),t._firestoreClient}class qp{constructor(t){this._byteString=t}static fromBase64String(t){try{return new qp(Cc.fromBase64String(t))}catch(e){throw new Ia(Sa.INVALID_ARGUMENT,"Failed to construct data from Base64 string: "+e)}}static fromUint8Array(t){return new qp(Cc.fromUint8Array(t))}toBase64(){return this._byteString.toBase64()}toUint8Array(){return this._byteString.toUint8Array()}toString(){return"Bytes(base64: "+this.toBase64()+")"}isEqual(t){return this._byteString.isEqual(t._byteString)}}
/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class Hp{constructor(...t){for(let e=0;e<t.length;++e)if(0===t[e].length)throw new Ia(Sa.INVALID_ARGUMENT,"Invalid field name at argument $(i + 1). Field names must not be empty.");this._internalPath=new tc(t)}isEqual(t){return this._internalPath.isEqual(t._internalPath)}}
/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class zp{constructor(t){this._methodName=t}}
/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class $p{constructor(t,e){if(!isFinite(t)||t<-90||t>90)throw new Ia(Sa.INVALID_ARGUMENT,"Latitude must be a number between -90 and 90, but was: "+t);if(!isFinite(e)||e<-180||e>180)throw new Ia(Sa.INVALID_ARGUMENT,"Longitude must be a number between -180 and 180, but was: "+e);this._lat=t,this._long=e}get latitude(){return this._lat}get longitude(){return this._long}isEqual(t){return this._lat===t._lat&&this._long===t._long}toJSON(){return{latitude:this._lat,longitude:this._long}}_compareTo(t){return Ua(this._lat,t._lat)||Ua(this._long,t._long)}}
/**
 * @license
 * Copyright 2024 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class Kp{constructor(t){this._values=(t||[]).map((t=>t))}toArray(){return this._values.map((t=>t))}isEqual(t){return function(t,e){if(t.length!==e.length)return!1;for(let n=0;n<t.length;++n)if(t[n]!==e[n])return!1;return!0}(this._values,t._values)}}
/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const Gp=/^__.*__$/;class Wp{constructor(t,e,n){this.data=t,this.fieldMask=e,this.fieldTransforms=n}toMutation(t,e){return null!==this.fieldMask?new Au(t,this.data,this.fieldMask,e,this.fieldTransforms):new Du(t,this.data,e,this.fieldTransforms)}}function Qp(t){switch(t){case 0:case 2:case 1:return!0;case 3:case 4:return!1;default:throw ka(40011,{oc:t})}}class Yp{constructor(t,e,n,i,r,s){this.settings=t,this.databaseId=e,this.serializer=n,this.ignoreUndefinedProperties=i,void 0===r&&this._c(),this.fieldTransforms=r||[],this.fieldMask=s||[]}get path(){return this.settings.path}get oc(){return this.settings.oc}ac(t){return new Yp(Object.assign(Object.assign({},this.settings),t),this.databaseId,this.serializer,this.ignoreUndefinedProperties,this.fieldTransforms,this.fieldMask)}uc(t){var e;const n=null===(e=this.path)||void 0===e?void 0:e.child(t),i=this.ac({path:n,cc:!1});return i.lc(t),i}hc(t){var e;const n=null===(e=this.path)||void 0===e?void 0:e.child(t),i=this.ac({path:n,cc:!1});return i._c(),i}Pc(t){return this.ac({path:void 0,cc:!0})}Tc(t){return ag(t,this.settings.methodName,this.settings.Ic||!1,this.path,this.settings.Ec)}contains(t){return void 0!==this.fieldMask.find((e=>t.isPrefixOf(e)))||void 0!==this.fieldTransforms.find((e=>t.isPrefixOf(e.field)))}_c(){if(this.path)for(let t=0;t<this.path.length;t++)this.lc(this.path.get(t))}lc(t){if(0===t.length)throw this.Tc("Document fields must not be empty");if(Qp(this.oc)&&Gp.test(t))throw this.Tc('Document fields cannot begin and end with "__"')}}class Xp{constructor(t,e,n){this.databaseId=t,this.ignoreUndefinedProperties=e,this.serializer=n||Md(t)}dc(t,e,n,i=!1){return new Yp({oc:t,methodName:e,Ec:n,path:tc.emptyPath(),cc:!1,Ic:i},this.databaseId,this.serializer,this.ignoreUndefinedProperties)}}function Jp(t){const e=t._freezeSettings(),n=Md(t._databaseId);return new Xp(t._databaseId,!!e.ignoreUndefinedProperties,n)}function Zp(t,e,n,i,r,s={}){const o=t.dc(s.merge||s.mergeFields?2:0,e,n,r);ig("Data must be an object, but it was:",o,i);const a=eg(i,o);let c,l;if(s.merge)c=new Ec(o.fieldMask),l=o.fieldTransforms;else if(s.mergeFields){const t=[];for(const i of s.mergeFields){const r=rg(e,i,n);if(!o.contains(r))throw new Ia(Sa.INVALID_ARGUMENT,`Field '${r}' is specified in your field mask but missing from your input data.`);cg(t,r)||t.push(r)}c=new Ec(t),l=o.fieldTransforms.filter((t=>c.covers(t.field)))}else c=null,l=o.fieldTransforms;return new Wp(new sl(a),c,l)}function tg(t,e){if(ng(t=Ds(t)))return ig("Unsupported field value:",e,t),eg(t,e);if(t instanceof zp)return function(t,e){if(!Qp(e.oc))throw e.Tc(`${t._methodName}() can only be used with update() and set()`);if(!e.path)throw e.Tc(`${t._methodName}() is not currently supported inside arrays`);const n=t._toFieldTransform(e);n&&e.fieldTransforms.push(n)}(t,e),null;if(void 0===t&&e.ignoreUndefinedProperties)return null;if(e.path&&e.fieldMask.push(e.path),t instanceof Array){if(e.settings.cc&&4!==e.oc)throw e.Tc("Nested arrays are not supported");return function(t,e){const n=[];let i=0;for(const r of t){let t=tg(r,e.Pc(i));null==t&&(t={nullValue:"NULL_VALUE"}),n.push(t),i++}return{arrayValue:{values:n}}}(t,e)}return function(t,e){if(null===(t=Ds(t)))return{nullValue:"NULL_VALUE"};if("number"==typeof t)return au(e.serializer,t);if("boolean"==typeof t)return{booleanValue:t};if("string"==typeof t)return{stringValue:t};if(t instanceof Date){const n=Wa.fromDate(t);return{timestampValue:ch(e.serializer,n)}}if(t instanceof Wa){const n=new Wa(t.seconds,1e3*Math.floor(t.nanoseconds/1e3));return{timestampValue:ch(e.serializer,n)}}if(t instanceof $p)return{geoPointValue:{latitude:t.latitude,longitude:t.longitude}};if(t instanceof qp)return{bytesValue:lh(e.serializer,t._byteString)};if(t instanceof Np){const n=e.databaseId,i=t.firestore._databaseId;if(!i.isEqual(n))throw e.Tc(`Document reference is for database ${i.projectId}/${i.database} but should be for database ${n.projectId}/${n.database}`);return{referenceValue:dh(t.firestore._databaseId||e.databaseId,t._key.path)}}if(t instanceof Kp)return n=t,i=e,{mapValue:{fields:{[Bc]:{stringValue:qc},[Hc]:{arrayValue:{values:n.toArray().map((t=>{if("number"!=typeof t)throw i.Tc("VectorValues must only contain numeric values.");return su(i.serializer,t)}))}}}}};var n,i;throw e.Tc(`Unsupported field value: ${xp(t)}`)}(t,e)}function eg(t,e){const n={};return mc(t)?e.path&&e.path.length>0&&e.fieldMask.push(e.path):gc(t,((t,i)=>{const r=tg(i,e.uc(t));null!=r&&(n[t]=r)})),{mapValue:{fields:n}}}function ng(t){return!("object"!=typeof t||null===t||t instanceof Array||t instanceof Date||t instanceof Wa||t instanceof $p||t instanceof qp||t instanceof Np||t instanceof zp||t instanceof Kp)}function ig(t,e,n){if(!ng(n)||("object"!=typeof(i=n)||null===i||Object.getPrototypeOf(i)!==Object.prototype&&null!==Object.getPrototypeOf(i))){const i=xp(n);throw"an object"===i?e.Tc(t+" a custom object"):e.Tc(t+" "+i)}var i}function rg(t,e,n){if((e=Ds(e))instanceof Hp)return e._internalPath;if("string"==typeof e)return og(t,e);throw ag("Field path arguments must be of type string or ",t,!1,void 0,n)}const sg=new RegExp("[~\\*/\\[\\]]");function og(t,e,n){if(e.search(sg)>=0)throw ag(`Invalid field path (${e}). Paths must not contain '~', '*', '/', '[', or ']'`,t,!1,void 0,n);try{return new Hp(...e.split("."))._internalPath}catch(i){throw ag(`Invalid field path (${e}). Paths must not be empty, begin with '.', end with '.', or contain '..'`,t,!1,void 0,n)}}function ag(t,e,n,i,r){const s=i&&!i.isEmpty(),o=void 0!==r;let a=`Function ${e}() called with invalid data`;n&&(a+=" (via `toFirestore()`)"),a+=". ";let c="";return(s||o)&&(c+=" (found",s&&(c+=` in field ${i}`),o&&(c+=` in document ${r}`),c+=")"),new Ia(Sa.INVALID_ARGUMENT,a+t+c)}function cg(t,e){return t.some((t=>t.isEqual(e)))}
/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class lg{constructor(t,e,n,i,r){this._firestore=t,this._userDataWriter=e,this._key=n,this._document=i,this._converter=r}get id(){return this._key.path.lastSegment()}get ref(){return new Np(this._firestore,this._converter,this._key)}exists(){return null!==this._document}data(){if(this._document){if(this._converter){const t=new ug(this._firestore,this._userDataWriter,this._key,this._document,null);return this._converter.fromFirestore(t)}return this._userDataWriter.convertValue(this._document.data.value)}}get(t){if(this._document){const e=this._document.data.field(hg("DocumentSnapshot.get",t));if(null!==e)return this._userDataWriter.convertValue(e)}}}class ug extends lg{data(){return super.data()}}function hg(t,e){return"string"==typeof e?og(t,e):e instanceof Hp?e._internalPath:e._delegate._internalPath}
/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class dg{convertValue(t,e="none"){switch(zc(t)){case 0:return null;case 1:return t.booleanValue;case 2:return Sc(t.integerValue||t.doubleValue);case 3:return this.convertTimestamp(t.timestampValue);case 4:return this.convertServerTimestamp(t,e);case 5:return t.stringValue;case 6:return this.convertBytes(Ic(t.bytesValue));case 7:return this.convertReference(t.referenceValue);case 8:return this.convertGeoPoint(t.geoPointValue);case 9:return this.convertArray(t.arrayValue,e);case 11:return this.convertObject(t.mapValue,e);case 10:return this.convertVectorValue(t.mapValue);default:throw ka(62114,{value:t})}}convertObject(t,e){return this.convertObjectMap(t.fields,e)}convertObjectMap(t,e="none"){const n={};return gc(t,((t,i)=>{n[t]=this.convertValue(i,e)})),n}convertVectorValue(t){var e,n,i;const r=null===(i=null===(n=null===(e=t.fields)||void 0===e?void 0:e[Hc].arrayValue)||void 0===n?void 0:n.values)||void 0===i?void 0:i.map((t=>Sc(t.doubleValue)));return new Kp(r)}convertGeoPoint(t){return new $p(Sc(t.latitude),Sc(t.longitude))}convertArray(t,e){return(t.values||[]).map((t=>this.convertValue(t,e)))}convertServerTimestamp(t,e){switch(e){case"previous":const n=Mc(t);return null==n?null:this.convertValue(n,e);case"estimate":return this.convertTimestamp(Rc(t));default:return null}}convertTimestamp(t){const e=Tc(t);return new Wa(e.seconds,e.nanos)}convertDocumentKey(t,e){const n=Ja.fromString(t);xa(Oh(n),9688,{name:t});const i=new Fc(n.get(1),n.get(3)),r=new ec(n.popFirst(5));return i.isEqual(e)||wa(`Document ${r} contains a document reference within a different database (${i.projectId}/${i.database}) which is not supported. It will be treated as a reference in the current database (${e.projectId}/${e.database}) instead.`),r}}
/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */
/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */
class fg{constructor(t,e){this.hasPendingWrites=t,this.fromCache=e}isEqual(t){return this.hasPendingWrites===t.hasPendingWrites&&this.fromCache===t.fromCache}}class pg extends lg{constructor(t,e,n,i,r,s){super(t,e,n,i,s),this._firestore=t,this._firestoreImpl=t,this.metadata=r}exists(){return super.exists()}data(t={}){if(this._document){if(this._converter){const e=new gg(this._firestore,this._userDataWriter,this._key,this._document,this.metadata,null);return this._converter.fromFirestore(e,t)}return this._userDataWriter.convertValue(this._document.data.value,t.serverTimestamps)}}get(t,e={}){if(this._document){const n=this._document.data.field(hg("DocumentSnapshot.get",t));if(null!==n)return this._userDataWriter.convertValue(n,e.serverTimestamps)}}}class gg extends pg{data(t={}){return super.data(t)}}class mg{constructor(t,e,n,i){this._firestore=t,this._userDataWriter=e,this._snapshot=i,this.metadata=new fg(i.hasPendingWrites,i.fromCache),this.query=n}get docs(){const t=[];return this.forEach((e=>t.push(e))),t}get size(){return this._snapshot.docs.size}get empty(){return 0===this.size}forEach(t,e){this._snapshot.docs.forEach((n=>{t.call(e,new gg(this._firestore,this._userDataWriter,n.key,n,new fg(this._snapshot.mutatedKeys.has(n.key),this._snapshot.fromCache),this.query.converter))}))}docChanges(t={}){const e=!!t.includeMetadataChanges;if(e&&this._snapshot.excludesMetadataChanges)throw new Ia(Sa.INVALID_ARGUMENT,"To include metadata changes with your document changes, you must also pass { includeMetadataChanges:true } to onSnapshot().");return this._cachedChanges&&this._cachedChangesIncludeMetadataChanges===e||(this._cachedChanges=function(t,e){if(t._snapshot.oldDocs.isEmpty()){let e=0;return t._snapshot.docChanges.map((n=>{const i=new gg(t._firestore,t._userDataWriter,n.doc.key,n.doc,new fg(t._snapshot.mutatedKeys.has(n.doc.key),t._snapshot.fromCache),t.query.converter);return n.doc,{type:"added",doc:i,oldIndex:-1,newIndex:e++}}))}{let n=t._snapshot.oldDocs;return t._snapshot.docChanges.filter((t=>e||3!==t.type)).map((e=>{const i=new gg(t._firestore,t._userDataWriter,e.doc.key,e.doc,new fg(t._snapshot.mutatedKeys.has(e.doc.key),t._snapshot.fromCache),t.query.converter);let r=-1,s=-1;return 0!==e.type&&(r=n.indexOf(e.doc.key),n=n.delete(e.doc.key)),1!==e.type&&(n=n.add(e.doc),s=n.indexOf(e.doc.key)),{type:yg(e.type),doc:i,oldIndex:r,newIndex:s}}))}}(this,e),this._cachedChangesIncludeMetadataChanges=e),this._cachedChanges}}function yg(t){switch(t){case 0:return"added";case 2:case 3:return"modified";case 1:return"removed";default:return ka(61501,{type:t})}}class vg extends dg{constructor(t){super(),this.firestore=t}convertBytes(t){return new qp(t)}convertReference(t){const e=this.convertDocumentKey(t,this.firestore._databaseId);return new Np(this.firestore,null,e)}}function bg(t){t=Tp(t,Op);const e=Tp(t.firestore,Bp),n=Up(e),i=new vg(e);return function(t){if("L"===t.limitType&&0===t.explicitOrderBy.length)throw new Ia(Sa.UNIMPLEMENTED,"limitToLast() queries require specifying at least one orderBy() clause")}(t._query),bp(n,t._query).then((n=>new mg(e,i,t,n)))}function wg(t,e){const n=Tp(t.firestore,Bp),i=function(t,e,...n){if(t=Ds(t),1===arguments.length&&(e=ja.newId()),Ep("doc","path",e),t instanceof Ap){const i=Ja.fromString(e,...n);return kp(i),new Np(t,null,new ec(i))}{if(!(t instanceof Np||t instanceof Mp))throw new Ia(Sa.INVALID_ARGUMENT,"Expected first argument to collection() to be a CollectionReference, a DocumentReference or FirebaseFirestore");const i=t._path.child(Ja.fromString(e,...n));return kp(i),new Np(t.firestore,t instanceof Mp?t.converter:null,new ec(i))}}(t),r=function(t,e){let n;return n=t?t.toFirestore(e):e,n}(t.converter,e);return function(t,e){return function(t,e){const n=new Da;return t.asyncQueue.enqueueAndForget((async()=>Kf(await function(t){return yp(t).then((t=>t.syncEngine))}(t),e,n))),n.promise}(Up(t),e)}(n,[Zp(Jp(t.firestore),"addDoc",i._key,r,null!==t.converter,{}).toMutation(i._key,_u.exists(!1))]).then((()=>i))}!function(t,e=!0){ma="11.6.1",jo(new As("firestore",((t,{instanceIdentifier:n,options:i})=>{const r=t.getProvider("app").getImmediate(),s=new Bp(new Na(t.getProvider("auth-internal")),new Va(r,t.getProvider("app-check-internal")),function(t,e){if(!Object.prototype.hasOwnProperty.apply(t.options,["projectId"]))throw new Ia(Sa.INVALID_ARGUMENT,'"projectId" not provided in firebase.initializeApp.');return new Fc(t.options.projectId,e)}(r,n),r);return i=Object.assign({useFetchStreams:e},i),s._setSettings(i),s}),"PUBLIC").setMultipleInstances(!0)),zo(fa,pa,t),zo(fa,pa,"esm2017")}();
/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */
zo("firebase","11.6.1","app");const _g=Ho({apiKey:"AIzaSyDAVmdqQvzFruNpOYJO-ViqP9sP1K-XmtE",authDomain:"find-a-coach-2b9ed.firebaseapp.com",projectId:"find-a-coach-2b9ed",storageBucket:"find-a-coach-2b9ed.appspot.com",messagingSenderId:"662261321598",appId:"1:662261321598:web:ca10ac19431a6046bf6d2f"}),Eg=t=>new Date(1e3*t.seconds+t.nanoseconds/1e6),kg=new ht({modules:{Coach:{namespaced:!0,state:{coaches:[],selectedProfessions:[],isLoading:!1,error:null,shouldAnimateInitialLoad:!0,selectedCoach:null,isLoaded:!1},mutations:{SET_COACHES(t,e){t.coaches=e,t.isLoaded=!0},SET_SELECTED_COACH(t,e){t.selectedCoach=e},SET_SELECTED_PROFESSIONS(t,e){t.selectedProfessions=e},SET_LOADING(t,e){t.isLoading=e},SET_ERROR(t,e){t.error&&(t.error=e)},DISABLE_INITIAL_LOAD_ANIMATION(t){t.shouldAnimateInitialLoad=!1},ADD_COACH(t,e){t.coaches.push(e)}},actions:{async fetchCoaches({commit:t,state:e}){var n;if(!(e.isLoaded&&e.coaches.length>0)||e.selectedCoach){t("SET_SELECTED_PROFESSIONS",["Frontend","Backend","Full stack"]),t("SET_LOADING",!0),t("SET_ERROR",null);try{const i=jp(_g),r=(await bg(Rp(i,"coaches"))).docs.map((t=>t.data()));if(t("SET_COACHES",r),null==(n=e.selectedCoach)?void 0:n.id){const n=r.find((t=>{var n;return String(t.id)===String(null==(n=e.selectedCoach)?void 0:n.id)}));n&&t("SET_SELECTED_COACH",n)}}catch(i){t("SET_ERROR","Failed to fetch coaches")}finally{t("SET_LOADING",!1)}}},updateSelectedProfessions({commit:t},e){t("SET_SELECTED_PROFESSIONS",e)},async fetchCoachById({commit:t,state:e},n){t("SET_LOADING",!0),t("SET_ERROR",null);try{let i=e.coaches.find((t=>String(t.id)===n));if(!i){const e=jp(_g),r=(await bg(Rp(e,"coaches"))).docs.map((t=>t.data()));if(0===r.length)throw new Error("No coaches found");if(t("SET_COACHES",r),i=r.find((t=>String(t.id)===n)),!i)throw new Error("Coach not found")}t("SET_SELECTED_COACH",i),t("SET_ERROR",null)}catch(i){t("SET_ERROR",i instanceof Error?i.message:"Failed to find/fetch coach details"),t("SET_SELECTED_COACH",null)}finally{t("SET_LOADING",!1)}},disableInitialLoadAnimation({commit:t}){t("DISABLE_INITIAL_LOAD_ANIMATION")},async registerCoach({commit:t},e){t("SET_LOADING",!0),t("SET_ERROR",null);try{const n=Rp(jp(_g),"coaches"),i={id:Math.floor(1e6*Math.random()),firstName:e.firstName,lastName:e.lastName,description:e.description,pricePerHour:e.hourlyRate,skills:e.skills};await wg(n,i);return t("ADD_COACH",i),i}catch(n){throw t("SET_ERROR",n instanceof Error?n.message:"Failed to register coach"),n}finally{t("SET_LOADING",!1)}}},getters:{allCoaches:t=>t.coaches,selectedCoach:t=>t.selectedCoach,filteredCoaches:t=>t.isLoaded?t.coaches.filter((e=>e.skills.some((e=>t.selectedProfessions.some((t=>t.toLowerCase()===e.toLowerCase())))))):[],isCoachesLoaded:t=>t.isLoaded,shouldAnimateInitialLoad:t=>t.shouldAnimateInitialLoad}},Request:{namespaced:!0,state:{requests:[],isLoading:!1,error:null},mutations:{SET_REQUESTS(t,e){t.requests=e.map((t=>{const e=Eg(t.requestDate),n=e.toLocaleDateString("en-US",{year:"numeric",month:"long",day:"numeric"});return{...t,requestDate:e,formattedDate:n}}))},SET_LOADING(t,e){t.isLoading=e},SET_ERROR(t,e){t.error=e},ADD_REQUEST(t,e){const n=Eg(e.requestDate),i=n.toLocaleDateString("en-US",{year:"numeric",month:"long",day:"numeric"}),r={...e,requestDate:n,formattedDate:i};t.requests.push(r)}},actions:{async fetchRequests({commit:t,state:e}){if(!(e.requests.length>0)){t("SET_LOADING",!0);try{const e=jp(_g),n=await bg(Rp(e,"requests"));t("SET_REQUESTS",n.docs.map((t=>t.data())))}catch(n){t("SET_ERROR",n instanceof Error?n.message:"Failed to fetch requests")}finally{t("SET_LOADING",!1)}}},async createRequest({commit:t,state:e},n){t("SET_LOADING",!0),t("SET_ERROR",null);try{const i=Rp(jp(_g),"requests"),r={id:e.requests.length+1,firstname:n.firstname,lastname:n.lastname,email:n.email,message:n.message,requestDate:Wa.fromDate(new Date),requestedBy:n.fullname},s=await wg(i,r),o={...r,id:s.id};return t("ADD_REQUEST",o),o}catch(i){throw t("SET_ERROR",i instanceof Error?i.message:"Failed to create request"),i}finally{t("SET_LOADING",!1)}}},getters:{requests:t=>t.requests,isLoading:t=>t.isLoading,error:t=>t.error,hasRequests:t=>t.requests.length>0,requestsCount:t=>t.requests.length,sortedRequests:t=>[...t.requests].sort(((t,e)=>e.requestDate.getTime()-t.requestDate.getTime()))}}}});const Cg={class:"hover:shadow-md hover:shadow-gray-700/30 transition-all duration-300"};const xg=rs({name:"BaseCard",props:{customClass:{type:String,default:""},roundedClass:{type:String,default:"rounded-sm"}}},[["render",function(t,e,n,s,o,a){return r(),i("div",{class:x(["mx-2 mt-2 bg-gray-800 shadow-md hover:shadow-lg hover:shadow-gray-700/50 hover:bg-gray-700 transition-all duration-300 p-4",n.roundedClass,n.customClass])},[v("div",Cg,[l(t.$slots,"default")])],2)}]]),Tg=t({name:"BaseButton",props:{variant:{type:String,default:"primary",validator:t=>["primary","success","danger","warning","info"].includes(t)},disabled:{type:Boolean,default:!1}},emits:["click"],computed:{colorClasses(){return{primary:"bg-blue-600 hover:bg-blue-700 dark:bg-blue-600 dark:hover:bg-blue-700 ",success:"bg-green-600 hover:bg-green-700 focus:ring-green-300 dark:bg-green-600 dark:hover:bg-green-700 dark:focus:ring-green-800",danger:"bg-red-600 hover:bg-red-700 focus:ring-red-300 dark:bg-red-600 dark:hover:bg-red-700 dark:focus:ring-red-800",warning:"bg-yellow-600 hover:bg-yellow-700 focus:ring-yellow-300 dark:bg-yellow-600 dark:hover:bg-yellow-700 dark:focus:ring-yellow-800",info:"bg-gray-500 hover:bg-gray-600 focus:ring-gray-300 dark:bg-gray-500 dark:hover:bg-gray-600 dark:focus:ring-gray-800"}[this.variant]}}}),Sg=["disabled"];const Ig=rs(Tg,[["render",function(t,e,n,s,o,a){return r(),i("button",{class:x(["  sm:mx-2 lg:mx-2 inline-flex items-center px-5 md:px-6 lg:px-4 py-2 text-sm font-medium text-white rounded-lg focus:ring-4 focus:outline-none transition-all duration-200",t.colorClasses,{"opacity-50 cursor-not-allowed":t.disabled}]),disabled:t.disabled,onClick:e[0]||(e[0]=e=>t.$emit("click",e))},[l(t.$slots,"icon",{},void 0,!0),l(t.$slots,"default",{},void 0,!0)],10,Sg)}],["__scopeId","data-v-ed1c25ae"]]),Dg={role:"status",class:"flex justify-center items-center"};const Ag=rs({name:"Loading"},[["render",function(t,e,n,s,o,a){return r(),i("div",Dg,e[0]||(e[0]=[v("svg",{"aria-hidden":"true",class:"inline w-8 h-8 text-gray-200 animate-spin dark:text-gray-600 fill-green-500",viewBox:"0 0 100 101",fill:"none",xmlns:"http://www.w3.org/2000/svg"},[v("path",{d:"M100 50.5908C100 78.2051 77.6142 100.591 50 100.591C22.3858 100.591 0 78.2051 0 50.5908C0 22.9766 22.3858 0.59082 50 0.59082C77.6142 0.59082 100 22.9766 100 50.5908ZM9.08144 50.5908C9.08144 73.1895 27.4013 91.5094 50 91.5094C72.5987 91.5094 90.9186 73.1895 90.9186 50.5908C90.9186 27.9921 72.5987 9.67226 50 9.67226C27.4013 9.67226 9.08144 27.9921 9.08144 50.5908Z",fill:"currentColor"}),v("path",{d:"M93.9676 39.0409C96.393 38.4038 97.8624 35.9116 97.0079 33.5539C95.2932 28.8227 92.871 24.3692 89.8167 20.348C85.8452 15.1192 80.8826 10.7238 75.2124 7.41289C69.5422 4.10194 63.2754 1.94025 56.7698 1.05124C51.7666 0.367541 46.6976 0.446843 41.7345 1.27873C39.2613 1.69328 37.813 4.19778 38.4501 6.62326C39.0873 9.04874 41.5694 10.4717 44.0505 10.1071C47.8511 9.54855 51.7191 9.52689 55.5402 10.0491C60.8642 10.7766 65.9928 12.5457 70.6331 15.2552C75.2735 17.9648 79.3347 21.5619 82.5849 25.841C84.9175 28.9121 86.7997 32.2913 88.1811 35.8758C89.083 38.2158 91.5421 39.6781 93.9676 39.0409Z",fill:"currentFill"})],-1),v("span",{class:"sr-only"},"Loading...",-1)]))}]]),Lg={name:"Skills",props:{skills:{type:Array,required:!0},isTitle:{type:Boolean,default:!1}}},Og={class:"mb-2 md:mb-8"},Ng={key:0,class:"text-sm md:text-xl font-medium text-white mb-2 md:mb-4"},Mg={class:"flex flex-wrap gap-0.5 md:gap-2"};const Rg=rs(Lg,[["render",function(t,e,n,a,c,l){return r(),i("div",Og,[n.isTitle?(r(),i("h4",Ng," Expertise ")):T("",!0),v("div",Mg,[(r(!0),i(s,null,o(n.skills,(t=>(r(),i("span",{key:t,class:"relative bg-purple-100 text-purple-800 text-[8px] md:text-xs font-medium px-1 md:px-2.5 py-0.5 rounded-sm dark:bg-gray-700 dark:text-purple-400 border border-purple-400 hover:scale-105 transition-transform duration-200 truncate max-w-[60px] md:max-w-none"},h(t),1)))),128))])])}],["__scopeId","data-v-642d569b"]]),Pg=t({name:"ContactCoachModal",components:{Loading:Ag},inject:["showSuccessToast"],props:{isOpen:{type:Boolean,required:!0},coachFirstName:{type:String,required:!0},coachLastName:{type:String,required:!0}},data(){return{formData:{fullname:"",email:"",message:"",firstname:this.coachFirstName,lastname:this.coachLastName},isSubmitting:!1}},watch:{isOpen(t){document.body.style.overflow=t?"hidden":""}},beforeUnmount(){document.body.style.overflow=""},methods:{...gt("Request",["createRequest"]),closeModal(){this.clearForm(),this.$emit("close")},clearForm(){this.formData={fullname:"",email:"",message:"",firstname:this.coachFirstName,lastname:this.coachLastName}},async handleContactSubmit(){this.isSubmitting=!0;try{await this.createRequest(this.formData),this.showSuccessToast("Message sent successfully!"),this.clearForm(),this.closeModal(),this.$route.path.includes("coaches/")&&this.$router.go(-1)}catch(t){this.showSuccessToast("Failed to send message. Please try again.")}finally{this.isSubmitting=!1}}}}),Vg={key:0,class:"loading"},Fg={key:1,class:"bg-gray-900/90 backdrop-blur-sm rounded-lg p-4 md:p-6 w-full max-w-[90%] md:max-w-md border-2 border-gray-800 shadow-xl mx-auto"},Bg={class:"flex justify-between items-center mb-4"},jg={class:"flex justify-end space-x-3"},Ug=["disabled"];const qg=rs(Pg,[["render",function(t,e,n,s,o,a){const c=b("Loading");return t.isOpen?(r(),i("div",{key:0,class:"fixed inset-0 bg-gray-700/30 backdrop-blur-3xl flex items-center justify-center z-50 p-4 overflow-hidden",onClick:e[6]||(e[6]=D(((...e)=>t.closeModal&&t.closeModal(...e)),["self"]))},[t.isSubmitting?(r(),i("div",Vg,[w(c)])):(r(),i("div",Fg,[v("div",Bg,[e[8]||(e[8]=v("h3",{class:"text-lg md:text-xl font-semibold text-white"},"Contact Coach",-1)),v("button",{onClick:e[0]||(e[0]=(...e)=>t.closeModal&&t.closeModal(...e)),class:"text-gray-400 hover:text-white"},e[7]||(e[7]=[v("svg",{class:"w-5 h-5 md:w-6 md:h-6",fill:"none",stroke:"currentColor",viewBox:"0 0 24 24"},[v("path",{"stroke-linecap":"round","stroke-linejoin":"round","stroke-width":"2",d:"M6 18L18 6M6 6l12 12"})],-1)]))]),v("form",{onSubmit:e[5]||(e[5]=D(((...e)=>t.handleContactSubmit&&t.handleContactSubmit(...e)),["prevent"])),class:"space-y-3 md:space-y-4"},[v("div",null,[e[9]||(e[9]=v("label",{for:"fullname",class:"block text-sm font-medium text-gray-300 mb-1"},"Full Name",-1)),S(v("input",{type:"text",id:"fullname","onUpdate:modelValue":e[1]||(e[1]=e=>t.formData.fullname=e),class:"w-full px-3 py-2 bg-gray-700 border border-gray-600 rounded-md text-white focus:outline-none focus:ring-2 focus:ring-blue-500",required:""},null,512),[[I,t.formData.fullname]])]),v("div",null,[e[10]||(e[10]=v("label",{for:"email",class:"block text-sm font-medium text-gray-300 mb-1"},"Email",-1)),S(v("input",{type:"email",id:"email","onUpdate:modelValue":e[2]||(e[2]=e=>t.formData.email=e),class:"w-full px-3 py-2 bg-gray-700 border border-gray-600 rounded-md text-white focus:outline-none focus:ring-2 focus:ring-blue-500",required:""},null,512),[[I,t.formData.email]])]),v("div",null,[e[11]||(e[11]=v("label",{for:"message",class:"block text-sm font-medium text-gray-300 mb-1"},"Message",-1)),S(v("textarea",{id:"message","onUpdate:modelValue":e[3]||(e[3]=e=>t.formData.message=e),rows:"4",class:"w-full px-3 py-2 bg-gray-700 border border-gray-600 rounded-md text-white focus:outline-none focus:ring-2 focus:ring-blue-500",required:""},null,512),[[I,t.formData.message]])]),v("div",jg,[v("button",{type:"button",onClick:e[4]||(e[4]=(...e)=>t.closeModal&&t.closeModal(...e)),class:"px-3 py-1.5 md:px-4 md:py-2 text-sm font-medium text-gray-300 hover:text-white bg-gray-700 rounded-md hover:bg-gray-600 focus:outline-none focus:ring-2 focus:ring-gray-500"}," Cancel "),v("button",{type:"submit",class:"px-3 py-1.5 md:px-4 md:py-2 text-sm font-medium text-white bg-blue-600 rounded-md hover:bg-blue-700 focus:outline-none focus:ring-2 focus:ring-blue-500",disabled:t.isSubmitting},h(t.isSubmitting?"Sending...":"Send Message"),9,Ug)])],32)]))])):T("",!0)}],["__scopeId","data-v-a8bb5b3e"]]),Hg=t({name:"Toast",props:{message:{type:String,required:!0},isVisible:{type:Boolean,default:!1},id:{type:String,default:"toast-success"}},emits:["hide"],methods:{hide(){this.$emit("hide")}},mounted(){is()}}),zg=["id"],$g={class:"ml-3 text-sm font-normal"};const Kg=rs(Hg,[["render",function(t,e,n,s,o,a){return t.isVisible?(r(),i("div",{key:0,id:t.id,class:"fixed top-5 right-5 flex items-center w-full max-w-xs p-4 mb-4 text-gray-500 bg-white rounded-lg shadow dark:text-gray-400 dark:bg-gray-800",role:"alert"},[e[2]||(e[2]=v("div",{class:"inline-flex items-center justify-center flex-shrink-0 w-8 h-8 text-green-500 bg-green-100 rounded-lg dark:bg-green-800 dark:text-green-200"},[v("svg",{class:"w-5 h-5","aria-hidden":"true",xmlns:"http://www.w3.org/2000/svg",fill:"currentColor",viewBox:"0 0 20 20"},[v("path",{d:"M10 .5a9.5 9.5 0 1 0 9.5 9.5A9.51 9.51 0 0 0 10 .5Zm3.707 8.207-4 4a1 1 0 0 1-1.414 0l-2-2a1 1 0 0 1 1.414-1.414L9 10.586l3.293-3.293a1 1 0 0 1 1.414 1.414Z"})]),v("span",{class:"sr-only"},"Success icon")],-1)),v("div",$g,h(t.message),1),v("button",{type:"button",class:"ml-auto -mx-1.5 -my-1.5 bg-white text-gray-400 hover:text-gray-900 rounded-lg focus:ring-2 focus:ring-gray-300 p-1.5 hover:bg-gray-100 inline-flex items-center justify-center h-8 w-8 dark:text-gray-500 dark:hover:text-white dark:bg-gray-800 dark:hover:bg-gray-700",onClick:e[0]||(e[0]=(...e)=>t.hide&&t.hide(...e)),"aria-label":"Close"},e[1]||(e[1]=[v("span",{class:"sr-only"},"Close",-1),v("svg",{class:"w-3 h-3","aria-hidden":"true",xmlns:"http://www.w3.org/2000/svg",fill:"none",viewBox:"0 0 14 14"},[v("path",{stroke:"currentColor","stroke-linecap":"round","stroke-linejoin":"round","stroke-width":"2",d:"m1 1 6 6m0 0 6 6M7 7l6-6M7 7l-6 6"})],-1)]))],8,zg)):T("",!0)}]]),Gg=t({name:"CoachDetail",components:{BaseCard:xg,BaseButton:Ig,Loading:Ag,Skills:Rg,ContactCoachModal:qg,Toast:Kg},props:{id:{type:String,required:!0}},data:()=>({isContactModalOpen:!1,showToast:!1,toastMessage:""}),computed:{...ft("Coach",["isLoading","error"]),...pt("Coach",["selectedCoach"])},methods:{...gt("Coach",["fetchCoachById"]),goBack(){this.$router.push("/coaches")},openContactModal(){this.isContactModalOpen=!0},closeContactModal(){this.isContactModalOpen=!1},showSuccessToast(t){this.toastMessage=t,this.showToast=!0,setTimeout((()=>{this.showToast=!1}),5e3)}},provide(){return{showSuccessToast:this.showSuccessToast}},created(){this.fetchCoachById(this.id)}}),Wg={class:"container mx-auto px-4 py-6 space-y-6 max-w-3xl"},Qg={class:"mb-6"},Yg={key:0,class:"loading"},Xg={key:1,class:"error"},Jg={class:"flex flex-col items-center p-8"},Zg={class:"w-32 h-32 mb-4 rounded-full bg-gray-500 hover:bg-gray-600 flex items-center justify-center"},tm={class:"text-4xl text-white"},em={class:"text-3xl font-bold text-white mb-2"},nm={class:"text-xl text-gray-300"},im={class:"p-8"},rm={class:"text-gray-300 mb-8 leading-relaxed"},sm={class:"flex justify-center"},om={key:3,class:"error"};const am=rs(Gg,[["render",function(t,e,n,o,a,c){var l,d;const f=b("BaseButton"),p=b("Loading"),g=b("BaseCard"),m=b("Skills"),y=b("ContactCoachModal"),E=b("Toast");return r(),i("div",Wg,[v("div",Qg,[w(f,{variant:"info",onClick:t.goBack},{icon:_((()=>e[1]||(e[1]=[v("svg",{class:"w-4 h-4 mr-2",fill:"none",stroke:"currentColor",viewBox:"0 0 24 24"},[v("path",{"stroke-linecap":"round","stroke-linejoin":"round","stroke-width":"2",d:"M10 19l-7-7m0 0l7-7m-7 7h18"})],-1)]))),default:_((()=>[e[2]||(e[2]=u(" Back to Coaches "))])),_:1},8,["onClick"])]),t.isLoading?(r(),i("div",Yg,[w(p)])):t.error?(r(),i("div",Xg,h(t.error),1)):t.selectedCoach?(r(),i(s,{key:2},[w(g,null,{default:_((()=>[v("div",Jg,[v("div",Zg,[v("span",tm,h(t.selectedCoach.firstName[0])+h(t.selectedCoach.lastName[0]),1)]),v("h2",em,h(t.selectedCoach.firstName)+" "+h(t.selectedCoach.lastName),1),v("span",nm," $"+h(t.selectedCoach.pricePerHour)+"/hour ",1)])])),_:1}),w(g,null,{default:_((()=>[v("div",im,[e[5]||(e[5]=v("h3",{class:"text-2xl font-semibold text-white mb-6"}," About Me ",-1)),v("p",rm,h(t.selectedCoach.description||"No description available."),1),w(m,{skills:t.selectedCoach.skills,isTitle:!0},null,8,["skills"]),v("div",sm,[w(f,{variant:"success",onClick:t.openContactModal},{icon:_((()=>e[3]||(e[3]=[v("svg",{class:"w-4 h-4 mr-2",fill:"none",stroke:"currentColor",viewBox:"0 0 24 24"},[v("path",{"stroke-linecap":"round","stroke-linejoin":"round","stroke-width":"2",d:"M3 8l7.89 5.26a2 2 0 002.22 0L21 8M5 19h14a2 2 0 002-2V7a2 2 0 00-2-2H5a2 2 0 00-2 2v10a2 2 0 002 2z"})],-1)]))),default:_((()=>[e[4]||(e[4]=u(" Contact Coach "))])),_:1},8,["onClick"])])])])),_:1})],64)):(r(),i("div",om,"Coach not found")),w(y,{"is-open":t.isContactModalOpen,onClose:t.closeContactModal,coachFirstName:null==(l=t.selectedCoach)?void 0:l.firstName,coachLastName:null==(d=t.selectedCoach)?void 0:d.lastName},null,8,["is-open","onClose","coachFirstName","coachLastName"]),w(E,{"is-visible":t.showToast,message:t.toastMessage,onHide:e[0]||(e[0]=e=>t.showToast=!1)},null,8,["is-visible","message"])])}],["__scopeId","data-v-7c62fa27"]]),cm=t({name:"CoachesFilter",props:{professions:{type:Array,required:!0}},emits:["filter-professions"],methods:{toggleProfession(t){t.selected=!t.selected,this.$emit("filter-professions",this.professions)}}}),lm={class:"mx-auto w-full md:w-4/5"},um={class:"items-center w-full text-sm font-medium text-gray-900 bg-white border border-gray-200 rounded-lg flex flex-row dark:bg-gray-700 dark:border-gray-600 dark:text-white"},hm={class:"flex items-center justify-center sm:justify-start ps-3"},dm=["id","checked","onChange"],fm=["for"];const pm=rs(cm,[["render",function(t,e,n,a,c,l){return r(),i("div",lm,[(r(),i("div",{key:t.professions.map((t=>t.selected)).join(","),class:"block p-4 lg:p-6 bg-white border border-gray-200 rounded-lg shadow-sm hover:bg-gray-100 dark:bg-gray-800 dark:border-gray-700 dark:hover:bg-gray-700 w-full"},[e[0]||(e[0]=v("h3",{class:"mb-2 text-lg font-semibold text-gray-900 dark:text-white break-words"}," Filter by Profession ",-1)),v("ul",um,[(r(!0),i(s,null,o(t.professions,(e=>(r(),i("li",{key:e.id,class:"w-full border-b border-gray-200 last:border-b-0 md:border-b-0 md:border-r last:border-r-0 dark:border-gray-600"},[v("div",hm,[v("input",{id:e.name.toLowerCase()+"-checkbox-list",type:"checkbox",checked:e.selected,onChange:n=>t.toggleProfession(e),class:"w-4 h-4 text-blue-600 bg-gray-100 border-gray-300 rounded-sm focus:ring-blue-500 dark:focus:ring-blue-600 dark:ring-offset-gray-700 dark:focus:ring-offset-gray-700 focus:ring-2 dark:bg-gray-600 dark:border-gray-500"},null,40,dm),v("label",{for:e.name.toLowerCase()+"-checkbox-list",class:"w-full py-3 ms-2 font-medium text-gray-900 dark:text-gray-300 break-words text-center sm:text-left"},h(e.name),9,fm)])])))),128))])]))])}]]),gm={class:"flex justify-center"},mm={class:"w-full max-w-sm"},ym={class:"flex flex-col items-center p-1.5 md:p-6"},vm={class:"mb-0.5 md:mb-1 text-sm md:text-xl font-medium text-gray-900 dark:text-white truncate w-full text-center"},bm={class:"text-[10px] md:text-sm text-gray-500 dark:text-gray-400 mb-0.5 md:mb-2"},wm={class:"flex flex-wrap gap-0.5 md:gap-2 mb-1 md:mb-4 w-max"},_m={class:"flex flex-row lg:flex-col items-center gap-1"},Em={class:"flex gap-1 md:gap-3"};const km=t({name:"CoachesList",components:{CoachCard:rs({name:"CoachCard",components:{BaseCard:xg,Skills:Rg,BaseButton:Ig,ContactCoachModal:qg},props:{coach:{type:Object,required:!0}},data:()=>({isContactModalOpen:!1}),methods:{openContactModal(){this.isContactModalOpen=!0},closeContactModal(){this.isContactModalOpen=!1},viewDetails(){this.$router.push({name:"coach-detail",params:{id:this.coach.id}})}}},[["render",function(t,e,n,i,s,o){const a=b("Skills"),c=b("BaseButton"),l=b("ContactCoachModal"),u=b("BaseCard");return r(),k(u,{class:"coach-item"},{default:_((()=>[v("div",gm,[v("div",mm,[v("div",ym,[v("h5",vm,h(n.coach.firstName)+" "+h(n.coach.lastName),1),v("span",bm," $"+h(n.coach.pricePerHour)+"/h ",1),v("div",wm,[v("span",_m,[w(a,{skills:n.coach.skills,title:!0},null,8,["skills"])])]),v("div",Em,[w(c,{variant:"success",onClick:o.openContactModal,class:"text-[10px] md:text-base py-0.5 md:py-1 flex flex-col items-center"},{icon:_((()=>e[0]||(e[0]=[v("svg",{class:"w-4 h-4 lg:hidden",fill:"none",stroke:"currentColor",viewBox:"0 0 24 24"},[v("path",{"stroke-linecap":"round","stroke-linejoin":"round","stroke-width":"2",d:"M3 8l7.89 5.26a2 2 0 002.22 0L21 8M5 19h14a2 2 0 002-2V7a2 2 0 00-2-2H5a2 2 0 00-2 2v10a2 2 0 002 2z"})],-1)]))),default:_((()=>[e[1]||(e[1]=v("span",{class:"text-[8px] lg:hidden"},"Contact",-1)),e[2]||(e[2]=v("span",{class:"hidden lg:inline"},"Contact",-1))])),_:1},8,["onClick"]),w(c,{variant:"info",onClick:o.viewDetails,class:"text-[8px] md:text-base py-0.5 md:py-1 flex flex-col items-center"},{icon:_((()=>e[3]||(e[3]=[v("svg",{class:"w-4 h-4 lg:hidden",fill:"none",stroke:"currentColor",viewBox:"0 0 24 24"},[v("path",{"stroke-linecap":"round","stroke-linejoin":"round","stroke-width":"2",d:"M13 16h-1v-4h-1m1-4h.01M21 12a9 9 0 11-18 0 9 9 0 0118 0z"})],-1)]))),default:_((()=>[e[4]||(e[4]=v("span",{class:"text-[8px] lg:hidden"},"Info",-1)),e[5]||(e[5]=v("span",{class:"hidden lg:inline"},"Info",-1))])),_:1},8,["onClick"])])])])]),w(l,{isOpen:s.isContactModalOpen,coachFirstName:n.coach.firstName,coachLastName:n.coach.lastName,onClose:o.closeContactModal},null,8,["isOpen","coachFirstName","coachLastName","onClose"])])),_:1})}],["__scopeId","data-v-34833cda"]])},props:{coaches:{type:Array,required:!0}}}),Cm={class:"container mx-auto px-1 md:px-4 rounded-lg max-w-full lg:max-w-11/12"};const xm=t({name:"CoachesContent",components:{CoachesList:rs(km,[["render",function(t,e,n,a,c,l){const u=b("CoachCard");return r(),i("div",Cm,[w(A,{name:"list",tag:"div",class:"grid grid-cols-2 sm:grid-cols-3 lg:grid-cols-3 p-0.5 md:p-2 xl:grid-cols-4 gap-1 md:gap-4 border-2 border-gray-800/10 rounded-lg"},{default:_((()=>[(r(!0),i(s,null,o(t.coaches,(t=>(r(),k(u,{key:t.id,coach:t,class:"coach-item"},null,8,["coach"])))),128))])),_:1})])}],["__scopeId","data-v-966e7d8a"]]),Loading:Ag},props:{isLoading:{type:Boolean,required:!0},error:{type:String,default:null},coaches:{type:Array,required:!0},refreshKey:{type:Number,required:!0}}}),Tm={key:1,class:"error"};const Sm=rs(xm,[["render",function(t,e,n,s,o,a){const c=b("Loading"),l=b("CoachesList");return r(),i("div",null,[w(E,{name:"fade",mode:"out-in"},{default:_((()=>[t.isLoading?(r(),k(c,{key:0})):t.error?(r(),i("div",Tm,h(t.error),1)):t.coaches&&t.coaches.length>0?(r(),k(l,{key:t.refreshKey,coaches:t.coaches},null,8,["coaches"])):T("",!0)])),_:1})])}],["__scopeId","data-v-cd852900"]]),Im=t({name:"CoachesActions",emits:["register-coach","refresh"],methods:{...gt("Coach",["fetchCoaches"]),refreshCoaches(){this.$emit("refresh")},registerCoach(){this.$emit("register-coach")}}}),Dm={class:"flex flex-row justify-center w-full gap-4 items-center"};const Am=rs(Im,[["render",function(t,e,n,s,o,a){const c=b("BaseButton");return r(),i("div",Dm,[w(c,{variant:"primary",onClick:t.refreshCoaches,class:"w-full md:flex-1 justify-center"},{icon:_((()=>e[0]||(e[0]=[v("svg",{class:"w-6 h-6 md:w-4 md:h-4 md:mr-2",fill:"none",stroke:"currentColor",viewBox:"0 0 24 24"},[v("path",{"stroke-linecap":"round","stroke-linejoin":"round","stroke-width":"2",d:"M4 4v5h.582m15.356 2A8.001 8.001 0 004.582 9m0 0H9m11 11v-5h-.581m0 0a8.003 8.003 0 01-15.357-2m15.357 2H15"})],-1)]))),default:_((()=>[e[1]||(e[1]=v("span",{class:"hidden md:inline"},"Refresh",-1))])),_:1},8,["onClick"]),w(c,{variant:"success",onClick:t.registerCoach,class:"w-full md:flex-1 justify-center"},{icon:_((()=>e[2]||(e[2]=[v("svg",{class:"w-6 h-6 md:w-4 md:h-4 md:mr-2",fill:"none",stroke:"currentColor",viewBox:"0 0 24 24"},[v("path",{"stroke-linecap":"round","stroke-linejoin":"round","stroke-width":"2",d:"M18 9v3m0 0v3m0-3h3m-3 0h-3m-2-5a4 4 0 11-8 0 4 4 0 018 0zM3 20a6 6 0 0112 0v1H3v-1z"})],-1)]))),default:_((()=>[e[3]||(e[3]=v("span",{class:"hidden md:inline"},"Register Coach",-1))])),_:1},8,["onClick"])])}],["__scopeId","data-v-45d72f5c"]]),Lm=t({name:"CreateCoach",components:{Loading:Ag},props:{isOpen:{type:Boolean,required:!0}},emits:["close","success"],data:()=>({formData:{firstName:"",lastName:"",description:"",hourlyRate:0,skills:[]},isSubmitting:!1,availableSkills:["Frontend","Backend","Full Stack"]}),watch:{isOpen(t){document.body.style.overflow=t?"hidden":""}},beforeUnmount(){document.body.style.overflow=""},methods:{...gt("Coach",["registerCoach"]),clearForm(){this.formData={firstName:"",lastName:"",description:"",hourlyRate:0,skills:[]}},closeModal(){this.$emit("close")},async submitForm(){this.isSubmitting=!0;try{await this.registerCoach({...this.formData,fullName:`${this.formData.firstName} ${this.formData.lastName}`}),this.clearForm(),this.closeModal(),this.$emit("success","Coach registered successfully!")}catch(t){this.$emit("success","Failed to register coach. Please try again.")}finally{this.isSubmitting=!1}}}}),Om={class:"bg-gray-900/90 backdrop-blur-sm rounded-lg p-4 md:p-6 w-full max-w-[90%] md:max-w-md border-2 border-gray-800 shadow-xl mx-auto"},Nm={class:"flex justify-between items-center mb-4"},Mm=["disabled"],Rm={key:1},Pm=["disabled"],Vm=["disabled"],Fm=["disabled"],Bm=["disabled"],jm={class:"space-y-1 md:space-y-2"},Um=["value","disabled"],qm={class:"text-gray-300"},Hm={class:"flex justify-end space-x-3"},zm=["disabled"],$m=["disabled"];const Km=[{id:1,name:"Frontend",selected:!0},{id:2,name:"Backend",selected:!0},{id:3,name:"Full Stack",selected:!0}],Gm=t({name:"CoachesPage",components:{CoachesFilter:pm,CoachesContent:Sm,CoachesActions:Am,CreateCoach:rs(Lm,[["render",function(t,e,n,a,c,l){const u=b("Loading");return t.isOpen?(r(),i("div",{key:0,class:"fixed inset-0 bg-gray-700/30 backdrop-blur-3xl flex items-center justify-center z-50 p-4 overflow-hidden",onClick:e[8]||(e[8]=D(((...e)=>t.closeModal&&t.closeModal(...e)),["self"]))},[v("div",Om,[v("div",Nm,[e[10]||(e[10]=v("h3",{class:"text-lg md:text-xl font-semibold text-white"},"Register as a Coach",-1)),v("button",{onClick:e[0]||(e[0]=(...e)=>t.closeModal&&t.closeModal(...e)),class:"text-gray-400 hover:text-white",disabled:t.isSubmitting},e[9]||(e[9]=[v("svg",{class:"w-5 h-5 md:w-6 md:h-6",fill:"none",stroke:"currentColor",viewBox:"0 0 24 24"},[v("path",{"stroke-linecap":"round","stroke-linejoin":"round","stroke-width":"2",d:"M6 18L18 6M6 6l12 12"})],-1)]),8,Mm)]),v("form",{onSubmit:e[7]||(e[7]=D(((...e)=>t.submitForm&&t.submitForm(...e)),["prevent"])),class:"space-y-3 md:space-y-4"},[t.isSubmitting?(r(),k(u,{key:0})):(r(),i("div",Rm,[v("div",null,[e[11]||(e[11]=v("label",{for:"firstName",class:"block text-sm font-medium text-gray-300 mb-1"},"First Name",-1)),S(v("input",{type:"text",id:"firstName","onUpdate:modelValue":e[1]||(e[1]=e=>t.formData.firstName=e),class:"w-full px-3 py-2 bg-gray-700 border border-gray-600 rounded-md text-white focus:outline-none focus:ring-2 focus:ring-blue-500",required:"",disabled:t.isSubmitting},null,8,Pm),[[I,t.formData.firstName]])]),v("div",null,[e[12]||(e[12]=v("label",{for:"lastName",class:"block text-sm font-medium text-gray-300 mb-1"},"Last Name",-1)),S(v("input",{type:"text",id:"lastName","onUpdate:modelValue":e[2]||(e[2]=e=>t.formData.lastName=e),class:"w-full px-3 py-2 bg-gray-700 border border-gray-600 rounded-md text-white focus:outline-none focus:ring-2 focus:ring-blue-500",required:"",disabled:t.isSubmitting},null,8,Vm),[[I,t.formData.lastName]])]),v("div",null,[e[13]||(e[13]=v("label",{for:"description",class:"block text-sm font-medium text-gray-300 mb-1"},"Description",-1)),S(v("textarea",{id:"description","onUpdate:modelValue":e[3]||(e[3]=e=>t.formData.description=e),rows:"4",class:"w-full px-3 py-2 bg-gray-700 border border-gray-600 rounded-md text-white focus:outline-none focus:ring-2 focus:ring-blue-500",required:"",disabled:t.isSubmitting},null,8,Fm),[[I,t.formData.description]])]),v("div",null,[e[14]||(e[14]=v("label",{for:"hourlyRate",class:"block text-sm font-medium text-gray-300 mb-1"},"Hourly Rate ($)",-1)),S(v("input",{type:"number",id:"hourlyRate","onUpdate:modelValue":e[4]||(e[4]=e=>t.formData.hourlyRate=e),min:"0",class:"w-full px-3 py-2 bg-gray-700 border border-gray-600 rounded-md text-white focus:outline-none focus:ring-2 focus:ring-blue-500",required:"",disabled:t.isSubmitting},null,8,Bm),[[I,t.formData.hourlyRate,void 0,{number:!0}]])]),v("div",null,[e[15]||(e[15]=v("label",{class:"block text-sm font-medium text-gray-300 mb-1"},"Areas of Expertise",-1)),v("div",jm,[(r(!0),i(s,null,o(t.availableSkills,(n=>(r(),i("label",{key:n,class:"flex items-center space-x-2"},[S(v("input",{type:"checkbox",value:n,"onUpdate:modelValue":e[5]||(e[5]=e=>t.formData.skills=e),class:"rounded bg-gray-700 border-gray-600 text-blue-500 focus:ring-blue-500",disabled:t.isSubmitting},null,8,Um),[[L,t.formData.skills]]),v("span",qm,h(n),1)])))),128))])]),v("div",Hm,[v("button",{type:"button",onClick:e[6]||(e[6]=(...e)=>t.closeModal&&t.closeModal(...e)),class:"px-3 py-1.5 md:px-4 md:py-2 text-sm font-medium text-gray-300 hover:text-white bg-gray-700 rounded-md hover:bg-gray-600 focus:outline-none focus:ring-2 focus:ring-gray-500",disabled:t.isSubmitting}," Cancel ",8,zm),v("button",{type:"submit",class:"px-3 py-1.5 md:px-4 md:py-2 text-sm font-medium text-white bg-blue-600 rounded-md hover:bg-blue-700 focus:outline-none focus:ring-2 focus:ring-blue-500",disabled:t.isSubmitting},h(t.isSubmitting?"Registering...":"Register as Coach"),9,$m)])]))],32)])])):T("",!0)}],["__scopeId","data-v-8d2e61f3"]]),Toast:Kg},data:()=>({professions:Km,router:O(),showCreateCoachModal:!1,showToast:!1,toastMessage:"",refreshKey:0}),computed:{...ft("Coach",["isLoading","error","shouldAnimateInitialLoad"]),...pt("Coach",["filteredCoaches","allCoaches","isCoachesLoaded"])},methods:{...gt("Coach",["fetchCoaches","updateSelectedProfessions","disableInitialLoadAnimation"]),updateProfessions(t){this.professions=t;const e=t.filter((t=>t.selected)).map((t=>t.name));this.updateSelectedProfessions(e)},navigateToCoach(t){this.$router.push(`/coaches/${t}`)},showSuccessToast(t){this.toastMessage=t,this.showToast=!0,setTimeout((()=>{this.showToast=!1}),5e3)},handleRefresh(){this.refreshKey++,this.fetchCoaches()},handleCoachSuccess(t){this.showSuccessToast(t),t.includes("successfully")&&this.handleRefresh()}},provide(){return{navigateToCoach:this.navigateToCoach,showSuccessToast:this.showSuccessToast}},mounted(){this.shouldAnimateInitialLoad&&this.fetchCoaches()},beforeUnmount(){this.disableInitialLoadAnimation()}}),Wm={class:"p-2"},Qm={class:"sticky mx-auto max-w-5/6 md:max-w-2/5 top-0 z-10 bg-gray-200/70 transition-all duration-300 ease-in-out p-3 rounded-lg border-white/20 shadow-md mb-2"},Ym={class:"mb-2"},Xm={class:"w-5/6 md:w-full mx-auto"};const Jm=rs(Gm,[["render",function(t,e,n,s,o,a){const c=b("CoachesFilter"),l=b("CoachesActions"),u=b("CoachesContent"),h=b("CreateCoach"),d=b("Toast");return r(),i("div",Wm,[v("div",Qm,[v("div",Ym,[w(c,{professions:t.professions,onFilterProfessions:t.updateProfessions},null,8,["professions","onFilterProfessions"])]),v("div",Xm,[w(l,{onRegisterCoach:e[0]||(e[0]=e=>t.showCreateCoachModal=!0),onRefresh:t.handleRefresh},null,8,["onRefresh"])])]),w(u,{isLoading:t.isLoading,error:t.error,coaches:t.filteredCoaches,refreshKey:t.refreshKey},null,8,["isLoading","error","coaches","refreshKey"]),w(h,{"is-open":t.showCreateCoachModal,onClose:e[1]||(e[1]=e=>t.showCreateCoachModal=!1),onSuccess:t.handleCoachSuccess},null,8,["is-open","onSuccess"]),w(d,{"is-visible":t.showToast,message:t.toastMessage,onHide:e[2]||(e[2]=e=>t.showToast=!1)},null,8,["is-visible","message"])])}],["__scopeId","data-v-ad5d1858"]]),Zm=t({name:"RequestItem",components:{BaseCard:xg},props:{id:{type:Number,required:!0},firstname:{type:String,required:!0},lastname:{type:String,required:!0},email:{type:String,required:!0},formattedDate:{type:String,required:!0},message:{type:String,required:!0},requestedBy:{type:String,required:!0}}}),ty={class:"flex flex-col space-y-4 w-"},ey={class:"flex items-center space-x-2"},ny={class:"text-lg font-semibold text-white"},iy={class:"flex items-center space-x-2"},ry={class:"text-gray-300"},sy={class:"flex items-center space-x-2"},oy={class:"text-gray-300"},ay={class:"flex items-center space-x-2"},cy={class:"text-gray-300"},ly={class:"mt-4 p-4 bg-gray-400/50 rounded-lg"},uy={class:"text-gray-300 whitespace-pre-wrap"};const hy={name:"RequestsPage",components:{RequestList:rs({name:"RequestList",components:{RequestItem:rs(Zm,[["render",function(t,e,n,i,s,o){const a=b("BaseCard");return r(),k(a,{roundedClass:"rounded-3xl"},{default:_((()=>[v("div",ty,[v("div",ey,[e[0]||(e[0]=v("svg",{class:"w-5 h-5 text-gray-400",fill:"none",stroke:"currentColor",viewBox:"0 0 24 24"},[v("path",{"stroke-linecap":"round","stroke-linejoin":"round","stroke-width":"2",d:"M16 7a4 4 0 11-8 0 4 4 0 018 0zM12 14a7 7 0 00-7 7h14a7 7 0 00-7-7z"})],-1)),v("h3",ny,h(t.firstname)+" "+h(t.lastname),1)]),v("div",iy,[e[1]||(e[1]=v("svg",{class:"w-5 h-5 text-gray-400",fill:"none",stroke:"currentColor",viewBox:"0 0 24 24"},[v("path",{"stroke-linecap":"round","stroke-linejoin":"round","stroke-width":"2",d:"M3 8l7.89 5.26a2 2 0 002.22 0L21 8M5 19h14a2 2 0 002-2V7a2 2 0 00-2-2H5a2 2 0 00-2 2v10a2 2 0 002 2z"})],-1)),v("span",ry,h(t.email),1)]),v("div",sy,[e[2]||(e[2]=v("svg",{class:"w-5 h-5 text-gray-400",fill:"none",stroke:"currentColor",viewBox:"0 0 24 24"},[v("path",{"stroke-linecap":"round","stroke-linejoin":"round","stroke-width":"2",d:"M8 7V3m8 4V3m-9 8h10M5 21h14a2 2 0 002-2V7a2 2 0 00-2-2H5a2 2 0 00-2 2v12a2 2 0 002 2z"})],-1)),v("span",oy,h(t.formattedDate),1)]),v("div",ay,[e[3]||(e[3]=v("svg",{class:"w-5 h-5 text-gray-400",fill:"none",stroke:"currentColor",viewBox:"0 0 24 24"},[v("path",{"stroke-linecap":"round","stroke-linejoin":"round","stroke-width":"2",d:"M16 7a4 4 0 11-8 0 4 4 0 018 0zM12 14a7 7 0 00-7 7h14a7 7 0 00-7-7z"})],-1)),v("span",cy,"Requested by: "+h(t.requestedBy),1)]),v("div",ly,[v("p",uy,h(t.message),1)])])])),_:1})}],["__scopeId","data-v-bc620550"]])},computed:{...pt("Request",["requests"])}},[["render",function(t,e,n,i,s,o){const a=b("RequestItem"),c=b("MasonryWall");return r(),k(c,{items:t.requests,"column-width":300,gap:5},{default:_((({item:t})=>[(r(),k(a,{key:t.id,id:t.id,firstname:t.firstname,lastname:t.lastname,email:t.email,"formatted-date":t.formattedDate,message:t.message,"requested-by":t.requestedBy},null,8,["id","firstname","lastname","email","formatted-date","message","requested-by"]))])),_:1},8,["items"])}],["__scopeId","data-v-6c05a3b0"]])},computed:{...ft("Request",["isLoading","error","requests"])},methods:{...gt("Request",["fetchRequests"])},created(){this.fetchRequests()}},dy={class:"container mx-auto px-4 py-6"},fy={key:0,class:"text-center py-8"},py={key:1,class:"text-center py-8"},gy={class:"text-red-500"},my={key:2,class:"text-center py-8"};const yy=rs(hy,[["render",function(t,e,n,s,o,a){const c=b("RequestList");return r(),i("div",dy,[e[2]||(e[2]=v("div",{class:"max-w-min bg-gray-800 rounded-md w-full flex items-center mb-6 p-4"},[v("h1",{class:"text-2xl font-semibold text-white"},"Requests")],-1)),t.isLoading?(r(),i("div",fy,e[0]||(e[0]=[v("div",{class:"animate-spin rounded-full h-12 w-12 border-b-2 border-white mx-auto"},null,-1),v("p",{class:"text-gray-300 mt-4"},"Loading requests...",-1)]))):t.error?(r(),i("div",py,[v("p",gy,h(t.error),1)])):0===t.requests.length?(r(),i("div",my,e[1]||(e[1]=[v("p",{class:"text-gray-300"},"No requests found.",-1)]))):(r(),k(c,{key:3}))])}],["__scopeId","data-v-98feeef3"]]),vy=N({history:M("/vue-find-a-coach/"),routes:[{path:"/",redirect:"/coaches"},{path:"/coaches",component:Jm},{path:"/coaches/:id",name:"coach-detail",component:am,props:!0},{path:"/requests",component:yy}]}),by=R(hs);by.component("BaseButton",Ig),by.use(vy),by.use(kg),by.use(j);const wy=window.location;vy.replace(wy.pathname),by.mount("#app");
