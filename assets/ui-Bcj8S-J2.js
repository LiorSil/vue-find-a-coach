var e=Object.defineProperty,n=Object.getOwnPropertySymbols,t=Object.prototype.hasOwnProperty,l=Object.prototype.propertyIsEnumerable,o=(n,t,l)=>t in n?e(n,t,{enumerable:!0,configurable:!0,writable:!0,value:l}):n[t]=l,r=(e,n,t)=>new Promise(((l,o)=>{var r=e=>{try{u(t.next(e))}catch(n){o(n)}},a=e=>{try{u(t.throw(e))}catch(n){o(n)}},u=e=>e.done?l(e.value):Promise.resolve(e.value).then(r,a);u((t=t.apply(e,n)).next())}));import{d as a,r as u,t as s,c as i,o as c,F as d,a as m,n as v,u as p,b as f,e as y,f as h,g as w,h as g,i as x,w as b}from"./vendor-BrAfQ6HV.js";function C({columns:e,columnWidth:n,emit:t,gap:l,items:o,maxColumns:a,minColumns:u,nextTick:s,onBeforeUnmount:i,onMounted:c,rtl:d,scrollContainer:m,ssrColumns:v,vue:p,wall:f,watch:y}){function h(e,n,t,l){const o=w(t);return l+n+o<=e?h(e,n,t+1,l+n+o):t}function w(e){const t=Array.isArray(n.value)?n.value:[n.value];return t[e%t.length]}function g(){const e=function(e){const n=null==u?void 0:u.value;return n&&e<n?n:e}(function(e){const n=null==a?void 0:a.value;return n&&e>n?n:e}(h(f.value.getBoundingClientRect().width,l.value,0,-l.value)));return e>0?e:1}if(v.value>0){const n=k(v.value);o.value.forEach(((e,t)=>n[t%v.value].push(t))),e.value=n}let x=0;function b(n,t){return r(this,null,(function*(){if(n>=o.value.length||(yield s(),x!==t))return;const l=[...f.value.children];d.value&&l.reverse();const r=l.reduce(((e,n)=>n.getBoundingClientRect().height<e.getBoundingClientRect().height?n:e));e.value[+r.dataset.index].push(n),yield b(n+1,t)}))}function C(n=!1){return r(this,null,(function*(){const l=g();if(e.value.length===l&&!n)return void t(2===p?"redraw-skip":"redrawSkip");e.value=k(l);const o=null==m?void 0:m.value,r=o?o.scrollTop:window.scrollY;yield b(0,++x),o?o.scrollBy({top:r-o.scrollTop}):window.scrollTo({top:r}),t("redraw")}))}const T=typeof ResizeObserver>"u"?void 0:new ResizeObserver(function(){let e;return(...n)=>{void 0!==e&&clearTimeout(e),e=setTimeout((()=>(()=>C())(...n)),undefined)}}());return c((()=>{C(),null==T||T.observe(f.value)})),i((()=>null==T?void 0:T.unobserve(f.value))),y([o,d],(()=>C(!0))),y([n,l,u,a],(()=>C())),{getColumnWidthTarget:w}}function k(e){return Array.from({length:e}).map((()=>[]))}const T=["data-index"],O=a({__name:"masonry-wall",props:{columnWidth:{default:400},items:{},gap:{default:0},rtl:{type:Boolean,default:!1},ssrColumns:{default:0},scrollContainer:{default:null},minColumns:{default:1},maxColumns:{},keyMapper:{}},emits:["redraw","redrawSkip"],setup(e,{emit:r}){const a=e,k=r,O=u([]),B=u(),{getColumnWidthTarget:j}=C(((e,r)=>{for(var a in r||(r={}))t.call(r,a)&&o(e,a,r[a]);if(n)for(var a of n(r))l.call(r,a)&&o(e,a,r[a]);return e})({columns:O,emit:k,nextTick:w,onBeforeUnmount:g,onMounted:x,vue:3,wall:B,watch:b},s(a)));return(e,n)=>(c(),i("div",{ref_key:"wall",ref:B,class:"masonry-wall",style:v({display:"flex",gap:`${e.gap}px`})},[(c(!0),i(d,null,m(O.value,((n,t)=>(c(),i("div",{key:t,class:"masonry-column","data-index":t,style:v({display:"flex","flex-basis":`${p(j)(t)}px`,"flex-direction":"column","flex-grow":1,gap:`${e.gap}px`,height:["-webkit-max-content","-moz-max-content","max-content"],"min-width":0})},[(c(!0),i(d,null,m(n,((n,l)=>{var o,r;return c(),i("div",{key:null!=(o=null==(r=e.keyMapper)?void 0:r.call(e,e.items[n],t,l,n))?o:n,class:"masonry-item"},[f(e.$slots,"default",{item:e.items[n],column:t,row:l,index:n},(()=>[y(h(e.items[n]),1)]))])})),128))],12,T)))),128))],4))}}),B=(()=>{const e=O;return e.install=n=>{n.component("MasonryWall",e)},e})();export{B as R};
